/*
 * Filament 3.x Compatibility Fix
 * Professional solution for common Filament panel issues
 * 
 * This file addresses specific compatibility issues while respecting
 * Filament's natural behavior and design patterns.
 */

/*
 * ============================================================================
 * 1. INTERACTION FIXES
 * ============================================================================
 * Fix pointer-events issues without aggressive overrides
 */

/* Ensure interactive elements are always clickable */
.fi-btn,
.fi-link,
.fi-ac-btn-action,
.fi-ta-action,
.fi-dropdown-trigger,
.fi-sidebar-nav-item > a,
button:not([disabled]),
a:not([disabled]),
input:not([disabled]),
select:not([disabled]),
textarea:not([disabled]) {
    pointer-events: auto;
    cursor: pointer;
}

/* Fix form interactions specifically */
.fi-fo-field-wrp input,
.fi-fo-field-wrp select,
.fi-fo-field-wrp textarea,
.fi-fo-field-wrp button {
    pointer-events: auto;
}

/* Ensure password fields work correctly with Alpine.js */
input[type="password"],
input[x-bind\:type] {
    pointer-events: auto;
}

/*
 * ============================================================================
 * 2. LAYOUT FIXES
 * ============================================================================
 * Address sidebar and overlay issues
 */

/* Remove problematic overlays on desktop */
@media (min-width: 1024px) {
    .fi-sidebar-close-overlay {
        display: none;
    }
    
    /* Ensure main content is not blocked when sidebar is open */
    .fi-sidebar-open .fi-main-ctn {
        pointer-events: auto;
    }
}

/* Mobile sidebar improvements */
@media (max-width: 1023px) {
    .fi-sidebar-open .fi-sidebar {
        z-index: 50;
    }
    
    /* Ensure mobile overlay works properly */
    .fi-sidebar-close-overlay {
        background-color: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(2px);
    }
}

/*
 * ============================================================================
 * 3. DROPDOWN FIXES
 * ============================================================================
 * Ensure dropdowns work correctly
 */

.fi-dropdown-panel {
    z-index: 50;
    pointer-events: auto;
}

.fi-dropdown-list {
    pointer-events: auto;
}

/* Fix dropdown positioning issues */
.fi-dropdown {
    position: relative;
}

.fi-dropdown-panel {
    position: absolute;
}

/*
 * ============================================================================
 * 4. ICON SIZE STANDARDIZATION
 * ============================================================================
 * Professional icon sizing without aggressive overrides
 */

/* Base icon sizing */
.fi-icon svg {
    width: 1.25rem;
    height: 1.25rem;
}

/* Sidebar navigation icons */
.fi-sidebar-nav-item .fi-icon svg {
    width: 1.125rem;
    height: 1.125rem;
}

/* Button icons - size based on button size */
.fi-btn-sm .fi-icon svg {
    width: 1rem;
    height: 1rem;
}

.fi-btn .fi-icon svg {
    width: 1.125rem;
    height: 1.125rem;
}

.fi-btn-lg .fi-icon svg {
    width: 1.25rem;
    height: 1.25rem;
}

/* Table action icons */
.fi-ta-action .fi-icon svg,
.fi-ac-btn-action .fi-icon svg {
    width: 1.125rem;
    height: 1.125rem;
}

/* Widget and stat overview icons */
.fi-wi-stats-overview-stat .fi-icon svg {
    width: 1.5rem;
    height: 1.5rem;
}

/* Form field icons */
.fi-fo-field-wrp .fi-icon svg,
.fi-input-wrp .fi-icon svg {
    width: 1rem;
    height: 1rem;
}

/* Status and badge icons */
.fi-badge .fi-icon svg,
.fi-color-indicator .fi-icon svg {
    width: 0.875rem;
    height: 0.875rem;
}

/* Dropdown chevrons */
.fi-dropdown-trigger .fi-icon svg {
    width: 1rem;
    height: 1rem;
}

/*
 * ============================================================================
 * 5. FORM IMPROVEMENTS
 * ============================================================================
 * Enhance form usability and visibility
 */

/* Login form specific fixes */
.fi-simple-layout .fi-fo-field-wrp {
    margin-bottom: 1rem;
}

/* Ensure form labels are visible */
.fi-fo-field-wrp-label {
    font-weight: 500;
    color: rgb(55 65 81);
}

.dark .fi-fo-field-wrp-label {
    color: rgb(209 213 219);
}

/* Form input styling */
.fi-input {
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.fi-input:focus {
    border-color: rgb(59 130 246);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

/*
 * ============================================================================
 * 6. TABLE IMPROVEMENTS
 * ============================================================================
 * Enhance table usability and responsiveness
 */

/* Ensure table actions are accessible */
.fi-ta-actions {
    z-index: 10;
    position: relative;
}

/* Table responsive behavior */
.fi-ta {
    overflow-x: auto;
}

/* Table cell content alignment */
.fi-ta-cell {
    vertical-align: middle;
}

/*
 * ============================================================================
 * 7. MOBILE OPTIMIZATIONS
 * ============================================================================
 * Improve mobile experience
 */

@media (max-width: 768px) {
    /* Adjust spacing on mobile */
    .fi-main {
        padding: 1rem;
    }
    
    /* Ensure buttons are touch-friendly */
    .fi-btn {
        min-height: 2.75rem;
        padding: 0.625rem 1rem;
    }
    
    /* Mobile table improvements */
    .fi-ta-ctn {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    /* Mobile form improvements */
    .fi-fo-field-wrp {
        margin-bottom: 1.5rem;
    }
}

/*
 * ============================================================================
 * 8. ACCESSIBILITY IMPROVEMENTS
 * ============================================================================
 * Enhance accessibility without breaking functionality
 */

/* Focus indicators */
.fi-btn:focus-visible,
.fi-link:focus-visible {
    outline: 2px solid rgb(59 130 246);
    outline-offset: 2px;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    .fi-btn {
        border-width: 2px;
    }
    
    .fi-input {
        border-width: 2px;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    .fi-btn,
    .fi-input,
    .fi-dropdown-panel {
        transition: none;
    }
}

/*
 * ============================================================================
 * 9. PERFORMANCE OPTIMIZATIONS
 * ============================================================================
 * Subtle performance improvements
 */

/* Hardware acceleration for smoother interactions */
.fi-dropdown-panel {
    transform: translateZ(0);
    will-change: transform, opacity;
}

.fi-sidebar {
    transform: translateZ(0);
    will-change: transform;
}

/*
 * ============================================================================
 * 10. BROWSER COMPATIBILITY
 * ============================================================================
 * Cross-browser compatibility fixes
 */

/* Safari specific fixes */
@supports (-webkit-appearance: none) {
    .fi-input[type="password"] {
        -webkit-text-security: disc;
    }
}

/* Firefox specific fixes */
@-moz-document url-prefix() {
    .fi-dropdown-panel {
        scrollbar-width: thin;
    }
}

/*
 * ============================================================================
 * IMPORTANT NOTES
 * ============================================================================
 * 
 * This file uses targeted selectors to work WITH Filament, not against it.
 * 
 * What this file DOES:
 * - Fixes specific interaction issues
 * - Standardizes icon sizes professionally  
 * - Improves mobile experience
 * - Enhances accessibility
 * 
 * What this file does NOT do:
 * - Use universal selectors (*)
 * - Override with !important unless absolutely necessary
 * - Break Filament's intended behavior
 * - Create aggressive z-index hierarchies
 * 
 * All fixes are designed to be:
 * - Maintainable
 * - Non-breaking
 * - Forward-compatible
 * - Performance-conscious
 */