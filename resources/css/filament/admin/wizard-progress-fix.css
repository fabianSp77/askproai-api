/* Wizard Progress Bar / Connection Line Fix */

/* Ensure wizard steps container has proper layout */
.fi-fo-wizard {
    position: relative !important;
}

/* Fix the navigation/steps container */
.fi-fo-wizard-header {
    position: relative !important;
    overflow: visible !important;
}

/* Enhanced wizard steps - applied by JS */
.wizard-steps-enhanced {
    display: flex !important;
    position: relative !important;
    z-index: 2 !important;
    align-items: center !important;
    justify-content: space-between !important;
}

/* Enhanced step items - applied by JS */
.wizard-step-enhanced {
    position: relative !important;
    flex: 1 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

/* Ensure buttons don't get blocked */
.wizard-step-button {
    position: relative !important;
    z-index: 10 !important;
    background-color: white !important;
    pointer-events: auto !important;
    cursor: pointer !important;
}

.dark .wizard-step-button {
    background-color: rgb(31 41 55) !important;
}

/* Fix the connection lines between steps */
.fi-fo-wizard-header nav ol li:not(:last-child)::after {
    content: '' !important;
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    width: 100% !important;
    height: 2px !important;
    background-color: rgb(229 231 235) !important; /* gray-200 */
    transform: translateY(-50%) !important;
    z-index: -1 !important;
}

/* Active/completed step connection lines */
.fi-fo-wizard-header nav ol li.fi-active:not(:last-child)::after,
.fi-fo-wizard-header nav ol li.fi-completed:not(:last-child)::after {
    background-color: rgb(234 179 8) !important; /* amber-500 */
}

/* Fix step buttons/links */
.fi-fo-wizard-header nav ol li button,
.fi-fo-wizard-header nav ol li a {
    position: relative !important;
    z-index: 10 !important;
    background-color: white !important;
    padding: 0.5rem !important;
}

/* Ensure proper spacing between steps */
.fi-fo-wizard-header nav ol li:not(:first-child) {
    padding-left: 1rem !important;
}

/* Connection lines created by JS */
.wizard-connection-line {
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    width: 100% !important;
    height: 2px !important;
    transform: translateY(-50%) !important;
    z-index: 0 !important;
    pointer-events: none !important;
}

.wizard-connection-line[data-state="pending"] {
    background-color: rgb(229 231 235) !important;
}

.wizard-connection-line[data-state="completed"] {
    background-color: rgb(234 179 8) !important;
}

.dark .wizard-connection-line[data-state="pending"] {
    background-color: rgb(55 65 81) !important;
}

.dark .wizard-connection-line[data-state="completed"] {
    background-color: rgb(251 191 36) !important;
}

/* Progress bars created by JS */
.wizard-progress-background {
    position: absolute !important;
    top: 50% !important;
    left: 5% !important;
    right: 5% !important;
    height: 2px !important;
    background-color: rgb(229 231 235) !important;
    transform: translateY(-50%) !important;
    z-index: 0 !important;
    pointer-events: none !important;
}

.dark .wizard-progress-background {
    background-color: rgb(55 65 81) !important;
}

.wizard-progress-active {
    position: absolute !important;
    top: 50% !important;
    left: 5% !important;
    height: 2px !important;
    background-color: rgb(234 179 8) !important;
    transform: translateY(-50%) !important;
    z-index: 1 !important;
    transition: width 0.3s ease !important;
    pointer-events: none !important;
}

.wizard-progress-active[data-progress] {
    width: calc(attr(data-progress) * 1%) !important;
}

.dark .wizard-progress-active {
    background-color: rgb(251 191 36) !important;
}

/* Set progress based on active step */
.fi-fo-wizard[data-step="1"] nav::after {
    width: 0% !important;
}

.fi-fo-wizard[data-step="2"] nav::after {
    width: 33% !important;
}

.fi-fo-wizard[data-step="3"] nav::after {
    width: 66% !important;
}

.fi-fo-wizard[data-step="4"] nav::after {
    width: 100% !important;
}

/* Fix for dark mode */
.dark .fi-fo-wizard-header nav ol li:not(:last-child)::after,
.dark .fi-fo-wizard-header nav::before {
    background-color: rgb(55 65 81) !important; /* gray-700 */
}

.dark .fi-fo-wizard-header nav ol li.fi-active:not(:last-child)::after,
.dark .fi-fo-wizard-header nav ol li.fi-completed:not(:last-child)::after,
.dark .fi-fo-wizard-header nav::after {
    background-color: rgb(251 191 36) !important; /* amber-400 */
}

/* Ensure step indicators are visible */
.fi-fo-wizard-header .fi-fo-wizard-item-icon {
    position: relative !important;
    z-index: 20 !important;
    background-color: inherit !important;
}

/* Mobile responsive adjustments */
@media (max-width: 640px) {
    .fi-fo-wizard-header nav ol {
        flex-direction: column !important;
    }
    
    .fi-fo-wizard-header nav ol li:not(:last-child)::after {
        width: 2px !important;
        height: 100% !important;
        top: 100% !important;
        left: 50% !important;
        transform: translateX(-50%) !important;
    }
    
    .fi-fo-wizard-header nav::before,
    .fi-fo-wizard-header nav::after {
        display: none !important;
    }
}