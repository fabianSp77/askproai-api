/* Form Layout Fixes - Verhindert Ãœberlappungen */

/* ================================================================
   GRID SYSTEM FIXES
   ================================================================ */

/* Ensure proper grid container behavior */
.fi-fo-grid {
    display: grid !important;
    width: 100% !important;
    gap: 1rem !important;
    align-items: start !important;
}

/* Default grid columns */
.fi-fo-grid {
    grid-template-columns: repeat(1, minmax(0, 1fr));
}

@media (min-width: 640px) {
    .fi-fo-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
}

@media (min-width: 1024px) {
    .fi-fo-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
    }
}

/* Fix field wrapper positioning */
.fi-fo-field-wrp {
    position: relative !important;
    min-height: 0 !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: visible !important;
}

/* Prevent field overlap */
.fi-fo-field-wrp > * {
    position: relative !important;
    z-index: 1;
}

/* Fix label positioning */
.fi-fo-field-wrp-label {
    position: relative !important;
    display: block !important;
    margin-bottom: 0.5rem !important;
    z-index: 2 !important;
}

/* Fix input container */
.fi-fo-field-wrp > div:not(.fi-fo-field-wrp-label) {
    position: relative !important;
    width: 100% !important;
}

/* ================================================================
   SPECIFIC FIELD FIXES
   ================================================================ */

/* Text input fixes */
.fi-input-wrp {
    position: relative !important;
    display: flex !important;
    width: 100% !important;
    overflow: visible !important;
}

.fi-input {
    width: 100% !important;
    position: relative !important;
}

/* Select field fixes */
.fi-select {
    position: relative !important;
    width: 100% !important;
}

.fi-select-input {
    width: 100% !important;
}

/* Textarea fixes */
.fi-textarea {
    width: 100% !important;
    min-height: 5rem !important;
}

/* Date picker fixes */
.fi-fo-date-time-picker {
    position: relative !important;
    width: 100% !important;
}

/* ================================================================
   GRID COLUMN SPANS
   ================================================================ */

/* Full width fields */
.fi-fo-field-wrp-full,
[x-data*="columnSpan: 'full'"],
[x-data*="columnSpan: 3"] {
    grid-column: 1 / -1 !important;
}

/* Two column span */
[x-data*="columnSpan: 2"] {
    grid-column: span 2 !important;
}

@media (max-width: 639px) {
    /* All fields full width on mobile */
    [x-data*="columnSpan: 2"] {
        grid-column: 1 / -1 !important;
    }
}

/* Single column */
[x-data*="columnSpan: 1"],
.fi-fo-field-wrp:not([x-data*="columnSpan"]) {
    grid-column: span 1 !important;
}

/* ================================================================
   SECTION & COMPONENT SPACING
   ================================================================ */

/* Section spacing */
.fi-fo-section {
    margin-bottom: 1.5rem !important;
    padding: 1.5rem !important;
    overflow: visible !important;
}

/* Component spacing */
.fi-fo-component {
    margin-bottom: 1rem !important;
}

/* ================================================================
   DROPDOWN & OVERLAY FIXES
   ================================================================ */

/* Ensure dropdowns don't cause overlap */
.fi-select-dropdown,
.fi-dropdown-panel {
    position: absolute !important;
    z-index: 50 !important;
    top: 100% !important;
    left: 0 !important;
    right: 0 !important;
}

/* Date picker dropdown */
.fi-fo-date-time-picker-dropdown {
    position: absolute !important;
    z-index: 50 !important;
}

/* ================================================================
   RESPONSIVE ADJUSTMENTS
   ================================================================ */

@media (max-width: 767px) {
    /* Increase spacing on mobile */
    .fi-fo-grid {
        gap: 1.5rem !important;
    }
    
    .fi-fo-field-wrp {
        margin-bottom: 1rem !important;
    }
    
    /* Ensure labels don't overlap */
    .fi-fo-field-wrp-label {
        margin-bottom: 0.75rem !important;
        line-height: 1.5 !important;
    }
}

/* ================================================================
   Z-INDEX HIERARCHY
   ================================================================ */

/* Establish proper z-index hierarchy */
.fi-fo-field-wrp {
    z-index: 1;
}

.fi-fo-field-wrp:hover,
.fi-fo-field-wrp:focus-within {
    z-index: 2;
}

/* Active dropdowns */
.fi-select-dropdown.open,
.fi-fo-date-time-picker-dropdown.open {
    z-index: 100 !important;
}

/* ================================================================
   OVERFLOW FIXES
   ================================================================ */

/* Prevent container overflow issues */
.fi-page-content,
.fi-form {
    overflow: visible !important;
}

/* But hide horizontal overflow */
.fi-main {
    overflow-x: hidden !important;
    overflow-y: visible !important;
}

/* ================================================================
   FLEXBOX FALLBACKS
   ================================================================ */

/* For older browsers or when grid fails */
@supports not (display: grid) {
    .fi-fo-grid {
        display: flex !important;
        flex-wrap: wrap !important;
    }
    
    .fi-fo-field-wrp {
        flex: 1 1 100% !important;
    }
    
    @media (min-width: 640px) {
        .fi-fo-field-wrp {
            flex: 1 1 50% !important;
        }
    }
    
    @media (min-width: 1024px) {
        .fi-fo-field-wrp {
            flex: 1 1 33.333% !important;
        }
    }
}

/* ================================================================
   DEBUG HELPERS (Remove in production)
   ================================================================ */

/* Uncomment to debug layout issues */
/*
.fi-fo-grid {
    border: 2px dashed red !important;
}

.fi-fo-field-wrp {
    border: 1px solid blue !important;
    background: rgba(0, 0, 255, 0.05) !important;
}

.fi-fo-field-wrp-label {
    background: rgba(255, 0, 0, 0.1) !important;
}
*/