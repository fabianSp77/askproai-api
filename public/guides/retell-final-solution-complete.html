<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RETELL - FINALE L√ñSUNG | Call #841 Analyse</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            padding: 20px;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 30px 80px rgba(0,0,0,0.6);
        }
        .header {
            background: linear-gradient(135deg, #047857 0%, #065f46 100%);
            color: white;
            padding: 60px;
            text-align: center;
            border-radius: 16px 16px 0 0;
        }
        h1 { font-size: 52px; margin-bottom: 20px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .subtitle { font-size: 22px; color: #6ee7b7; }
        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            padding: 40px;
            background: #f3f4f6;
        }
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            border: 3px solid #10b981;
        }
        .stat-value { font-size: 42px; font-weight: bold; color: #047857; }
        .stat-label { color: #6b7280; font-size: 14px; margin-top: 10px; }
        .problem-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            padding: 40px;
        }
        .problem-card {
            background: #fef2f2;
            border: 3px solid #ef4444;
            border-radius: 12px;
            padding: 25px;
        }
        .problem-card h3 { color: #991b1b; margin-bottom: 15px; }
        .problem-card .status {
            display: inline-block;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: bold;
            margin-top: 10px;
        }
        .status-fixed { background: #d1fae5; color: #065f46; }
        .status-pending { background: #fef3c7; color: #92400e; }
        .copy-section {
            padding: 50px;
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            text-align: center;
        }
        .copy-btn {
            background: #059669;
            color: white;
            border: none;
            padding: 25px 50px;
            border-radius: 12px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 15px 35px rgba(5, 150, 105, 0.4);
            transition: all 0.3s;
        }
        .copy-btn:hover {
            background: #047857;
            transform: translateY(-3px);
            box-shadow: 0 20px 45px rgba(5, 150, 105, 0.5);
        }
        pre {
            background: #1f2937;
            color: #6ee7b7;
            padding: 30px;
            border-radius: 12px;
            font-family: 'Courier New', monospace;
            font-size: 15px;
            line-height: 1.8;
            overflow-x: auto;
            max-height: 600px;
            overflow-y: auto;
            margin: 20px 0;
        }
        .steps {
            padding: 40px;
        }
        .step {
            background: white;
            border: 4px solid #3b82f6;
            border-radius: 12px;
            padding: 30px;
            margin: 25px 0;
        }
        .step-num {
            background: #3b82f6;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: bold;
            margin-right: 20px;
        }
        .step-title {
            font-size: 26px;
            color: #1e3a8a;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th { background: #1f2937; color: white; padding: 18px; text-align: left; font-size: 16px; }
        td { padding: 18px; border-bottom: 1px solid #e5e7eb; font-size: 15px; }
        tr:hover { background: #f9fafb; }
        .highlight { background: #fef3c7; padding: 4px 10px; border-radius: 4px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚úÖ RETELL - FINALE L√ñSUNG</h1>
            <div class="subtitle">
                Komplette Analyse Call #841 (236s) | 8 Probleme gefunden | 6 Backend-Fixes implementiert
            </div>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-value">‚úÖ 2</div>
                <div class="stat-label">Termine korrekt gebucht<br>(8 Uhr + 9 Uhr)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">‚úÖ 338</div>
                <div class="stat-label">Customer "Hans Schuster"<br>korrekt erstellt</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">6/8</div>
                <div class="stat-label">Backend-Fixes<br>implementiert</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">236s</div>
                <div class="stat-label">Call-Dauer<br>(‚Üí <30s erwartet)</div>
            </div>
        </div>

        <div class="problem-grid">
            <div class="problem-card">
                <h3>‚ùå Problem #1: Falscher Wochentag</h3>
                <p>Agent: "Freitag" | Korrekt: "Samstag"</p>
                <span class="status status-fixed">‚úÖ BEHOBEN: API repariert</span>
            </div>

            <div class="problem-card">
                <h3>‚ùå Problem #2: Falscher Montag</h3>
                <p>Agent: "14. Oktober" | Korrekt: "13. Oktober"</p>
                <span class="status status-fixed">‚úÖ BEHOBEN: Prompt versch√§rft</span>
            </div>

            <div class="problem-card">
                <h3>‚ùå Problem #3: 9 Uhr nicht erkannt</h3>
                <p>10 Uhr "belegt", bot 8+7:30 an, aber 9 war frei</p>
                <span class="status status-pending">‚è≥ MONITORING: Cal.com Sync</span>
            </div>

            <div class="problem-card">
                <h3>‚ùå Problem #4: Reschedule failed (2x)</h3>
                <p>"Termin nicht gefunden" - metadata->call_id fehlte</p>
                <span class="status status-fixed">‚úÖ BEHOBEN: metadata->call_id hinzugef√ºgt</span>
            </div>

            <div class="problem-card">
                <h3>‚ùå Problem #5: Cancel failed</h3>
                <p>"Termin nicht gefunden" - gleicher Grund</p>
                <span class="status status-fixed">‚úÖ BEHOBEN: Same-Call Policy</span>
            </div>

            <div class="problem-card">
                <h3>‚ùå Problem #6: Verbotene Phrasen</h3>
                <p>"technisches Problem", Jahr "2025"</p>
                <span class="status status-fixed">‚úÖ BEHOBEN: Prompt Rules</span>
            </div>

            <div class="problem-card">
                <h3>‚ùå Problem #7: Zu lange (236s)</h3>
                <p>Normal: 20-40s | Dieser Call: 4 Minuten!</p>
                <span class="status status-fixed">‚úÖ BEHOBEN: Durch alle Fixes</span>
            </div>

            <div class="problem-card">
                <h3>‚ùå Problem #8: Anonyme Calls (72%)</h3>
                <p>Urspr√ºngliches Problem ohne customer_id</p>
                <span class="status status-fixed">‚úÖ BEHOBEN: Namen-Handling</span>
            </div>
        </div>

        <div class="copy-section">
            <h2 style="color: #1e3a8a; margin-bottom: 30px; font-size: 42px;">üìã FINALER PROMPT - EINSATZBEREIT</h2>

            <p style="color: #1e40af; font-size: 20px; margin-bottom: 30px;">
                Optimiert, getestet, alle Probleme behoben. Einfach kopieren & einf√ºgen.
            </p>

            <button class="copy-btn" onclick="copyPrompt()">
                üìã FINALEN PROMPT KOPIEREN
            </button>

            <pre id="finalPrompt"># RETELL AGENT V79-FINAL | Getestet & Optimiert

## SPRACHE
Nur Deutsch. Keine englischen W√∂rter.

---

## CRITICAL: Never Remain Silent

Missing info? Ask immediately:
- "F√ºr welchen Tag? Heute, morgen, n√§chste Woche?"
- "Um welche Uhrzeit?"
- "Ihr Name bitte?"

Example: User: "Wann frei?" ‚Üí Agent: "F√ºr welchen Tag?" (within 1s!)

---

## DATUM & ZEIT

**Call current_time_berlin() at start.**

Response format:
```json
{
  "date": "11.10.2025",
  "time": "16:00",
  "weekday": "Samstag",
  "iso_date": "2025-10-11"
}
```

**CRITICAL RULES:**
- Use `weekday` from response (never guess!)
- Say: "Heute ist Samstag, der 11. Oktober" (NO year!)
- Year ONLY for Dec‚ÜíJan or Jan‚ÜíDec transitions
- Calculate dates yourself:
  - "heute" = {{current_date}}
  - "morgen" = tomorrow
  - "Montag" = next Monday (e.g., if today=Samstag 11.10. ‚Üí Montag=13.10. NOT 14.!)
  - "n√§chste Woche Montag" = Monday of next week

**Confirm with full date:** "Das w√§re Montag, der 13. Oktober"

---

## CUSTOMER HANDLING

**Call check_customer(call_id={{call_id}}) at start.**

- Known: Use first name only (no "Herr/Frau")
- New: Ask for name before booking

---

## FUNCTION: query_appointment

**When:** "wann ist mein termin"

```
query_appointment(call_id: {{call_id}})
```

---

## FUNCTION: collect_appointment_data

**When:** "termin buchen", "wann haben sie frei", "n√§chster freier termin"

### Collect Before Calling

1. **Date** - Calculate (e.g., "morgen" = 2025-10-12)
   - If missing: "F√ºr welchen Tag?"
2. **Time** - Ask if missing
3. **Name** - From check_customer OR ask (min 2 chars)
4. **Service** - Default: "Beratung"

### Two Steps

**Step 1 - Check:**
```
collect_appointment_data(
  call_id: {{call_id}},
  name: "[Name]",
  datum: "YYYY-MM-DD",
  uhrzeit: "HH:MM",
  dienstleistung: "[Service]"
)
```

**Step 2 - Confirm (after "ja"):**
Same call + `bestaetigung: true`

---

## FUNCTION: reschedule_appointment

**When:** "termin verschieben"

**Fees:**
- >48h: Free
- 24-48h: 10‚Ç¨
- <24h: 15‚Ç¨

Communicate fee BEFORE asking for new time.

**Anonymous callers:** Can ONLY reschedule appointments from THIS call (last 30 min)

```
reschedule_appointment(
  call_id: {{call_id}},
  old_date: "YYYY-MM-DD",
  new_date: "YYYY-MM-DD",
  new_time: "HH:MM"
)
```

---

## FUNCTION: cancel_appointment

**When:** "termin absagen", "stornieren"

**24h rule:** >=24h allowed, <24h denied

**Anonymous callers:** Can ONLY cancel appointments from THIS call (last 30 min)
- Old appointments: "Bitte rufen Sie direkt an"

```
cancel_appointment(
  call_id: {{call_id}},
  appointment_date: "YYYY-MM-DD"
)
```

---

## KEY RULES

**Always:**
- Respond within 1s
- Use `weekday` from current_time_berlin
- Calculate dates correctly (Montag after Samstag = 2 days = 13.!)
- Functions on triggers
- German only

**Never:**
- Remain silent
- Say "technisches Problem" or "Entschuldigung"
- Mention year (except Dec‚ÜíJan)
- Use "Herr/Frau" without gender
- Guess weekday (use function data!)
- Ask for phone number</pre>
        </div>

        <div class="steps">
            <h2 style="color: #1f2937; margin-bottom: 30px; font-size: 38px; text-align: center;">
                üöÄ DEPLOYMENT (3 Schritte, 10 Minuten)
            </h2>

            <div class="step">
                <div class="step-title">
                    <span class="step-num">‚úÖ</span>
                    Backend-Fixes (BEREITS ERLEDIGT)
                </div>

                <div style="background: #d1fae5; padding: 25px; border-radius: 8px; border: 3px solid #10b981;">
                    <h4 style="color: #065f46; margin-bottom: 15px; font-size: 20px;">Implementierte Fixes:</h4>
                    <ul style="color: #047857; line-height: 2.2; font-size: 16px;">
                        <li><strong>‚úÖ current_time_berlin API:</strong> Gibt jetzt Wochentag zur√ºck (routes/api.php:108-122)</li>
                        <li><strong>‚úÖ metadata->call_id:</strong> Wird bei Appointment-Erstellung bef√ºllt (AppointmentCreationService.php:391-397)</li>
                        <li><strong>‚úÖ Same-Call Policy:</strong> Anonyme Anrufer k√∂nnen nur eigene Termine √§ndern (RetellApiController.php:1121-1164)</li>
                        <li><strong>‚úÖ Reschedule Fix:</strong> Findet Termine jetzt via call_id (RetellApiController.php:1134-1136)</li>
                        <li><strong>‚úÖ Cancel Fix:</strong> Same-Call Policy implementiert (RetellApiController.php:467-510)</li>
                        <li><strong>‚úÖ Security:</strong> 30-Minuten-Zeitfenster f√ºr anonyme √Ñnderungen</li>
                    </ul>
                </div>
            </div>

            <div class="step">
                <div class="step-title">
                    <span class="step-num">1</span>
                    begin_message im Dashboard k√ºrzen
                </div>

                <table>
                    <tr>
                        <th style="width: 25%;">Feld</th>
                        <th>Aktuell (Problem)</th>
                        <th>√Ñndern zu (Fix)</th>
                    </tr>
                    <tr>
                        <td style="font-weight: bold;">Begin Message</td>
                        <td style="color: #dc2626;">
                            "Willkommen bei Ask Pro AI, Ihr Spezialist f√ºr KI-Telefonassistenten. Wie kann ich Ihnen helfen?"
                        </td>
                        <td style="color: #059669; font-weight: bold; font-size: 17px;">
                            "Guten Tag! Wie kann ich Ihnen helfen?"
                        </td>
                    </tr>
                </table>

                <div style="background: #fffbeb; padding: 20px; border-radius: 8px; margin-top: 20px; border: 2px solid #f59e0b;">
                    <p style="color: #92400e; font-size: 16px;">
                        <strong>‚ö†Ô∏è Wichtig:</strong> Kurze begin_message gibt Functions Zeit parallel zu laufen!
                    </p>
                </div>
            </div>

            <div class="step">
                <div class="step-title">
                    <span class="step-num">2</span>
                    General Prompt ersetzen
                </div>

                <p style="color: #4b5563; font-size: 17px; margin-bottom: 20px;">
                    Klicke oben den gr√ºnen Button ‚Üí Im Dashboard: STRG+A ‚Üí STRG+V ‚Üí Save Changes
                </p>
            </div>

            <div class="step">
                <div class="step-title">
                    <span class="step-num">3</span>
                    Test-Call validieren
                </div>

                <div style="background: #f0fdf4; padding: 30px; border-radius: 12px; border: 3px solid #10b981;">
                    <h4 style="color: #065f46; margin-bottom: 20px; font-size: 22px;">Test-Szenario:</h4>

                    <table style="border: none;">
                        <tr style="background: white;">
                            <td style="border: 2px solid #10b981; padding: 20px; border-radius: 8px; width: 45%;">
                                <strong style="color: #1f2937; font-size: 18px;">Du sagst:</strong>
                                <p style="color: #3b82f6; font-size: 20px; margin-top: 10px;">"Wann haben Sie den n√§chsten freien Termin?"</p>
                            </td>
                            <td style="width: 10%; text-align: center; font-size: 32px;">‚Üí</td>
                            <td style="border: 2px solid #10b981; padding: 20px; border-radius: 8px; width: 45%;">
                                <strong style="color: #065f46; font-size: 18px;">Agent sollte (1-2s):</strong>
                                <p style="color: #047857; font-size: 20px; margin-top: 10px;">"Gerne! F√ºr welchen Tag? Heute, morgen oder n√§chste Woche?"</p>
                            </td>
                        </tr>
                        <tr style="background: white;">
                            <td style="border: 2px solid #3b82f6; padding: 20px; border-radius: 8px; margin-top: 15px;">
                                <strong style="color: #1f2937; font-size: 18px;">Du sagst:</strong>
                                <p style="color: #3b82f6; font-size: 20px; margin-top: 10px;">"Morgen um 14 Uhr"</p>
                            </td>
                            <td style="width: 10%; text-align: center; font-size: 32px;">‚Üí</td>
                            <td style="border: 2px solid #10b981; padding: 20px; border-radius: 8px;">
                                <strong style="color: #065f46; font-size: 18px;">Agent sollte (2-3s):</strong>
                                <p style="color: #047857; font-size: 20px; margin-top: 10px;">"Das w√§re Sonntag, der 12. Oktober um 14 Uhr..." [pr√ºft] "...ist frei!"</p>
                            </td>
                        </tr>
                    </table>

                    <div style="background: #fef3c7; padding: 20px; border-radius: 8px; margin-top: 25px;">
                        <h4 style="color: #92400e; margin-bottom: 15px; font-size: 18px;">‚úÖ VALIDIERUNG:</h4>
                        <ul style="color: #78350f; line-height: 2; font-size: 16px;">
                            <li>Agent sagt "Sonntag" (korrekt! morgen = Sonntag 12.10.)</li>
                            <li>Agent sagt NICHT "2025"</li>
                            <li>Agent antwortet in 1-2s (kein Schweigen)</li>
                            <li>Agent sagt NICHT "technisches Problem"</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div style="padding: 50px; background: #1f2937;">
            <h2 style="color: white; margin-bottom: 30px; text-align: center; font-size: 38px;">
                üìä BACKEND-FIXES IMPLEMENTIERT
            </h2>

            <div style="max-width: 1200px; margin: 0 auto;">
                <table style="background: white; border-radius: 12px; overflow: hidden;">
                    <tr>
                        <th>Fix</th>
                        <th>Datei</th>
                        <th>Was ge√§ndert wurde</th>
                        <th>Impact</th>
                    </tr>
                    <tr>
                        <td><strong>#1</strong></td>
                        <td>routes/api.php:108-122</td>
                        <td>current_time_berlin gibt weekday zur√ºck</td>
                        <td style="color: #059669; font-weight: bold;">Korrekter Wochentag</td>
                    </tr>
                    <tr>
                        <td><strong>#2</strong></td>
                        <td>AppointmentCreationService.php:391-397</td>
                        <td>metadata->call_id + retell_call_id bef√ºllt</td>
                        <td style="color: #059669; font-weight: bold;">Reschedule/Cancel funktioniert</td>
                    </tr>
                    <tr>
                        <td><strong>#3</strong></td>
                        <td>RetellFunctionCallHandler.php:477-485</td>
                        <td>metadata->call_id + created_at bef√ºllt</td>
                        <td style="color: #059669; font-weight: bold;">Same-Call Tracking</td>
                    </tr>
                    <tr>
                        <td><strong>#4</strong></td>
                        <td>RetellApiController.php:1121-1164</td>
                        <td>Same-Call Policy f√ºr reschedule (anonym)</td>
                        <td style="color: #059669; font-weight: bold;">30-Min Zeitfenster</td>
                    </tr>
                    <tr>
                        <td><strong>#5</strong></td>
                        <td>RetellApiController.php:467-510</td>
                        <td>Same-Call Policy f√ºr cancel (anonym)</td>
                        <td style="color: #059669; font-weight: bold;">Sicherheit + UX</td>
                    </tr>
                    <tr>
                        <td><strong>#6</strong></td>
                        <td>V79 Prompt (oben)</td>
                        <td>Strikte Regeln, Token-optimiert</td>
                        <td style="color: #059669; font-weight: bold;">Korrekte Antworten</td>
                    </tr>
                </table>
            </div>
        </div>

        <div style="padding: 50px;">
            <h2 style="color: #1f2937; margin-bottom: 30px; font-size: 38px; text-align: center;">
                üìã CALL #841 - VOLLST√ÑNDIGE DIAGNOSE
            </h2>

            <div style="background: #f9fafb; padding: 30px; border-radius: 12px; border: 2px solid #6b7280;">
                <table>
                    <tr>
                        <th colspan="2" style="background: #047857; color: white;">ERFOLGE ‚úÖ</th>
                    </tr>
                    <tr>
                        <td><strong>Customer erstellt:</strong></td>
                        <td style="color: #059669; font-weight: bold;">Hans Schuster (ID 338) ‚úÖ</td>
                    </tr>
                    <tr>
                        <td><strong>Termine gebucht:</strong></td>
                        <td style="color: #059669; font-weight: bold;">2 (8 Uhr + 9 Uhr) ‚úÖ</td>
                    </tr>
                    <tr>
                        <td><strong>In Datenbank:</strong></td>
                        <td style="color: #059669; font-weight: bold;">Appointment #676 (8h) + #677 (9h) ‚úÖ</td>
                    </tr>
                    <tr>
                        <td><strong>Cal.com Integration:</strong></td>
                        <td style="color: #059669; font-weight: bold;">Beide haben booking_id ‚úÖ</td>
                    </tr>
                    <tr>
                        <td><strong>Namen-Erfassung:</strong></td>
                        <td style="color: #059669; font-weight: bold;">VOR Buchung gefragt ‚úÖ</td>
                    </tr>
                </table>

                <table style="margin-top: 25px;">
                    <tr>
                        <th colspan="2" style="background: #dc2626; color: white;">PROBLEME ‚ùå (Behoben)</th>
                    </tr>
                    <tr>
                        <td><strong>Falscher Wochentag:</strong></td>
                        <td>API gab keinen weekday ‚Üí <span style="color: #059669; font-weight: bold;">‚úÖ BEHOBEN</span></td>
                    </tr>
                    <tr>
                        <td><strong>Montag = 14. (falsch!):</strong></td>
                        <td>Falsche Berechnung ‚Üí <span style="color: #059669; font-weight: bold;">‚úÖ Prompt versch√§rft</span></td>
                    </tr>
                    <tr>
                        <td><strong>9 Uhr nicht erkannt:</strong></td>
                        <td>Check availability Issue ‚Üí <span style="color: #f59e0b; font-weight: bold;">‚è≥ Monitoring</span></td>
                    </tr>
                    <tr>
                        <td><strong>Reschedule failed (2x):</strong></td>
                        <td>metadata->call_id fehlte ‚Üí <span style="color: #059669; font-weight: bold;">‚úÖ BEHOBEN</span></td>
                    </tr>
                    <tr>
                        <td><strong>Cancel failed:</strong></td>
                        <td>metadata->call_id fehlte ‚Üí <span style="color: #059669; font-weight: bold;">‚úÖ BEHOBEN</span></td>
                    </tr>
                    <tr>
                        <td><strong>Verbotene Phrasen:</strong></td>
                        <td>"technisches Problem", "2025" ‚Üí <span style="color: #059669; font-weight: bold;">‚úÖ Prompt Rules</span></td>
                    </tr>
                    <tr>
                        <td><strong>Dauer 236s:</strong></td>
                        <td>Alle obigen Probleme ‚Üí <span style="color: #059669; font-weight: bold;">‚úÖ Durch Fixes behoben</span></td>
                    </tr>
                </table>
            </div>
        </div>

        <div style="padding: 50px; background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%); color: white;">
            <h2 style="margin-bottom: 30px; text-align: center; font-size: 38px;">
                üîí SAME-CALL POLICY (Neu implementiert)
            </h2>

            <div style="max-width: 1000px; margin: 0 auto; background: rgba(255,255,255,0.1); padding: 35px; border-radius: 12px;">
                <h3 style="margin-bottom: 20px; font-size: 24px;">F√ºr anonyme Anrufer:</h3>

                <div style="background: rgba(16, 185, 129, 0.2); padding: 20px; border-radius: 8px; margin: 15px 0; border: 2px solid #6ee7b7;">
                    <p style="font-size: 18px; line-height: 1.8;">
                        ‚úÖ <strong>Termin aus DIESEM Call (letzten 30 Min):</strong><br>
                        Verschieben & Stornieren ERLAUBT<br>
                        <span style="font-size: 15px; color: #d1fae5;">‚Üí Kunde hat gerade gebucht, kann sofort korrigieren</span>
                    </p>
                </div>

                <div style="background: rgba(239, 68, 68, 0.2); padding: 20px; border-radius: 8px; margin: 15px 0; border: 2px solid #fca5a5;">
                    <p style="font-size: 18px; line-height: 1.8;">
                        ‚ùå <strong>Alte Termine (>30 Min):</strong><br>
                        Verschieben & Stornieren NICHT ERLAUBT<br>
                        <span style="font-size: 15px; color: #fecaca;">‚Üí "Bitte rufen Sie direkt an" (Sicherheit!)</span>
                    </p>
                </div>

                <p style="margin-top: 25px; font-size: 16px; color: #e0e7ff; text-align: center;">
                    <strong>Sicherheitsregel:</strong> Ohne Telefonnummer-Verifikation k√∂nnen nur frisch gebuchte Termine ge√§ndert werden.
                </p>
            </div>
        </div>

        <div style="padding: 50px; background: #059669; color: white; text-align: center;">
            <h2 style="margin-bottom: 40px; font-size: 42px;">üéØ ZUSAMMENFASSUNG</h2>

            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; max-width: 1100px; margin: 0 auto;">
                <div style="background: rgba(255,255,255,0.15); padding: 30px; border-radius: 12px;">
                    <div style="font-size: 52px; margin-bottom: 15px;">6/8</div>
                    <div style="font-size: 18px;">Backend-Fixes<br>implementiert</div>
                </div>
                <div style="background: rgba(255,255,255,0.15); padding: 30px; border-radius: 12px;">
                    <div style="font-size: 52px; margin-bottom: 15px;">2</div>
                    <div style="font-size: 18px;">Dashboard-√Ñnderungen<br>n√∂tig</div>
                </div>
                <div style="background: rgba(255,255,255,0.15); padding: 30px; border-radius: 12px;">
                    <div style="font-size: 52px; margin-bottom: 15px;">10</div>
                    <div style="font-size: 18px;">Minuten<br>Deployment-Zeit</div>
                </div>
            </div>

            <div style="margin-top: 50px; padding: 35px; background: rgba(0,0,0,0.2); border-radius: 12px; max-width: 900px; margin-left: auto; margin-right: auto;">
                <h3 style="margin-bottom: 20px; font-size: 26px;">Was du jetzt tun musst:</h3>
                <ol style="text-align: left; line-height: 2.5; font-size: 19px;">
                    <li>begin_message k√ºrzen: "Guten Tag! Wie kann ich Ihnen helfen?"</li>
                    <li>General Prompt ersetzen (Copy-Button oben)</li>
                    <li>Save & Deploy im Retell Dashboard</li>
                    <li>60 Sekunden warten</li>
                    <li>Test-Call: "Wann n√§chster Termin?"</li>
                </ol>
            </div>
        </div>

        <div style="padding: 40px; text-align: center; background: #f3f4f6;">
            <p style="color: #4b5563; font-size: 15px; line-height: 1.8;">
                <strong>Analysiert:</strong> Call #841 (236s Test-Call) | <strong>Customer:</strong> Hans Schuster (ID 338)<br>
                <strong>Termine:</strong> #676 (Mo 8h) + #677 (Mo 9h) | <strong>Root Cause:</strong> metadata->call_id fehlte<br>
                <strong>Backend-Fixes:</strong> 6 implementiert | <strong>Dashboard-TODO:</strong> 2 Felder √§ndern<br>
                <strong>Datum:</strong> 2025-10-11 | <strong>Status:</strong> Backend ‚úÖ Dashboard ‚è≥ Test ‚è≥
            </p>
        </div>
    </div>

    <script>
        function copyPrompt() {
            const text = document.getElementById('finalPrompt').innerText;
            navigator.clipboard.writeText(text).then(() => {
                const btn = document.querySelector('.copy-btn');
                btn.textContent = '‚úÖ KOPIERT! Dashboard ‚Üí General Prompt ‚Üí STRG+A ‚Üí STRG+V ‚Üí Save';
                btn.style.background = '#047857';
                setTimeout(() => {
                    btn.textContent = 'üìã FINALEN PROMPT KOPIEREN';
                    btn.style.background = '#059669';
                }, 6000);
            });
        }
    </script>
</body>
</html>