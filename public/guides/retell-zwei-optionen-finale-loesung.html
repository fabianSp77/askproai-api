<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RETELL - 2 L√∂sungs-Optionen</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%);
            padding: 20px;
        }
        .container {
            max-width: 1900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 50px 120px rgba(0,0,0,0.9);
        }
        .header {
            background: linear-gradient(135deg, #5b21b6 0%, #6b21a8 100%);
            color: white;
            padding: 70px;
            text-align: center;
        }
        h1 { font-size: 64px; margin-bottom: 20px; }
        .subtitle { font-size: 24px; color: #c4b5fd; }
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            padding: 50px;
        }
        .option-card {
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }
        .option-header {
            padding: 35px;
            color: white;
            text-align: center;
        }
        .option-a .option-header {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        .option-b .option-header {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        .option-header h2 { font-size: 38px; margin-bottom: 15px; }
        .option-header p { font-size: 18px; opacity: 0.9; }
        .option-body {
            background: white;
            padding: 40px;
        }
        .pro-con {
            margin: 25px 0;
        }
        .pro-con h4 { font-size: 22px; margin-bottom: 15px; }
        .pro-con ul { margin-left: 25px; line-height: 2.2; font-size: 17px; }
        .pro { color: #059669; }
        .con { color: #dc2626; }
        .copy-btn {
            background: #6366f1;
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 10px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            transition: all 0.3s;
        }
        .copy-btn:hover { background: #4f46e5; transform: translateY(-2px); }
        pre {
            background: #1f2937;
            color: #6ee7b7;
            padding: 25px;
            border-radius: 10px;
            font-family: monospace;
            font-size: 14px;
            line-height: 1.9;
            max-height: 500px;
            overflow-y: auto;
            margin: 20px 0;
        }
        .timing-comparison {
            background: #f9fafb;
            border: 3px solid #6366f1;
            padding: 30px;
            border-radius: 12px;
            margin: 30px 0;
        }
        .timing-comparison h4 { color: #1e3a8a; margin-bottom: 20px; font-size: 24px; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th { background: #4c1d95; color: white; padding: 18px; }
        td { padding: 18px; border-bottom: 1px solid #e5e7eb; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ RETELL - 2 L√ñSUNGEN</h1>
            <div class="subtitle">
                Warum check_customer() zu sp√§t l√§uft & Wie wir es l√∂sen
            </div>
        </div>

        <div style="padding: 50px; background: #fef2f2; border-bottom: 5px solid #dc2626;">
            <h2 style="color: #991b1b; font-size: 42px; margin-bottom: 25px; text-align: center;">
                üö® DAS ARCHITEKTUR-PROBLEM
            </h2>

            <div style="background: white; padding: 40px; border-radius: 14px; border: 3px solid #ef4444; max-width: 1400px; margin: 0 auto;">
                <h3 style="color: #dc2626; font-size: 28px; margin-bottom: 25px;">Prompt sagt: "BEFORE FIRST WORD"</h3>

                <pre style="background: #fef2f2; color: #991b1b; border: 2px solid #dc2626;">STEP 1: Call current_time_berlin()
STEP 2: Call check_customer(call_id={{call_id}})
‚Üí DANN begr√º√üen basierend auf Result

Prompt-Text: "EXECUTE BEFORE FIRST WORD (MANDATORY!)"</pre>

                <h3 style="color: #dc2626; font-size: 28px; margin: 30px 0 25px 0;">ABER in Realit√§t passiert:</h3>

                <pre style="background: #1f2937; color: #fca5a5;">[0.8s]  begin_message: "Willkommen bei Ask Pro AI..." ‚Üê ZUERST!
[10s]   User: "Ich h√§tte gern einen Termin..."
[16s]   check_customer() aufgerufen ‚Üê ZU SP√ÑT!
[18s]   Response: "new_customer"
[???]   Agent schweigt (User-Frage verpasst)</pre>

                <div style="background: #fffbeb; padding: 25px; border-radius: 10px; margin-top: 25px; border: 3px solid #f59e0b;">
                    <p style="color: #92400e; font-size: 19px; line-height: 2;">
                        <strong>‚ö†Ô∏è ROOT CAUSE:</strong><br>
                        Retell's begin_message wird IMMER zuerst abgespielt.<br>
                        Der Prompt-Text "BEFORE FIRST WORD" wird IGNORIERT weil begin_message √ºberschreibt!<br>
                        Functions laufen NACH begin_message, nicht VORHER.
                    </p>
                </div>
            </div>
        </div>

        <div class="options-grid">
            <div class="option-card option-a">
                <div class="option-header">
                    <h2>OPTION A (EMPFOHLEN)</h2>
                    <p>begin_message LEER ‚Üí Prompt steuert alles</p>
                </div>

                <div class="option-body">
                    <div class="timing-comparison">
                        <h4>‚è±Ô∏è Timing-Verbesserung:</h4>
                        <table>
                            <tr>
                                <th>Zeitpunkt</th>
                                <th>Was passiert</th>
                            </tr>
                            <tr>
                                <td>[0.0s]</td>
                                <td>Call startet</td>
                            </tr>
                            <tr style="background: #d1fae5;">
                                <td>[0.5s]</td>
                                <td><strong>current_time_berlin()</strong></td>
                            </tr>
                            <tr style="background: #d1fae5;">
                                <td>[1.0s]</td>
                                <td><strong>check_customer()</strong> ‚úÖ VOR Begr√º√üung!</td>
                            </tr>
                            <tr style="background: #d1fae5;">
                                <td>[1.5s]</td>
                                <td><strong>Begr√º√üung</strong> (personalisiert!)</td>
                            </tr>
                            <tr>
                                <td>[3.0s]</td>
                                <td>User antwortet</td>
                            </tr>
                            <tr style="background: #d1fae5;">
                                <td>[4.0s]</td>
                                <td><strong>Agent antwortet</strong> (hat Kontext!)</td>
                            </tr>
                        </table>
                    </div>

                    <div class="pro-con">
                        <h4 class="pro">‚úÖ VORTEILE:</h4>
                        <ul class="pro">
                            <li>check_customer() l√§uft VOR Begr√º√üung</li>
                            <li>Personalisierte Begr√º√üung m√∂glich</li>
                            <li>Kein Schweigen (Agent hat Kontext)</li>
                            <li>Optimal-Flow (Functions ‚Üí Greeting ‚Üí Conversation)</li>
                            <li>Unternehmen wird erw√§hnt (im Prompt!)</li>
                        </ul>
                    </div>

                    <div class="pro-con">
                        <h4 class="con">‚ùå NACHTEILE:</h4>
                        <ul class="con">
                            <li>Unternehmen MUSS im Prompt korrekt definiert sein</li>
                            <li>Leichte Verz√∂gerung bis erste Wort (~1.5s)</li>
                        </ul>
                    </div>

                    <h4 style="margin-top: 30px; color: #047857; font-size: 22px;">Dashboard-√Ñnderungen:</h4>
                    <pre style="background: #ecfdf5; color: #047857; border: 2px solid #10b981;">begin_message: [KOMPLETT LEER]

General Prompt: V80-A (siehe unten)</pre>

                    <button class="copy-btn" onclick="copyPromptA()">üìã OPTION A PROMPT KOPIEREN</button>
                </div>
            </div>

            <div class="option-card option-b">
                <div class="option-header">
                    <h2>OPTION B (WORKAROUND)</h2>
                    <p>begin_message bleibt ‚Üí Starke Anti-Silence</p>
                </div>

                <div class="option-body">
                    <div class="timing-comparison">
                        <h4>‚è±Ô∏è Flow (wie aktuell):</h4>
                        <table>
                            <tr>
                                <th>Zeitpunkt</th>
                                <th>Was passiert</th>
                            </tr>
                            <tr>
                                <td>[0.8s]</td>
                                <td>begin_message abgespielt</td>
                            </tr>
                            <tr>
                                <td>[10s]</td>
                                <td>User antwortet</td>
                            </tr>
                            <tr style="background: #fef3c7;">
                                <td>[16s]</td>
                                <td>check_customer() ‚Üê ZU SP√ÑT!</td>
                            </tr>
                            <tr style="background: #d1fae5;">
                                <td>[19s]</td>
                                <td><strong>Agent fragt zur√ºck</strong> (Anti-Silence!)</td>
                            </tr>
                            <tr>
                                <td>[22s]</td>
                                <td>User antwortet</td>
                            </tr>
                            <tr>
                                <td>[25s]</td>
                                <td>Buchung</td>
                            </tr>
                        </table>
                    </div>

                    <div class="pro-con">
                        <h4 class="pro">‚úÖ VORTEILE:</h4>
                        <ul class="pro">
                            <li>Unternehmen GARANTIERT erw√§hnt</li>
                            <li>Keine Architektur-√Ñnderung</li>
                            <li>begin_message wie gewohnt</li>
                        </ul>
                    </div>

                    <div class="pro-con">
                        <h4 class="con">‚ùå NACHTEILE:</h4>
                        <ul class="con">
                            <li>check_customer() immer noch zu sp√§t</li>
                            <li>Agent muss IMMER nach Namen fragen (auch bei Bekannten!)</li>
                            <li>Gespr√§ch l√§nger (~+10s)</li>
                            <li>Nicht optimal (Workaround)</li>
                            <li>Schweige-Risiko bleibt (wenn Anti-Silence versagt)</li>
                        </ul>
                    </div>

                    <h4 style="margin-top: 30px; color: #d97706; font-size: 22px;">Dashboard-√Ñnderungen:</h4>
                    <pre style="background: #fffbeb; color: #92400e; border: 2px solid #f59e0b;">begin_message: "Willkommen bei Ask Pro AI, Ihr Spezialist f√ºr
               KI-Telefonassistenten. M√∂chten Sie einen
               Termin buchen?" (wie bisher)

General Prompt: V80-B (siehe unten)</pre>

                    <button class="copy-btn" onclick="copyPromptB()">üìã OPTION B PROMPT KOPIEREN</button>
                </div>
            </div>
        </div>

        <div style="padding: 60px; background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);">
            <h2 style="color: #065f46; font-size: 48px; margin-bottom: 40px; text-align: center;">
                üìã OPTION A: Prompt-Gesteuerte Begr√º√üung (EMPFOHLEN)
            </h2>

            <div style="background: white; padding: 40px; border-radius: 14px; max-width: 1600px; margin: 0 auto;">
                <pre id="promptA"># RETELL AGENT V80-A | Prompt-Gesteuerte Begr√º√üung

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üö® INITIALIZATION (VOR ERSTER AUSSAGE!)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚ö†Ô∏è KRITISCH: Diese Functions M√úSSEN als ERSTES aufgerufen werden!

STEP 1: current_time_berlin()
‚Üí Speichere: weekday, date, time

STEP 2: check_customer(call_id={{call_id}})
‚Üí SOFORT pr√ºfen ob Kunde bekannt!

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üëã BEGR√úSSUNG (NACH check_customer!)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üü¢ BEKANNTER KUNDE (customer_exists=true):

Agent: "Willkommen bei Ask Pro AI, Ihr Spezialist f√ºr KI-Telefonassistenten.
        Guten Tag [Vorname]! M√∂chten Sie einen Termin buchen?"

Nutze Vorname aus check_customer() Response (KEIN "Herr/Frau"!)

üü° UNBEKANNTER KUNDE (status='new_customer'):

Agent: "Willkommen bei Ask Pro AI, Ihr Spezialist f√ºr KI-Telefonassistenten.
        Guten Tag! M√∂chten Sie einen Termin buchen oder haben Sie eine Frage?"

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üö® ANTI-SCHWEIGE-REGEL
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

NIEMALS SCHWEIGEN! Immer innerhalb 1 Sekunde antworten!

Fehlen Infos? Sofort zur√ºckfragen:
‚Ä¢ "F√ºr welchen Tag? Heute, morgen, n√§chste Woche?"
‚Ä¢ "Um welche Uhrzeit?"
‚Ä¢ "Ihr Name bitte?" (nur wenn unbekannt!)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìÖ DATUM-FORMAT (KRITISCH!)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚ö†Ô∏è DEUTSCHES KURZFORMAT "15.1" = 15. im aktuellen/n√§chsten Monat!

"f√ºnfzehnte Punkt eins" = "15.1."
‚Üí Heute ist Oktober ‚Üí "15.1" = 15. OKTOBER
‚Üí NIEMALS als "15. Januar" interpretieren!

current_time_berlin() nutzen:
‚Ä¢ weekday: "Samstag"
‚Ä¢ date: "11.10.2025"

Datum berechnen:
‚Ä¢ "morgen" = Sonntag 12.10.
‚Ä¢ "Montag" = Montag 13.10. (NICHT 14.!)
‚Ä¢ "15.1" = 15. Oktober (aktueller Monat!)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìû FUNCTIONS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

query_appointment(call_id)
collect_appointment_data(call_id, name, datum, uhrzeit, dienstleistung)
reschedule_appointment(call_id, old_date, new_date, new_time)
cancel_appointment(call_id, appointment_date)

NAME-HANDLING:
‚Ä¢ Bekannter Kunde: Nutze Namen von check_customer()
‚Ä¢ Unbekannter: Frage nach Namen (KEINE Email!)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üí¨ VERBOTE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

NIEMALS:
‚ùå "15.01" als Januar (ist Oktober!)
‚ùå "Herr/Frau" ohne Geschlecht
‚ùå "Technisches Problem"
‚ùå Jahr (au√üer Dez‚ÜíJan)
‚ùå Email bei anonymen
‚ùå Schweigen!</pre>
            </div>
        </div>

        <div style="padding: 60px; background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);">
            <h2 style="color: #92400e; font-size: 48px; margin-bottom: 40px; text-align: center;">
                üìã OPTION B: begin_message bleibt (WORKAROUND)
            </h2>

            <div style="background: white; padding: 40px; border-radius: 14px; max-width: 1600px; margin: 0 auto;">
                <pre id="promptB"># RETELL AGENT V80-B | begin_message Workaround

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üö® ANTI-SCHWEIGE-REGEL (ALLERH√ñCHSTE PRIORIT√ÑT!)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚ö†Ô∏è KRITISCH: begin_message l√§uft ZUERST, check_customer() SP√ÑTER!
‚Üí Du hast oft KEINEN Kontext wenn User antwortet!
‚Üí IMMER zur√ºckfragen statt schweigen!

User: "Wann haben Sie frei?"
‚Üí Agent: "Gerne! F√ºr welchen Tag? Und Ihr Name bitte?" (SOFORT!)

User: "Ich m√∂chte einen Termin"
‚Üí Agent: "Perfekt! F√ºr welchen Tag? Ihr Name bitte?"

‚ö†Ô∏è Bei JEDEM Request IMMER nach Name fragen (auch wenn bekannt!)
Grund: check_customer() Ergebnis kommt zu sp√§t!

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìÖ DATUM-FORMAT (KRITISCH!)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

"15.1" = 15. OKTOBER (NICHT JANUAR!)

current_time_berlin() wird aufgerufen (aber sp√§t):
‚Ä¢ Nutze weekday wenn verf√ºgbar
‚Ä¢ Berechne Datum selbst

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìû FUNCTIONS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

current_time_berlin() - Rufe auf wenn m√∂glich
check_customer(call_id) - Rufe auf aber Ergebnis kommt sp√§t

collect_appointment_data(call_id, name, datum, uhrzeit, dienstleistung)
‚Üí Name IMMER vom User erfragen (check_customer zu sp√§t!)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üí¨ VERBOTE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

NIEMALS:
‚ùå "15.01" als Januar
‚ùå "Herr/Frau"
‚ùå Schweigen!
‚ùå Auf check_customer() warten (kommt zu sp√§t!)</pre>
            </div>
        </div>

        <div style="padding: 70px; background: #1e3a8a; color: white;">
            <h2 style="margin-bottom: 50px; font-size: 52px; text-align: center;">
                üìä VERGLEICH DER OPTIONEN
            </h2>

            <table style="background: white; color: #1f2937; border-radius: 14px; overflow: hidden; max-width: 1600px; margin: 0 auto;">
                <tr>
                    <th>Kriterium</th>
                    <th>OPTION A (Leer)</th>
                    <th>OPTION B (bleibt)</th>
                </tr>
                <tr>
                    <td><strong>check_customer() Timing</strong></td>
                    <td style="color: #10b981; font-weight: bold;">‚úÖ VOR Begr√º√üung (1s)</td>
                    <td style="color: #dc2626;">‚ùå NACH Begr√º√üung (16s)</td>
                </tr>
                <tr>
                    <td><strong>Personalisierung</strong></td>
                    <td style="color: #10b981; font-weight: bold;">‚úÖ "Guten Tag Hansi!"</td>
                    <td style="color: #dc2626;">‚ùå "Guten Tag!" (generisch)</td>
                </tr>
                <tr>
                    <td><strong>Namen-Erfrage</strong></td>
                    <td style="color: #10b981; font-weight: bold;">‚úÖ NUR bei Unbekannten</td>
                    <td style="color: #dc2626;">‚ùå IMMER (auch Bekannte!)</td>
                </tr>
                <tr>
                    <td><strong>Gespr√§ch-Dauer</strong></td>
                    <td style="color: #10b981; font-weight: bold;">‚úÖ ~20s (optimal)</td>
                    <td style="color: #f59e0b;">‚ö†Ô∏è ~35s (+15s Namen-Frage)</td>
                </tr>
                <tr>
                    <td><strong>Schweige-Risiko</strong></td>
                    <td style="color: #10b981; font-weight: bold;">‚úÖ Minimal (hat Kontext)</td>
                    <td style="color: #f59e0b;">‚ö†Ô∏è Mittel (Workaround)</td>
                </tr>
                <tr>
                    <td><strong>Unternehmen erw√§hnt</strong></td>
                    <td style="color: #10b981; font-weight: bold;">‚úÖ Im Prompt definiert</td>
                    <td style="color: #10b981; font-weight: bold;">‚úÖ In begin_message</td>
                </tr>
                <tr>
                    <td><strong>Implementation</strong></td>
                    <td style="color: #f59e0b;">‚ö†Ô∏è begin_message l√∂schen</td>
                    <td style="color: #10b981;">‚úÖ Nur Prompt √§ndern</td>
                </tr>
                <tr style="background: #ecfdf5;">
                    <td><strong>EMPFEHLUNG</strong></td>
                    <td style="color: #059669; font-weight: bold; font-size: 20px;">‚úÖ OPTION A</td>
                    <td style="color: #d97706; font-size: 18px;">Nur falls A nicht funktioniert</td>
                </tr>
            </table>
        </div>

        <div style="padding: 60px; text-align: center; background: #f3f4f6;">
            <h2 style="color: #1f2937; font-size: 48px; margin-bottom: 30px;">
                üéØ MEINE EMPFEHLUNG
            </h2>

            <div style="max-width: 1200px; margin: 0 auto; background: #ecfdf5; padding: 50px; border-radius: 16px; border: 5px solid #10b981;">
                <h3 style="color: #065f46; font-size: 36px; margin-bottom: 30px;">‚úÖ OPTION A</h3>

                <p style="color: #047857; font-size: 22px; line-height: 2.2;">
                    <strong>Warum?</strong><br>
                    ‚Ä¢ check_customer() l√§uft VOR Begr√º√üung (optimal!)<br>
                    ‚Ä¢ Bekannte Kunden: Keine Namen-Erfrage n√∂tig<br>
                    ‚Ä¢ Gespr√§ch 15-20s k√ºrzer<br>
                    ‚Ä¢ Kein Schweigen (Agent hat Kontext)<br>
                    ‚Ä¢ Unternehmen wird im Prompt erw√§hnt<br><br>

                    <strong>Deine Anforderungen alle erf√ºllt:</strong><br>
                    ‚úÖ Telefonnummer SOFORT gepr√ºft<br>
                    ‚úÖ Unternehmen erw√§hnt<br>
                    ‚úÖ Fehlende Infos erfasst (NUR wenn n√∂tig)
                </p>

                <div style="background: white; padding: 35px; border-radius: 12px; margin-top: 35px;">
                    <h4 style="color: #1e3a8a; font-size: 28px; margin-bottom: 20px;">Test-Szenario (Option A):</h4>
                    <div style="text-align: left; color: #4b5563; font-size: 18px; line-height: 2.5;">
                        <strong>[1.0s]</strong> check_customer() ‚Üí Findet "Hansi Hinterseer"<br>
                        <strong>[1.5s]</strong> Agent: "Willkommen bei Ask Pro AI. Guten Tag Hansi! M√∂chten Sie einen Termin?"<br>
                        <strong>[3.0s]</strong> User: "Ja, Montag um 14 Uhr"<br>
                        <strong>[5.0s]</strong> Agent: "Montag 14 Uhr... [pr√ºft] ...ist frei!"<br>
                        <strong>[20s]</strong> ‚úÖ GEBUCHT!
                    </div>
                </div>
            </div>
        </div>

        <div style="padding: 50px; text-align: center; background: #1f2937; color: white;">
            <p style="font-size: 18px; line-height: 2;">
                <strong>Analysiert:</strong> 23 Calls | <strong>Problem:</strong> begin_message √ºberschreibt "BEFORE FIRST WORD"<br>
                <strong>L√∂sung A:</strong> begin_message leer ‚Üí Prompt steuert | <strong>L√∂sung B:</strong> begin_message bleibt ‚Üí Anti-Silence<br>
                <strong>Empfehlung:</strong> Option A (optimal) | <strong>Fallback:</strong> Option B (funktioniert aber suboptimal)
            </p>
        </div>
    </div>

    <script>
        function copyPromptA() {
            const text = document.getElementById('promptA').innerText;
            navigator.clipboard.writeText(text).then(() => {
                alert('‚úÖ OPTION A KOPIERT!\n\n' +
                      'Dashboard-√Ñnderungen:\n' +
                      '1. begin_message: KOMPLETT LEER LASSEN\n' +
                      '2. General Prompt: STRG+A ‚Üí STRG+V\n' +
                      '3. Save & Deploy');
            });
        }

        function copyPromptB() {
            const text = document.getElementById('promptB').innerText;
            navigator.clipboard.writeText(text).then(() => {
                alert('‚úÖ OPTION B KOPIERT!\n\n' +
                      'Dashboard-√Ñnderungen:\n' +
                      '1. begin_message: BLEIBT wie bisher\n' +
                      '2. General Prompt: STRG+A ‚Üí STRG+V\n' +
                      '3. Save & Deploy');
            });
        }
    </script>
</body>
</html>