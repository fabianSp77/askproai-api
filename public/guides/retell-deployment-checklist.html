<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retell V77 Deployment Checklist</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        h1 {
            color: #e53e3e;
            border-bottom: 3px solid #e53e3e;
            padding-bottom: 10px;
        }
        .problem {
            background: #fff5f5;
            border-left: 4px solid #e53e3e;
            padding: 15px;
            margin: 20px 0;
        }
        .solution {
            background: #f0fff4;
            border-left: 4px solid #48bb78;
            padding: 15px;
            margin: 20px 0;
        }
        .step {
            background: #ebf8ff;
            border: 2px solid #4299e1;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        .step-number {
            background: #4299e1;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 10px;
        }
        .code {
            background: #2d3748;
            color: #68d391;
            padding: 15px;
            border-radius: 6px;
            font-family: monospace;
            overflow-x: auto;
            margin: 10px 0;
        }
        .warning {
            background: #fffaf0;
            border: 2px solid #ed8936;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        ul {
            line-height: 1.8;
        }
        .check {
            color: #48bb78;
            font-weight: bold;
        }
        .cross {
            color: #e53e3e;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üö® RETELL V77 DEPLOYMENT - FEHLERANALYSE</h1>

        <div class="problem">
            <h2>‚ùå Gefundene Probleme im Test-Call:</h2>
            <ol>
                <li><strong>V76 Prompt l√§uft noch</strong> - V77 nicht aktiviert</li>
                <li><strong>Keine Function Calls</strong> - System schweigt bei Fragen</li>
                <li><strong>User legt auf nach 34 Sekunden</strong> - Keine Reaktion</li>
            </ol>
        </div>

        <div class="solution">
            <h2>‚úÖ L√∂sung: 3-Punkte-Check im Retell Dashboard</h2>
        </div>

        <div class="step">
            <h3><span class="step-number">1</span>Prompt-Version pr√ºfen</h3>

            <p><strong>Gehe zu:</strong> Retell Dashboard ‚Üí Agent (Fabian Spitzer) ‚Üí General Prompt</p>

            <div class="warning">
                <strong>‚ö†Ô∏è Pr√ºfe die ERSTE ZEILE des Prompts:</strong>
            </div>

            <p><span class="cross">‚ùå FALSCH (V76 l√§uft noch):</span></p>
            <div class="code"># RETELL AGENT V76-ULTIMATE | Natural Speech + LLM DateTime</div>

            <p><span class="check">‚úÖ RICHTIG (V77 ist aktiv):</span></p>
            <div class="code"># RETELL AGENT V77-OPTIMIZED | Anonymous Caller Fix + Gender-Neutral</div>

            <p><strong>Falls V76:</strong></p>
            <ul>
                <li>Kopiere den V77 Prompt komplett neu</li>
                <li>Ersetze den GESAMTEN Text (nicht anh√§ngen!)</li>
                <li>Klicke "Save Changes"</li>
                <li>Warte 30 Sekunden f√ºr Aktivierung</li>
            </ul>
        </div>

        <div class="step">
            <h3><span class="step-number">2</span>Function Calls aktiviert?</h3>

            <p><strong>Gehe zu:</strong> Retell Dashboard ‚Üí Agent ‚Üí Custom Tools/Functions</p>

            <p><strong>Pr√ºfe ob folgende Functions AKTIV sind:</strong></p>
            <ul>
                <li><span class="check">‚úÖ</span> <code>current_time_berlin</code></li>
                <li><span class="check">‚úÖ</span> <code>check_customer</code></li>
                <li><span class="check">‚úÖ</span> <code>collect_appointment_data</code></li>
                <li><span class="check">‚úÖ</span> <code>query_appointment</code></li>
                <li><span class="check">‚úÖ</span> <code>reschedule_appointment</code></li>
                <li><span class="check">‚úÖ</span> <code>cancel_appointment</code></li>
            </ul>

            <div class="warning">
                <strong>‚ö†Ô∏è Wenn Functions fehlen:</strong>
                <ul>
                    <li>Sie m√ºssen neu angelegt werden</li>
                    <li>Jede Function braucht korrekte URL: <code>https://api.askproai.de/api/retell/[function-name]</code></li>
                    <li>Method: POST</li>
                    <li>Authentication: Bearer Token (falls vorhanden)</li>
                </ul>
            </div>
        </div>

        <div class="step">
            <h3><span class="step-number">3</span>Agent-Version live schalten</h3>

            <p><strong>Gehe zu:</strong> Retell Dashboard ‚Üí Agent ‚Üí Version History</p>

            <p><strong>Pr√ºfe:</strong></p>
            <ul>
                <li>Wurde eine neue Version erstellt nach Prompt-Update?</li>
                <li>Ist diese Version als "Live" markiert?</li>
                <li>Welche Version-Nummer verwendet deine Telefonnummer?</li>
            </ul>

            <div class="warning">
                <strong>‚ö†Ô∏è WICHTIG:</strong>
                <p>Nach Prompt-√Ñnderung muss oft eine neue Agent-Version deployed werden!</p>
                <p>Klicke: "Create New Version" ‚Üí "Deploy to Production"</p>
            </div>
        </div>

        <div class="step">
            <h3><span class="step-number">4</span>Test-Call Validierung</h3>

            <p><strong>Nach Aktivierung von V77:</strong></p>

            <p>Mache einen Test-Call und pr√ºfe:</p>

            <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
                <tr style="background: #4299e1; color: white;">
                    <th style="padding: 10px; text-align: left;">Test</th>
                    <th style="padding: 10px; text-align: left;">V76 (Alt)</th>
                    <th style="padding: 10px; text-align: left;">V77 (Neu)</th>
                </tr>
                <tr style="background: #f7fafc;">
                    <td style="padding: 10px;">Begr√º√üung</td>
                    <td style="padding: 10px;">"Willkommen bei Ask Pro Ey-Ei..."</td>
                    <td style="padding: 10px; background: #c6f6d5;">"Guten Tag! Mit wem spreche ich?"</td>
                </tr>
                <tr>
                    <td style="padding: 10px;">Nach Name fragen</td>
                    <td style="padding: 10px;">‚ùå Erst sp√§ter</td>
                    <td style="padding: 10px; background: #c6f6d5;">‚úÖ Sofort am Anfang</td>
                </tr>
                <tr style="background: #f7fafc;">
                    <td style="padding: 10px;">Function Calls</td>
                    <td style="padding: 10px;">‚ùå Keine ausgef√ºhrt</td>
                    <td style="padding: 10px; background: #c6f6d5;">‚úÖ check_customer() wird aufgerufen</td>
                </tr>
                <tr>
                    <td style="padding: 10px;">Reaktionszeit</td>
                    <td style="padding: 10px;">‚ùå Keine Antwort</td>
                    <td style="padding: 10px; background: #c6f6d5;">‚úÖ <3 Sekunden</td>
                </tr>
            </table>
        </div>

        <div class="problem">
            <h2>üîç Debug-Informationen vom Test-Call:</h2>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 6px; overflow-x: auto;">
Call ID: call_b60bdaffaf1506162c6878d78ec
Duration: 33.876 Sekunden
Status: abandoned (User legte auf)

Transcript:
Agent: "Willkommen bei Ask Pro Ey-Ei..." <-- ‚ùå V76 Prompt!
User: "Wann haben Sie denn den n√§chsten Termin frei?"
[KEINE ANTWORT] <-- ‚ùå Keine Function Calls!
User: *legt auf*

Function Calls: NONE (transcript_with_tools = NULL)
Analysis: call_successful = false
Outcome: abandoned
            </pre>
        </div>

        <div class="solution">
            <h2>‚úÖ N√§chste Schritte:</h2>
            <ol>
                <li>Pr√ºfe alle 3 Punkte im Retell Dashboard</li>
                <li>Stelle sicher V77 Prompt ist KOMPLETT ersetzt</li>
                <li>Pr√ºfe ob Functions konfiguriert sind</li>
                <li>Deploy neue Agent-Version</li>
                <li>Warte 30-60 Sekunden</li>
                <li>Mache neuen Test-Call</li>
                <li>Validiere Begr√º√üung beginnt mit "Guten Tag! Mit wem spreche ich?"</li>
            </ol>
        </div>

        <div class="warning">
            <h3>‚ö†Ô∏è H√§ufige Fehler:</h3>
            <ul>
                <li><strong>Prompt nur angeh√§ngt statt ersetzt</strong> ‚Üí Komplett ersetzen!</li>
                <li><strong>Neue Version nicht deployed</strong> ‚Üí "Deploy to Production" klicken</li>
                <li><strong>Functions deaktiviert</strong> ‚Üí Alle Functions aktivieren</li>
                <li><strong>Falsche Agent-Version in Phone Number</strong> ‚Üí Version-Nummer pr√ºfen</li>
            </ul>
        </div>

        <div style="background: #ebf8ff; padding: 20px; border-radius: 8px; margin-top: 30px;">
            <h3>üìû Support-Information:</h3>
            <p><strong>Wenn weiterhin Probleme:</strong></p>
            <ol>
                <li>Screenshot vom Retell Dashboard (Prompt erste Zeile)</li>
                <li>Screenshot von Functions-Liste</li>
                <li>Call-ID vom Test-Call notieren</li>
                <li>Transcript vom Test-Call exportieren</li>
            </ol>
        </div>
    </div>
</body>
</html>
