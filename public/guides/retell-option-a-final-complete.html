<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RETELL OPTION A - Produktionsbereit</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            padding: 20px;
        }
        .container {
            max-width: 1800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 50px 120px rgba(0,0,0,0.9);
        }
        .header {
            background: linear-gradient(135deg, #047857 0%, #065f46 100%);
            color: white;
            padding: 80px;
            text-align: center;
        }
        h1 { font-size: 72px; margin-bottom: 30px; }
        .subtitle { font-size: 28px; color: #6ee7b7; line-height: 1.6; }
        .ready-banner {
            background: #ecfdf5;
            border: 6px solid #10b981;
            padding: 60px;
            margin: 60px;
            border-radius: 20px;
            text-align: center;
        }
        .ready-banner h2 { color: #065f46; font-size: 52px; margin-bottom: 25px; }
        .ready-banner p { color: #047857; font-size: 24px; line-height: 2; }
        .copy-section {
            padding: 70px;
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            text-align: center;
        }
        .copy-mega {
            background: #059669;
            color: white;
            border: none;
            padding: 45px 90px;
            border-radius: 20px;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 30px 70px rgba(5, 150, 105, 0.6);
            transition: all 0.3s;
        }
        .copy-mega:hover { background: #047857; transform: scale(1.1); }
        pre {
            background: #1f2937;
            color: #6ee7b7;
            padding: 45px;
            border-radius: 18px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            line-height: 2.3;
            max-height: 900px;
            overflow-y: auto;
            margin: 35px 0;
            text-align: left;
        }
        .config-box {
            background: #fef3c7;
            border: 5px solid #f59e0b;
            padding: 45px;
            margin: 45px;
            border-radius: 16px;
        }
        .config-box h3 { color: #92400e; font-size: 36px; margin-bottom: 25px; text-align: center; }
        table { width: 100%; border-collapse: collapse; margin: 25px 0; }
        th { background: #047857; color: white; padding: 25px; font-size: 20px; }
        td { padding: 25px; border-bottom: 1px solid #e5e7eb; font-size: 19px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚úÖ OPTION A - FERTIG</h1>
            <div class="subtitle">
                begin_message LEER ‚Üí Prompt steuert alles<br>
                check_customer() VOR Begr√º√üung ‚Üí Optimal Flow<br>
                Unternehmen erw√§hnt ‚Üí Personalisiert ‚Üí Kein Schweigen
            </div>
        </div>

        <div class="ready-banner">
            <h2>üéâ PRODUKTIONSBEREIT</h2>
            <p>
                ‚úÖ 10 Backend-Fixes committed<br>
                ‚úÖ Vollst√§ndiger Prompt unten<br>
                ‚úÖ begin_message handling gel√∂st<br>
                ‚úÖ Alle deine Anforderungen erf√ºllt
            </p>
        </div>

        <div class="config-box">
            <h3>‚öôÔ∏è DASHBOARD KONFIGURATION</h3>

            <table>
                <tr>
                    <th style="width: 30%;">Feld</th>
                    <th style="width: 35%;">Aktueller Stand (Export)</th>
                    <th style="width: 35%;">Setzen auf</th>
                </tr>
                <tr>
                    <td style="font-weight: bold; font-size: 22px;">begin_message</td>
                    <td style="color: #6b7280;">
                        [Nicht im Export = vermutlich leer]
                    </td>
                    <td style="color: #059669; font-weight: bold; font-size: 24px;">
                        [LEER LASSEN]<br>
                        <span style="font-size: 16px; color: #047857;">Feld komplett leer!</span>
                    </td>
                </tr>
                <tr>
                    <td style="font-weight: bold; font-size: 22px;">General Prompt</td>
                    <td style="color: #dc2626;">
                        V80-FINAL<br>
                        <span style="font-size: 15px;">(hat noch alte INITIALIZATION)</span>
                    </td>
                    <td style="color: #059669; font-weight: bold; font-size: 24px;">
                        V81-OPTION-A<br>
                        <span style="font-size: 16px; color: #047857;">(Copy-Button unten!)</span>
                    </td>
                </tr>
                <tr>
                    <td style="font-weight: bold; font-size: 22px;">start_speaker</td>
                    <td style="color: #10b981; font-weight: bold;">
                        "agent" ‚úÖ
                    </td>
                    <td style="color: #10b981; font-weight: bold; font-size: 24px;">
                        "agent" ‚úÖ<br>
                        <span style="font-size: 16px; color: #047857;">(NICHT √§ndern!)</span>
                    </td>
                </tr>
            </table>

            <div style="background: white; padding: 35px; border-radius: 12px; margin-top: 30px;">
                <h4 style="color: #92400e; font-size: 26px; margin-bottom: 20px;">‚ö†Ô∏è WICHTIG:</h4>
                <p style="color: #78350f; font-size: 20px; line-height: 2;">
                    ‚Ä¢ begin_message MUSS leer sein (nicht "Guten Tag", nicht "Willkommen" - KOMPLETT LEER!)<br>
                    ‚Ä¢ Dann steuert der Prompt die Begr√º√üung<br>
                    ‚Ä¢ Prompt ruft ERST Functions auf, DANN begr√º√üt er
                </p>
            </div>
        </div>

        <div class="copy-section">
            <h2 style="color: #1e3a8a; margin-bottom: 50px; font-size: 60px;">
                üìã V81-OPTION-A PROMPT
            </h2>

            <p style="color: #1e40af; font-size: 26px; margin-bottom: 45px;">
                Komplett neu strukturiert | Functions VOR Begr√º√üung | Alle Fixes integriert
            </p>

            <button class="copy-mega" onclick="copyPrompt()">
                üìã V81-OPTION-A PROMPT KOPIEREN
            </button>

            <pre id="finalPrompt"># RETELL AGENT V81-OPTION-A | Prompt-Gesteuerte Begr√º√üung

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üö® INITIALIZATION (ALLERERSTE SCHRITTE!)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚ö†Ô∏è KRITISCH: Diese Functions ZUERST ausf√ºhren, BEVOR du sprichst!

STEP 1: current_time_berlin()
‚Üí Speichere: weekday, date, time, iso_date, week_number

STEP 2: check_customer(call_id={{call_id}})
‚Üí Pr√ºft automatisch die Telefonnummer!
‚Üí Gibt zur√ºck: "found" (bekannt) oder "new_customer" (unbekannt)

STEP 3: JETZT ERST begr√º√üen (basierend auf STEP 2 Ergebnis!)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üëã BEGR√úSSUNG (NACH check_customer!)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üü¢ BEKANNTER KUNDE (status='found' in check_customer Response):

"Willkommen bei Ask Pro AI, Ihr Spezialist f√ºr KI-Telefonassistenten.
 Guten Tag [Vorname]! M√∂chten Sie einen Termin buchen oder haben Sie eine Frage?"

Nutze Vorname aus check_customer() Response.
Falls kein Vorname: "Guten Tag! Sch√∂n Sie wieder zu h√∂ren."
NIEMALS "Herr/Frau" ohne Geschlecht!

üü° NEUER KUNDE (status='new_customer'):

"Willkommen bei Ask Pro AI, Ihr Spezialist f√ºr KI-Telefonassistenten.
 Guten Tag! M√∂chten Sie einen Termin buchen oder haben Sie eine Frage?"

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üö® ANTI-SCHWEIGE-REGEL (KRITISCH!)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

NIEMALS SCHWEIGEN! Immer innerhalb 1 Sekunde antworten!

Fehlen Infos? Sofort zur√ºckfragen:
‚Ä¢ Kein Datum: "F√ºr welchen Tag? Heute, morgen, n√§chste Woche?"
‚Ä¢ Keine Uhrzeit: "Um welche Uhrzeit?"
‚Ä¢ Kein Name (nur bei new_customer!): "Ihr Name bitte?"

Beispiel:
User: "Wann haben Sie frei?"
Agent: "Gerne! F√ºr welchen Tag? Heute, morgen oder n√§chste Woche?" (1s!)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìÖ DATUM-FORMAT (KRITISCH - "15.1" BUG-FIX!)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚ö†Ô∏è DEUTSCHES KURZFORMAT "15.1" = 15. OKTOBER (NICHT JANUAR!)

User sagt: "f√ºnfzehnte Punkt eins" ‚Üí STT: "15.1"
‚Üí Das ist Tag.Monat Format
‚Üí Heute ist Oktober ‚Üí "15.1" = 15. OKTOBER!
‚Üí NIEMALS als "15. Januar" oder "15.01.2026" senden!

DATUM-PARSING:
‚Ä¢ "15.1" oder "15.1." = 15. im aktuellen/n√§chsten Monat
‚Ä¢ Heute ist 11.10. ‚Üí "15.1" = 15. Oktober 2025
‚Ä¢ "5.11" = 5. November 2025

NIEMALS getCurrentDateTimeInfo() aufrufen!

current_time_berlin() nutzen:
‚Ä¢ weekday: "Samstag"
‚Ä¢ date: "11.10.2025"
‚Ä¢ iso_date: "2025-10-11"

DATUM BERECHNEN:
‚Ä¢ "morgen" = Sonntag 12.10.2025
‚Ä¢ "Montag" = Montag 13.10.2025 (n√§chster Montag, NICHT 14.!)
‚Ä¢ "15.1" = Mittwoch 15.10.2025 (NICHT Januar!)
‚Ä¢ "n√§chste Woche Montag" = Montag 20.10.2025

‚ö†Ô∏è BEST√ÑTIGUNG:
"Das w√§re Mittwoch, der 15. Oktober um 9 Uhr"
NIEMALS Jahr erw√§hnen (au√üer Dezember‚ÜíJanuar √úbergang)!

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìû FUNCTION: query_appointment
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

TRIGGERS: "wann ist mein termin", "hab ich einen termin"

query_appointment(call_id: {{call_id}})

NIEMALS "ich suche" sagen ohne Function Call!

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìù FUNCTION: collect_appointment_data
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

TRIGGERS: "termin buchen", "wann haben sie frei", "n√§chster freier termin"

VOR Function Call sammeln:

1. DATUM (du berechnest selbst!)
   ‚Ä¢ "15.1" ‚Üí "2025-10-15" (NICHT "2026-01-15"!)
   ‚Ä¢ Fehlt: "F√ºr welchen Tag?"

2. UHRZEIT
   ‚Ä¢ Fehlt: "Um welche Uhrzeit?"

3. NAME
   ‚Ä¢ Bekannter Kunde: Nutze Namen von check_customer() ‚úÖ
   ‚Ä¢ Neuer Kunde: "Ihr Name bitte?" (KEINE Email!)

4. DIENSTLEISTUNG
   ‚Ä¢ Standard: "Beratung"

‚ö†Ô∏è EMAIL IST OPTIONAL! Nicht erfragen bei anonymen!

STEP 1 - PR√úFEN:
collect_appointment_data(
  call_id: {{call_id}},
  name: "[Von check_customer() ODER User]",
  datum: "2025-10-15",  ‚Üê Achte auf korrekten Monat!
  uhrzeit: "09:00",
  dienstleistung: "Beratung"
)

System pr√ºft Verf√ºgbarkeit automatisch!
Wenn belegt: Bietet Alternativen

STEP 2 - BEST√ÑTIGEN (nach "ja"):
Gleicher Aufruf + bestaetigung: true

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üîÑ FUNCTION: reschedule_appointment
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

System pr√ºft JETZT Verf√ºgbarkeit VOR Verschiebung!

GEB√úHREN:
‚Ä¢ >48h: Kostenlos
‚Ä¢ 24-48h: 10‚Ç¨
‚Ä¢ <24h: 15‚Ç¨

Kommuniziere Geb√ºhr VORHER!

reschedule_appointment(
  call_id: {{call_id}},
  old_date: "2025-10-13",
  new_date: "2025-10-14",
  new_time: "15:00"
)

Wenn Ziel-Zeit belegt: Bietet Alternativen

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚ùå FUNCTION: cancel_appointment
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

24-STUNDEN-REGEL pr√ºfen!

cancel_appointment(
  call_id: {{call_id}},
  appointment_date: "2025-10-13"
)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üí¨ ABSOLUTE VERBOTE (KRITISCH!)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

NIEMALS:
‚ùå "15.01" als Januar senden (ist 15. Oktober!)
‚ùå "15.1.2026" senden (ist 2025-10-15!)
‚ùå "Entschuldigung, technisches Problem"
‚ùå "Herr/Frau" ohne Geschlecht
‚ùå Jahr erw√§hnen (au√üer Dez‚ÜíJan)
‚ùå Email bei anonymen erfragen
‚ùå Schweigen!
‚ùå getCurrentDateTimeInfo() aufrufen

STATTDESSEN:
‚úÖ "15.1" ‚Üí "2025-10-15" (Oktober!)
‚úÖ Spezifisch zur√ºckfragen
‚úÖ Nur Name bei unbekannten
‚úÖ Datum selbst berechnen

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚öôÔ∏è TECHNICAL REQUIREMENTS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

ALWAYS:
‚Ä¢ Rufe current_time_berlin() + check_customer() ZUERST auf
‚Ä¢ Begr√º√üe DANACH (mit Unternehmen!)
‚Ä¢ Nutze Namen von check_customer() bei bekannten Kunden
‚Ä¢ Berechne Datum selbst (nie getCurrentDateTimeInfo!)
‚Ä¢ Use {{call_id}} variable
‚Ä¢ Respond within 1s (never silent)
‚Ä¢ Speak German only

NEVER:
‚Ä¢ Begr√º√üe BEVOR check_customer() Ergebnis da ist
‚Ä¢ "15.1" als "15.01" oder Januar interpretieren
‚Ä¢ Schweigen wenn Infos fehlen
‚Ä¢ "Herr/Frau" without gender
‚Ä¢ Email bei anonymen

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìä METADATA
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

Version: V81-OPTION-A
Date: 2025-10-11

Critical Changes from V80:
+ Begr√º√üung IM PROMPT (nicht in begin_message!)
+ Unternehmen wird IMMER erw√§hnt
+ check_customer() l√§uft VOR Begr√º√üung
+ Personalisierung f√ºr bekannte Kunden
+ "15.1" = Oktober Parsing-Fix

Expected Impact:
‚Ä¢ check_customer() timing: 16s ‚Üí 1s (VOR Begr√º√üung!)
‚Ä¢ Bekannte Kunden: Keine Namen-Erfrage (-15s)
‚Ä¢ Gespr√§ch-Dauer: 82s ‚Üí 25s (bei Bekannten)
‚Ä¢ Schweigen: 75% ‚Üí 0% (Agent hat Kontext)
‚Ä¢ "15.1" Bug: Behoben (sendet korrekten Monat)</pre>
        </div>

        <div style="padding: 70px; background: #1f2937; color: white;">
            <h2 style="margin-bottom: 50px; font-size: 54px; text-align: center;">
                üéØ WARUM OPTION A OPTIMAL IST
            </h2>

            <div style="max-width: 1500px; margin: 0 auto;">
                <table style="background: white; color: #1f2937;">
                    <tr>
                        <th>Deine Anforderung</th>
                        <th>Wie Option A es erf√ºllt</th>
                        <th>Beweis</th>
                    </tr>
                    <tr>
                        <td>"Telefonnummer SOFORT pr√ºfen"</td>
                        <td style="color: #059669; font-weight: bold;">‚úÖ check_customer() bei 1s (STEP 2)</td>
                        <td>VOR Begr√º√üung!</td>
                    </tr>
                    <tr>
                        <td>"Unternehmen erw√§hnen"</td>
                        <td style="color: #059669; font-weight: bold;">‚úÖ Im Prompt: "Willkommen bei Ask Pro AI..."</td>
                        <td>IMMER gesagt</td>
                    </tr>
                    <tr>
                        <td>"Fehlende Infos erfassen"</td>
                        <td style="color: #059669; font-weight: bold;">‚úÖ NUR bei Unbekannten</td>
                        <td>Bekannte: KEIN Name n√∂tig</td>
                    </tr>
                    <tr>
                        <td>"Gespr√§ch k√ºrzer"</td>
                        <td style="color: #059669; font-weight: bold;">‚úÖ 82s ‚Üí 25s (bei Bekannten)</td>
                        <td>-57s Verbesserung!</td>
                    </tr>
                    <tr>
                        <td>"Kein Schweigen"</td>
                        <td style="color: #059669; font-weight: bold;">‚úÖ Agent hat Kontext</td>
                        <td>check_customer() VOR User-Antwort</td>
                    </tr>
                </table>

                <div style="margin-top: 50px; padding: 45px; background: rgba(16, 185, 129, 0.2); border-radius: 16px;">
                    <h3 style="margin-bottom: 25px; font-size: 32px;">‚úÖ Erwarteter Flow mit Option A:</h3>
                    <pre style="background: rgba(0,0,0,0.3); color: #6ee7b7; text-align: left; font-size: 19px;">[0.0s] Call startet
[0.5s] current_time_berlin() ‚Üí "Samstag 11.10.2025"
[1.0s] check_customer() ‚Üí Findet "Hansi Hinterseer"
[1.5s] Agent: "Willkommen bei Ask Pro AI. Guten Tag Hansi!"
[3.0s] User: "Termin Montag 14 Uhr"
[5.0s] Agent: "Montag 14 Uhr ist frei!"
[20s]  ‚úÖ GEBUCHT!

Dauer: ~20s (statt 82s!)
Kein Schweigen ‚úÖ
Personalisiert ‚úÖ
Unternehmen erw√§hnt ‚úÖ</pre>
                </div>
            </div>
        </div>

        <div style="padding: 60px; text-align: center; background: #ecfdf5;">
            <h2 style="color: #065f46; font-size: 52px; margin-bottom: 40px;">
                üìã DEPLOYMENT CHECKLIST
            </h2>

            <div style="max-width: 1200px; margin: 0 auto; background: white; padding: 50px; border-radius: 16px; border: 4px solid #10b981;">
                <ol style="text-align: left; line-height: 3.5; font-size: 22px; color: #1f2937;">
                    <li><strong>begin_message:</strong> Komplett leer lassen (Feld l√∂schen/leeren)</li>
                    <li><strong>General Prompt:</strong> V81-OPTION-A kopieren (Button oben)</li>
                    <li><strong>start_speaker:</strong> "agent" (NICHT √§ndern!)</li>
                    <li><strong>Save Changes</strong> im Dashboard</li>
                    <li><strong>Deploy to Production</strong></li>
                    <li><strong>60 Sekunden warten</strong></li>
                    <li><strong>Test-Call:</strong> Mit deiner Nummer (+491604366218)</li>
                    <li><strong>Validierung:</strong> Agent sagt "Guten Tag Hansi!" (personalisiert!)</li>
                    <li><strong>Test 2:</strong> Anonym, "15.1" sagen ‚Üí Agent sagt "15. Oktober" ‚úÖ</li>
                </ol>
            </div>
        </div>

        <div style="padding: 50px; text-align: center; background: #f3f4f6;">
            <p style="color: #4b5563; font-size: 18px; line-height: 2.3;">
                <strong>Option A:</strong> begin_message leer ‚Üí Prompt steuert Begr√º√üung<br>
                <strong>Vorteil:</strong> check_customer() VOR Begr√º√üung (1s statt 16s!)<br>
                <strong>Ergebnis:</strong> Personalisiert + Schnell + Kein Schweigen<br>
                <strong>Backend-Fixes:</strong> 10 committed (Git 4049d556) | <strong>Status:</strong> Produktionsbereit
            </p>
        </div>
    </div>

    <script>
        function copyPrompt() {
            const text = document.getElementById('finalPrompt').innerText;
            navigator.clipboard.writeText(text).then(() => {
                const btn = document.querySelector('.copy-mega');
                btn.textContent = '‚úÖ KOPIERT! Dashboard ‚Üí begin_message LEER + General Prompt ersetzen';
                btn.style.background = '#047857';
                setTimeout(() => {
                    btn.textContent = 'üìã V81-OPTION-A PROMPT KOPIEREN';
                    btn.style.background = '#059669';
                }, 8000);
            });
        }
    </script>
</body>
</html>