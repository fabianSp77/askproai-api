<!DOCTYPE html>
<html lang="de" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Appointment Booking V3 - Mit Mitarbeiter-Pr√§ferenz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        .employee-card { transition: all 0.15s ease; }
        .employee-card:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(59, 130, 246, 0.3); }
        .employee-card.selected {
            background: linear-gradient(135deg, rgb(59 130 246), rgb(37 99 235));
            border-color: rgb(29 78 216);
            box-shadow: 0 8px 16px rgba(59, 130, 246, 0.4);
        }
        .slot-button { transition: all 0.15s ease; }
        .slot-button:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3); }
        .slot-button.selected {
            background: linear-gradient(135deg, rgb(59 130 246), rgb(37 99 235));
            color: white;
            font-weight: 700;
            border-color: rgb(29 78 216);
            box-shadow: 0 8px 16px -4px rgba(59, 130, 246, 0.4);
        }
        .time-morning { background: linear-gradient(90deg, rgba(251, 191, 36, 0.03), transparent); }
        .time-noon { background: linear-gradient(90deg, rgba(59, 130, 246, 0.03), transparent); }
        .time-evening { background: linear-gradient(90deg, rgba(139, 92, 246, 0.03), transparent); }
        .calendar-grid {
            display: grid;
            grid-template-columns: 70px repeat(7, 1fr);
            gap: 1px;
            background: rgb(55, 65, 81);
        }
        .day-column { background: rgb(31, 41, 55); }
        .time-label { position: sticky; left: 0; background: rgb(31, 41, 55); z-index: 10; }
    </style>
</head>
<body class="bg-gray-900 text-white" x-data="{
    step: 1,
    company: 'Hauptfiliale Berlin',
    employeePreference: 'any',  // 'any' oder spezifischer Mitarbeiter
    selectedEmployee: null,
    selectedSlot: null,
    selectedSlotTime: '',
    selectedSlotDay: '',
    service: null,
    customerType: null,
    customerName: '',

    selectEmployee(employee) {
        this.selectedEmployee = employee;
        this.employeePreference = employee.name;
        // Kalender w√ºrde jetzt nur Slots f√ºr diesen Mitarbeiter zeigen
    },

    selectSlot(datetime, dayLabel, timeLabel, employeeName) {
        this.selectedSlot = datetime;
        this.selectedSlotDay = dayLabel;
        this.selectedSlotTime = timeLabel;
        // Wenn kein spezifischer Mitarbeiter gew√§hlt, aus Slot √ºbernehmen
        if (!this.selectedEmployee) {
            this.selectedEmployee = { name: employeeName || 'N√§chster verf√ºgbarer' };
        }
        this.step = 2;
    },

    selectService(serviceName) {
        this.service = serviceName;
    },

    resetEmployeePreference() {
        this.employeePreference = 'any';
        this.selectedEmployee = null;
    }
}">
    <div class="max-w-[1600px] mx-auto p-4 md:p-6">

        <!-- STEP 1: MITARBEITER-AUSWAHL + KALENDER -->
        <div x-show="step === 1">
            <!-- Header -->
            <div class="mb-6 flex items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold mb-2">üìÖ Termin buchen</h1>
                    <p class="text-gray-400">W√§hle optional einen Mitarbeiter oder Zeit</p>
                </div>
                <div class="flex items-center gap-3 bg-gray-800 px-4 py-3 rounded-lg border border-gray-700">
                    <span class="text-sm text-gray-400">Filiale:</span>
                    <select x-model="company" class="bg-gray-700 border border-gray-600 rounded px-3 py-1 text-sm focus:border-blue-500 focus:outline-none">
                        <option>Hauptfiliale Berlin</option>
                        <option>Zweigstelle M√ºnchen</option>
                        <option>Filiale Hamburg</option>
                    </select>
                </div>
            </div>

            <!-- ===== MITARBEITER-AUSWAHL (OPTIONAL, PROMINENT) ===== -->
            <div class="mb-6 bg-gray-800 rounded-lg p-6 border-2 border-blue-500/30">
                <div class="flex items-center justify-between mb-4">
                    <div>
                        <h2 class="text-xl font-bold">üë§ Mitarbeiter-Pr√§ferenz</h2>
                        <p class="text-sm text-gray-400">Optional: W√§hle einen bestimmten Stylisten</p>
                    </div>
                    <button
                        x-show="employeePreference !== 'any'"
                        @click="resetEmployeePreference()"
                        class="text-sm text-blue-400 hover:text-blue-300 underline">
                        ‚úï Auswahl l√∂schen
                    </button>
                </div>

                <div class="grid grid-cols-2 md:grid-cols-5 gap-3">
                    <!-- "Egal" Option -->
                    <button
                        @click="resetEmployeePreference()"
                        :class="employeePreference === 'any' ? 'selected' : 'bg-gray-700 hover:bg-gray-600'"
                        class="employee-card p-4 rounded-lg border-2 transition text-center border-gray-600">
                        <div class="text-4xl mb-2">‚≠ê</div>
                        <div class="font-bold">Egal</div>
                        <div class="text-xs text-gray-400 mt-1">N√§chster verf√ºgbar</div>
                        <div class="text-xs text-green-400 mt-2" x-show="employeePreference === 'any'">‚úì Mehr Slots</div>
                    </button>

                    <!-- Anna Schmidt -->
                    <button
                        @click="selectEmployee({ name: 'Anna Schmidt', rating: 4.9, appointments: 250, avatar: 'üë©' })"
                        :class="employeePreference === 'Anna Schmidt' ? 'selected' : 'bg-gray-700 hover:bg-gray-600'"
                        class="employee-card p-4 rounded-lg border-2 transition text-center border-gray-600">
                        <div class="text-4xl mb-2">üë©</div>
                        <div class="font-bold">Anna</div>
                        <div class="text-xs text-gray-400">Senior Stylistin</div>
                        <div class="text-xs text-yellow-400 mt-1">‚≠ê 4.9 ‚Ä¢ 250+ Termine</div>
                    </button>

                    <!-- Max M√ºller -->
                    <button
                        @click="selectEmployee({ name: 'Max M√ºller', rating: 4.8, appointments: 180, avatar: 'üë®' })"
                        :class="employeePreference === 'Max M√ºller' ? 'selected' : 'bg-gray-700 hover:bg-gray-600'"
                        class="employee-card p-4 rounded-lg border-2 transition text-center border-gray-600">
                        <div class="text-4xl mb-2">üë®</div>
                        <div class="font-bold">Max</div>
                        <div class="text-xs text-gray-400">Friseurmeister</div>
                        <div class="text-xs text-yellow-400 mt-1">‚≠ê 4.8 ‚Ä¢ 180+ Termine</div>
                    </button>

                    <!-- Lisa Wagner -->
                    <button
                        @click="selectEmployee({ name: 'Lisa Wagner', rating: 5.0, appointments: 320, avatar: 'üë©' })"
                        :class="employeePreference === 'Lisa Wagner' ? 'selected' : 'bg-gray-700 hover:bg-gray-600'"
                        class="employee-card p-4 rounded-lg border-2 transition text-center border-gray-600">
                        <div class="text-4xl mb-2">üë©</div>
                        <div class="font-bold">Lisa</div>
                        <div class="text-xs text-gray-400">Coloristin</div>
                        <div class="text-xs text-yellow-400 mt-1">‚≠ê 5.0 ‚Ä¢ 320+ Termine</div>
                    </button>

                    <!-- Tom Klein -->
                    <button
                        @click="selectEmployee({ name: 'Tom Klein', rating: 4.7, appointments: 150, avatar: 'üë®' })"
                        :class="employeePreference === 'Tom Klein' ? 'selected' : 'bg-gray-700 hover:bg-gray-600'"
                        class="employee-card p-4 rounded-lg border-2 transition text-center border-gray-600">
                        <div class="text-4xl mb-2">üë®</div>
                        <div class="font-bold">Tom</div>
                        <div class="text-xs text-gray-400">Barber</div>
                        <div class="text-xs text-yellow-400 mt-1">‚≠ê 4.7 ‚Ä¢ 150+ Termine</div>
                    </button>
                </div>

                <!-- Info-Box -->
                <div class="mt-4 p-3 bg-blue-900/20 border border-blue-700 rounded-lg text-sm">
                    <span x-show="employeePreference === 'any'">
                        üí° <strong>Tipp:</strong> Wenn du keinen bestimmten Mitarbeiter w√§hlst, siehst du alle verf√ºgbaren Zeitslots.
                    </span>
                    <span x-show="employeePreference !== 'any'">
                        ‚úÖ <strong>Gew√§hlt:</strong> <span x-text="employeePreference"></span> - Kalender zeigt nur deren Verf√ºgbarkeit.
                    </span>
                </div>
            </div>

            <!-- Week Navigation -->
            <div class="flex items-center justify-between mb-4 bg-gray-800 p-4 rounded-lg border border-gray-700">
                <button class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition">‚Üê Vorherige</button>
                <div class="text-lg font-semibold">14. - 20. Oktober 2025</div>
                <button class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition">N√§chste ‚Üí</button>
            </div>

            <!-- ===== KALENDER GRID ===== -->
            <div class="calendar-grid rounded-lg overflow-hidden border border-gray-700 shadow-2xl">
                <!-- Header Row -->
                <div class="time-label p-2 text-xs text-gray-500 font-semibold">ZEIT</div>
                <div class="day-column p-3 text-center font-semibold border-b-2 border-gray-600">
                    <div class="text-sm text-gray-400">Mo</div><div class="text-lg">14.10.</div>
                </div>
                <div class="day-column p-3 text-center font-semibold border-b-2 border-gray-600">
                    <div class="text-sm text-gray-400">Di</div><div class="text-lg">15.10.</div>
                </div>
                <div class="day-column p-3 text-center font-semibold border-b-2 border-gray-600">
                    <div class="text-sm text-gray-400">Mi</div><div class="text-lg">16.10.</div>
                </div>
                <div class="day-column p-3 text-center font-semibold border-b-2 border-gray-600">
                    <div class="text-sm text-gray-400">Do</div><div class="text-lg">17.10.</div>
                </div>
                <div class="day-column p-3 text-center font-semibold border-b-2 border-gray-600">
                    <div class="text-sm text-gray-400">Fr</div><div class="text-lg">18.10.</div>
                </div>
                <div class="day-column p-3 text-center font-semibold border-b-2 border-gray-600">
                    <div class="text-sm text-gray-400">Sa</div><div class="text-lg">19.10.</div>
                </div>
                <div class="day-column p-3 text-center font-semibold border-b-2 border-gray-600">
                    <div class="text-sm text-gray-400">So</div><div class="text-lg">20.10.</div>
                </div>

                <!-- 08:00 -->
                <div class="time-label time-morning px-2 py-3 flex items-center text-xs text-gray-400 font-medium">08:00</div>
                <div class="day-column time-morning p-1.5">
                    <button @click="selectSlot('2025-10-14T08:00', 'Mo 14.10.', '08:00', 'Anna')" class="slot-button w-full py-2 text-xs bg-white text-gray-900 rounded border-2 border-gray-300 hover:border-blue-400">
                        08:00<br><span class="text-[10px] text-gray-600" x-show="employeePreference === 'any'">Anna</span>
                    </button>
                </div>
                <div class="day-column time-morning p-1.5">
                    <button @click="selectSlot('2025-10-15T08:00', 'Di 15.10.', '08:00', 'Max')" class="slot-button w-full py-2 text-xs bg-white text-gray-900 rounded border-2 border-gray-300 hover:border-blue-400">
                        08:00<br><span class="text-[10px] text-gray-600" x-show="employeePreference === 'any'">Max</span>
                    </button>
                </div>
                <div class="day-column time-morning p-1.5"></div>
                <div class="day-column time-morning p-1.5">
                    <button @click="selectSlot('2025-10-17T08:00', 'Do 17.10.', '08:00', 'Lisa')" class="slot-button w-full py-2 text-xs bg-white text-gray-900 rounded border-2 border-gray-300 hover:border-blue-400">
                        08:00<br><span class="text-[10px] text-gray-600" x-show="employeePreference === 'any'">Lisa</span>
                    </button>
                </div>
                <div class="day-column time-morning p-1.5"></div>
                <div class="day-column time-morning p-1.5"></div>
                <div class="day-column time-morning p-1.5"></div>

                <!-- 09:00 -->
                <div class="time-label time-morning px-2 py-3 flex items-center text-xs text-gray-400 font-medium">09:00</div>
                <div class="day-column time-morning p-1.5">
                    <button @click="selectSlot('2025-10-14T09:00', 'Mo 14.10.', '09:00', 'Max')" class="slot-button w-full py-2 text-xs bg-white text-gray-900 rounded border-2 border-gray-300 hover:border-blue-400">
                        09:00<br><span class="text-[10px] text-gray-600" x-show="employeePreference === 'any'">Max</span>
                    </button>
                </div>
                <div class="day-column time-morning p-1.5"></div>
                <div class="day-column time-morning p-1.5">
                    <button @click="selectSlot('2025-10-16T09:00', 'Mi 16.10.', '09:00', 'Tom')" class="slot-button w-full py-2 text-xs bg-white text-gray-900 rounded border-2 border-gray-300 hover:border-blue-400">
                        09:00<br><span class="text-[10px] text-gray-600" x-show="employeePreference === 'any'">Tom</span>
                    </button>
                </div>
                <div class="day-column time-morning p-1.5"></div>
                <div class="day-column time-morning p-1.5">
                    <button @click="selectSlot('2025-10-18T09:00', 'Fr 18.10.', '09:00', 'Anna')" class="slot-button w-full py-2 text-xs bg-white text-gray-900 rounded border-2 border-gray-300 hover:border-blue-400">
                        09:00<br><span class="text-[10px] text-gray-600" x-show="employeePreference === 'any'">Anna</span>
                    </button>
                </div>
                <div class="day-column time-morning p-1.5"></div>
                <div class="day-column time-morning p-1.5"></div>

                <!-- 14:00 -->
                <div class="time-label time-noon px-2 py-3 flex items-center text-xs text-gray-400 font-medium">14:00</div>
                <div class="day-column time-noon p-1.5">
                    <button @click="selectSlot('2025-10-14T14:00', 'Mo 14.10.', '14:00', 'Lisa')" class="slot-button w-full py-2 text-xs bg-white text-gray-900 rounded border-2 border-gray-300 hover:border-blue-400">
                        14:00<br><span class="text-[10px] text-gray-600" x-show="employeePreference === 'any'">Lisa</span>
                    </button>
                </div>
                <div class="day-column time-noon p-1.5">
                    <button @click="selectSlot('2025-10-15T14:00', 'Di 15.10.', '14:00', 'Anna')" class="slot-button w-full py-2 text-xs bg-white text-gray-900 rounded border-2 border-gray-300 hover:border-blue-400">
                        14:00<br><span class="text-[10px] text-gray-600" x-show="employeePreference === 'any'">Anna</span>
                    </button>
                </div>
                <div class="day-column time-noon p-1.5"></div>
                <div class="day-column time-noon p-1.5"></div>
                <div class="day-column time-noon p-1.5"></div>
                <div class="day-column time-noon p-1.5"></div>
                <div class="day-column time-noon p-1.5"></div>
            </div>

            <div class="mt-6 p-4 bg-blue-900/20 border border-blue-700 rounded-lg">
                <p class="text-sm text-blue-300">
                    üí° <strong>Wie es funktioniert:</strong>
                    <span x-show="employeePreference === 'any'">Du siehst alle verf√ºgbaren Slots. Nach der Auswahl wird der beste verf√ºgbare Mitarbeiter zugewiesen.</span>
                    <span x-show="employeePreference !== 'any'">Kalender zeigt nur Slots von <strong x-text="employeePreference"></strong>. Du kannst jederzeit auf "Egal" zur√ºckwechseln um alle Slots zu sehen.</span>
                </p>
            </div>
        </div>

        <!-- STEP 2: SERVICE + CUSTOMER -->
        <div x-show="step === 2">
            <div class="max-w-4xl mx-auto">
                <!-- Selected Slot + Employee Banner -->
                <div class="mb-8 p-6 bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg shadow-lg">
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="text-sm text-blue-200 mb-1">Ausgew√§hlter Termin:</div>
                            <div class="text-3xl font-bold" x-text="selectedSlotDay + ' um ' + selectedSlotTime + ' Uhr'"></div>
                            <div class="text-lg text-blue-100 mt-2 flex items-center gap-2">
                                <span x-text="selectedEmployee?.avatar || 'üë§'"></span>
                                <span>mit <strong x-text="selectedEmployee?.name || 'Mitarbeiter'"></strong></span>
                            </div>
                            <div class="text-sm text-blue-200 mt-1" x-text="company"></div>
                        </div>
                        <button @click="step = 1" class="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm transition">
                            ‚úèÔ∏è √Ñndern
                        </button>
                    </div>
                </div>

                <!-- Service Selection -->
                <div class="mb-8 bg-gray-800 rounded-lg p-6 border border-gray-700">
                    <h2 class="text-2xl font-bold mb-4">Welcher Service?</h2>
                    <div class="grid grid-cols-3 gap-4">
                        <button @click="selectService('Haarschnitt')"
                                :class="service === 'Haarschnitt' ? 'bg-blue-600 border-blue-500' : 'bg-gray-700 border-gray-600'"
                                class="p-4 rounded-lg border-2 hover:border-blue-400 transition text-left">
                            <div class="text-3xl mb-2">‚úÇÔ∏è</div>
                            <div class="font-bold">Haarschnitt</div>
                            <div class="text-sm text-gray-400">30 Min ‚Ä¢ 35‚Ç¨</div>
                        </button>
                        <button @click="selectService('F√§rben')"
                                :class="service === 'F√§rben' ? 'bg-blue-600 border-blue-500' : 'bg-gray-700 border-gray-600'"
                                class="p-4 rounded-lg border-2 hover:border-blue-400 transition text-left">
                            <div class="text-3xl mb-2">üé®</div>
                            <div class="font-bold">F√§rben</div>
                            <div class="text-sm text-gray-400">90 Min ‚Ä¢ 65‚Ç¨</div>
                        </button>
                        <button @click="selectService('Dauerwelle')"
                                :class="service === 'Dauerwelle' ? 'bg-blue-600 border-blue-500' : 'bg-gray-700 border-gray-600'"
                                class="p-4 rounded-lg border-2 hover:border-blue-400 transition text-left">
                            <div class="text-3xl mb-2">üíÜ</div>
                            <div class="font-bold">Dauerwelle</div>
                            <div class="text-sm text-gray-400">120 Min ‚Ä¢ 85‚Ç¨</div>
                        </button>
                    </div>
                </div>

                <!-- Customer Selection -->
                <div x-show="service" class="mb-8 bg-gray-800 rounded-lg p-6 border border-gray-700">
                    <h2 class="text-2xl font-bold mb-4">F√ºr wen ist der Termin?</h2>
                    <div x-show="!customerType" class="grid grid-cols-2 gap-4">
                        <button @click="customerType = 'new'" class="p-6 bg-gray-700 hover:bg-blue-600 rounded-lg border-2 border-transparent hover:border-blue-400 transition">
                            <div class="text-4xl mb-3">‚ú®</div>
                            <div class="font-bold text-lg">Neukunde</div>
                            <div class="text-sm text-gray-400">Erstmals bei uns</div>
                        </button>
                        <button @click="customerType = 'existing'" class="p-6 bg-gray-700 hover:bg-blue-600 rounded-lg border-2 border-transparent hover:border-blue-400 transition">
                            <div class="text-4xl mb-3">üë§</div>
                            <div class="font-bold text-lg">Bestandskunde</div>
                            <div class="text-sm text-gray-400">Bereits registriert</div>
                        </button>
                    </div>

                    <div x-show="customerType === 'new'" class="space-y-4">
                        <input x-model="customerName" type="text" placeholder="Vor- und Nachname"
                               class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none">
                        <input type="tel" placeholder="Telefonnummer (optional)"
                               class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none">
                        <button @click="customerType = null" class="text-sm text-blue-400 hover:text-blue-300">‚Üê Zur√ºck</button>
                    </div>

                    <div x-show="customerType === 'existing'" class="space-y-4">
                        <input type="search" placeholder="Name, Telefon oder E-Mail suchen..."
                               class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none">
                        <button @click="customerType = null" class="text-sm text-blue-400 hover:text-blue-300">‚Üê Zur√ºck</button>
                    </div>
                </div>

                <!-- Confirm Button -->
                <div x-show="service && customerName" class="flex items-center gap-4">
                    <button class="flex-1 px-8 py-4 bg-green-600 hover:bg-green-500 rounded-lg font-bold text-lg transition shadow-lg">
                        ‚úÖ Termin best√§tigen
                    </button>
                    <button @click="step = 1; service = null; customerType = null" class="px-6 py-4 bg-gray-700 hover:bg-gray-600 rounded-lg transition">
                        Abbrechen
                    </button>
                </div>
            </div>
        </div>

    </div>

    <!-- Summary Toast -->
    <div x-show="selectedSlot" class="fixed bottom-6 right-6 bg-gray-800 border-2 border-blue-500 rounded-lg p-4 shadow-2xl max-w-sm">
        <div class="text-sm font-bold text-blue-400 mb-2">üìã Buchungs√ºbersicht</div>
        <div class="text-xs space-y-1">
            <div><strong>Filiale:</strong> <span x-text="company"></span></div>
            <div><strong>Termin:</strong> <span x-text="selectedSlotDay + ' ' + selectedSlotTime"></span></div>
            <div x-show="selectedEmployee"><strong>Mitarbeiter:</strong> <span x-text="selectedEmployee?.name"></span></div>
            <div x-show="service"><strong>Service:</strong> <span x-text="service"></span></div>
            <div x-show="customerName"><strong>Kunde:</strong> <span x-text="customerName"></span></div>
        </div>
    </div>
</body>
</html>
