<!DOCTYPE html>
<html>
<head>
    <title>Checkbox Debug Tool</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #f3f4f6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        h1 { color: #1f2937; }
        .debug-section {
            margin: 20px 0;
            padding: 15px;
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
        }
        .style-output {
            background: #1f2937;
            color: #10b981;
            padding: 10px;
            border-radius: 4px;
            font-size: 12px;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        button {
            background: #3b82f6;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #2563eb;
        }
        .checkbox-test {
            margin: 10px 0;
            padding: 10px;
            background: #fff;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
        }
        .warning {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            color: #92400e;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç AskProAI Checkbox Style Debugger</h1>
        
        <div class="warning">
            <strong>‚ö†Ô∏è Debugging Tool:</strong> Diese Seite analysiert die aktuell angewendeten CSS-Styles auf Checkboxen im Portal.
        </div>

        <div class="debug-section">
            <h2>Test Checkboxen</h2>
            <div class="checkbox-test">
                <label>
                    <input type="checkbox" class="fi-input fi-checkbox-input" id="test1">
                    Standard Filament Checkbox
                </label>
            </div>
            <div class="checkbox-test">
                <label>
                    <input type="checkbox" id="test2">
                    Plain HTML Checkbox
                </label>
            </div>
        </div>

        <div class="debug-section">
            <h2>Aktuelle Styles</h2>
            <button onclick="analyzeStyles()">üîç Styles Analysieren</button>
            <button onclick="forceCustomStyles()">üîß Custom Styles Erzwingen</button>
            <button onclick="resetStyles()">üîÑ Styles Zur√ºcksetzen</button>
            <div id="style-output" class="style-output"></div>
        </div>

        <div class="debug-section">
            <h2>CSS Regeln</h2>
            <button onclick="findCheckboxRules()">üìã Alle Checkbox CSS-Regeln finden</button>
            <div id="rules-output" class="style-output"></div>
        </div>
    </div>

    <script>
        function analyzeStyles() {
            const checkbox = document.getElementById('test1');
            const computed = window.getComputedStyle(checkbox);
            
            const relevantProps = [
                'appearance', '-webkit-appearance', '-moz-appearance',
                'width', 'height',
                'background-color', 'background-image',
                'border', 'border-color', 'border-width',
                'position', 'display',
                'opacity', 'visibility',
                'transform'
            ];
            
            let output = 'Computed Styles f√ºr Filament Checkbox:\n\n';
            relevantProps.forEach(prop => {
                const value = computed.getPropertyValue(prop);
                if (value) {
                    output += `${prop}: ${value};\n`;
                }
            });
            
            // Check for pseudo-elements
            output += '\n\nPseudo-Elements:\n';
            try {
                const before = window.getComputedStyle(checkbox, '::before');
                const after = window.getComputedStyle(checkbox, '::after');
                output += `::before display: ${before.display}\n`;
                output += `::after display: ${after.display}\n`;
            } catch (e) {
                output += 'Pseudo-elements nicht verf√ºgbar\n';
            }
            
            document.getElementById('style-output').textContent = output;
        }
        
        function forceCustomStyles() {
            const style = document.createElement('style');
            style.id = 'force-custom-checkbox';
            style.textContent = `
                input[type="checkbox"] {
                    -webkit-appearance: none !important;
                    -moz-appearance: none !important;
                    appearance: none !important;
                    width: 20px !important;
                    height: 20px !important;
                    background: white !important;
                    border: 2px solid #d1d5db !important;
                    border-radius: 4px !important;
                    position: relative !important;
                    cursor: pointer !important;
                }
                
                input[type="checkbox"]:checked {
                    background: #eab308 !important;
                    border-color: #eab308 !important;
                }
                
                input[type="checkbox"]:checked::after {
                    content: '‚úì' !important;
                    position: absolute !important;
                    top: 50% !important;
                    left: 50% !important;
                    transform: translate(-50%, -50%) !important;
                    color: white !important;
                    font-size: 14px !important;
                    font-weight: bold !important;
                }
            `;
            document.head.appendChild(style);
            
            alert('Custom Styles wurden angewendet! Pr√ºfe die Checkboxen.');
            analyzeStyles();
        }
        
        function resetStyles() {
            const customStyle = document.getElementById('force-custom-checkbox');
            if (customStyle) {
                customStyle.remove();
            }
            analyzeStyles();
        }
        
        function findCheckboxRules() {
            let output = 'CSS Regeln die Checkboxen betreffen:\n\n';
            
            try {
                for (let i = 0; i < document.styleSheets.length; i++) {
                    const sheet = document.styleSheets[i];
                    try {
                        const rules = sheet.cssRules || sheet.rules;
                        for (let j = 0; j < rules.length; j++) {
                            const rule = rules[j];
                            if (rule.selectorText && 
                                (rule.selectorText.includes('checkbox') || 
                                 rule.selectorText.includes('[type="checkbox"]'))) {
                                output += `\nSelector: ${rule.selectorText}\n`;
                                output += `Style: ${rule.style.cssText}\n`;
                                output += `From: ${sheet.href || 'inline'}\n`;
                                output += '---\n';
                            }
                        }
                    } catch (e) {
                        // Cross-origin or other access issues
                        output += `\nKonnte Stylesheet nicht lesen: ${sheet.href}\n`;
                    }
                }
            } catch (e) {
                output += '\nFehler beim Lesen der Stylesheets: ' + e.message;
            }
            
            document.getElementById('rules-output').textContent = output;
        }
        
        // Auto-analyze on load
        window.onload = () => {
            setTimeout(analyzeStyles, 1000);
        };
    </script>
</body>
</html>