class t{constructor(){this.touchStartX=0,this.touchStartY=0,this.isSwiping=!1,this.isMobile()&&this.init()}isMobile(){return window.matchMedia("(max-width: 768px)").matches||"ontouchstart"in window||navigator.maxTouchPoints>0}init(){this.initSidebarSwipe(),this.initTableSwipe(),this.improveFormInputs(),this.initPullToRefresh(),this.fixIOSViewport()}initSidebarSwipe(){const t=document.querySelector(".fi-sidebar"),e=document.querySelector(".fi-sidebar-overlay");t&&(document.addEventListener("touchstart",t=>{t.touches[0].clientX<20&&(this.touchStartX=t.touches[0].clientX,this.isSwiping=!0)}),document.addEventListener("touchmove",e=>{if(!this.isSwiping)return;const i=e.touches[0].clientX-this.touchStartX;i>0&&i<280&&(t.style.transform=`translateX(${i-280}px)`)}),document.addEventListener("touchend",e=>{if(!this.isSwiping)return;e.changedTouches[0].clientX-this.touchStartX>100&&document.body.classList.remove("fi-sidebar-closed"),t.style.transform="",this.isSwiping=!1}),e&&(e.addEventListener("touchstart",t=>{this.touchStartX=t.touches[0].clientX}),e.addEventListener("touchend",t=>{const e=t.changedTouches[0].clientX;this.touchStartX-e>50&&document.body.classList.add("fi-sidebar-closed")})))}initTableSwipe(){document.querySelectorAll(".fi-ta-row").forEach(t=>{let e=0,i=0,n=!1;t.addEventListener("touchstart",t=>{e=t.touches[0].clientX,n=!0}),t.addEventListener("touchmove",o=>{if(!n)return;i=o.touches[0].clientX;const s=e-i;s>50&&(t.style.transform=`translateX(-${Math.min(s,100)}px)`)}),t.addEventListener("touchend",o=>{if(!n)return;e-i>80?t.classList.add("swiped"):(t.style.transform="",t.classList.remove("swiped")),n=!1})})}improveFormInputs(){document.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"], textarea').forEach(t=>{t.style.fontSize="16px",t.addEventListener("focus",()=>{var e;const i=null==(e=t.closest(".fi-fo-field"))?void 0:e.querySelector(".fi-fo-field-lbl");i&&i.classList.add("floating")}),t.addEventListener("blur",()=>{var e;if(!t.value){const i=null==(e=t.closest(".fi-fo-field"))?void 0:e.querySelector(".fi-fo-field-lbl");i&&i.classList.remove("floating")}})});document.querySelectorAll("select.fi-input").forEach(t=>{t.classList.add("native-mobile-select")})}initPullToRefresh(){let t=0,e=!1;const i=100;document.addEventListener("touchstart",i=>{0===window.scrollY&&(t=i.touches[0].clientY,e=!0)}),document.addEventListener("touchmove",n=>{if(!e)return;const o=n.touches[0].clientY-t;if(o>0&&o<200){const t=this.getPullToRefreshIndicator();t.style.transform=`translateY(${Math.min(o,i)}px)`,t.style.opacity=Math.min(o/i,1)}}),document.addEventListener("touchend",n=>{if(!e)return;if(n.changedTouches[0].clientY-t>i)window.location.reload();else{const t=this.getPullToRefreshIndicator();t.style.transform="",t.style.opacity=""}e=!1})}getPullToRefreshIndicator(){let t=document.querySelector(".pull-to-refresh-indicator");return t||(t=document.createElement("div"),t.className="pull-to-refresh-indicator",t.innerHTML='<div class="spinner"></div>',t.style.cssText="\n                position: fixed;\n                top: -50px;\n                left: 50%;\n                transform: translateX(-50%);\n                width: 40px;\n                height: 40px;\n                background: white;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n                transition: transform 0.2s, opacity 0.2s;\n                opacity: 0;\n                z-index: 1000;\n            ",document.body.appendChild(t)),t}fixIOSViewport(){document.body.addEventListener("touchmove",t=>{t.target.closest(".fi-sidebar, .fi-modal-window")||document.body.scrollHeight<=window.innerHeight&&t.preventDefault()},{passive:!1});const t=()=>{const t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`)};t(),window.addEventListener("resize",t),window.addEventListener("orientationchange",t)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.mobileInteractions=new t}):window.mobileInteractions=new t;export{t as default};
