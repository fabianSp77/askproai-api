import{r as e,j as t,d as s,T as a,S as r,L as i,e as n,C as c,f as l,F as o,g as d,h as m,i as u,k as g,l as h,m as x,n as f,o as p,p as b,q as v,s as y,t as j,u as N,v as w}from"../js/vendor/vendor-react-BkZkwsx9.js";import{t as k,c as C,a as R}from"../js/vendor/vendor-misc-BtoTmB29.js";import{a as S}from"../js/vendor/vendor-network-ztdpVPaQ.js";import"../js/vendor/vendor-components-1jqlrV-B.js";function M(...e){return k(C(e))}const $=e.forwardRef(({className:e,...r},i)=>t.jsx(s,{className:M("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...r,ref:i,children:t.jsx(a,{className:M("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));$.displayName=s.displayName;const T=R("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),U=e.forwardRef(({className:e,variant:s,size:a,asChild:i=!1,...n},c)=>{const l=i?r:"button";return t.jsx(l,{className:M(T({variant:s,size:a,className:e})),ref:c,...n})});U.displayName="Button";const P=e.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:M("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));P.displayName="Card";e.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:M("flex flex-col space-y-1.5 p-6",e),...s})).displayName="CardHeader";e.forwardRef(({className:e,...s},a)=>t.jsx("h3",{ref:a,className:M("text-2xl font-semibold leading-none tracking-tight",e),...s})).displayName="CardTitle";e.forwardRef(({className:e,...s},a)=>t.jsx("p",{ref:a,className:M("text-sm text-muted-foreground",e),...s})).displayName="CardDescription";e.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:M("p-6 pt-0",e),...s})).displayName="CardContent";e.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:M("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter";const B=R("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800 hover:bg-green-100/80",warning:"border-transparent bg-yellow-100 text-yellow-800 hover:bg-yellow-100/80"}},defaultVariants:{variant:"default"}});function I({className:e,variant:s,...a}){return t.jsx("div",{className:M(B({variant:s}),e),...a})}const L=R("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",warning:"border-amber-200 bg-amber-50 text-amber-900 dark:border-amber-900 dark:bg-amber-900/20 dark:text-amber-200 [&>svg]:text-amber-600 dark:[&>svg]:text-amber-400",success:"border-green-200 bg-green-50 text-green-900 dark:border-green-900 dark:bg-green-900/20 dark:text-green-200 [&>svg]:text-green-600 dark:[&>svg]:text-green-400"}},defaultVariants:{variant:"default"}}),q=e.forwardRef(({className:e,variant:s,...a},r)=>t.jsx("div",{ref:r,role:"alert",className:M(L({variant:s}),e),...a}));q.displayName="Alert";e.forwardRef(({className:e,...s},a)=>t.jsx("h5",{ref:a,className:M("mb-1 font-medium leading-none tracking-tight",e),...s})).displayName="AlertTitle";e.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:M("text-sm [&_p]:leading-relaxed",e),...s})).displayName="AlertDescription";const E=l,D=e.forwardRef(({className:e,...s},a)=>t.jsx(i,{ref:a,className:M("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));D.displayName=i.displayName;const F=e.forwardRef(({className:e,...s},a)=>t.jsx(n,{ref:a,className:M("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));F.displayName=n.displayName;const A=e.forwardRef(({className:e,...s},a)=>t.jsx(c,{ref:a,className:M("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));A.displayName=c.displayName;const O=e.forwardRef(({className:e,value:s,...a},r)=>t.jsx("div",{ref:r,className:M("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...a,children:t.jsx("div",{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));O.displayName="Progress";const z=new class{constructor(){this.baseUrl="/api/mcp",this.adminUrl="/admin/api/mcp",this.client=S.create({timeout:3e4,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}),this.client.interceptors.request.use(e=>{var t;const s=null==(t=document.querySelector('meta[name="csrf-token"]'))?void 0:t.getAttribute("content");s&&(e.headers["X-CSRF-TOKEN"]=s);const a=this.getTenantId();a&&(e.headers["X-Tenant-ID"]=a);const r=this.getUserId();return r&&(e.headers["X-User-ID"]=r),e}),this.client.interceptors.response.use(e=>e,e=>{var t,s,a;if(401===(null==(t=e.response)?void 0:t.status))window.location.reload();else{if(429===(null==(s=e.response)?void 0:s.status))throw new Error("Rate limit exceeded. Please try again later.");if((null==(a=e.response)?void 0:a.status)>=500)throw new Error("Server error occurred. Please contact support.")}throw e})}getTenantId(){var e;return window.tenantId||(null==(e=document.querySelector('meta[name="tenant-id"]'))?void 0:e.content)||null}getUserId(){var e;return window.userId||(null==(e=document.querySelector('meta[name="user-id"]'))?void 0:e.content)||null}async getConfiguration(){return(await this.client.get(`${this.adminUrl}/configuration`)).data}async updateConfiguration(e){return(await this.client.put(`${this.adminUrl}/configuration`,e)).data}async resetConfiguration(){return(await this.client.post(`${this.adminUrl}/configuration/reset`)).data}async getMetrics(e="1h"){return(await this.client.get(`${this.adminUrl}/metrics`,{params:{timeRange:e}})).data}async getDetailedMetrics(e="24h"){return(await this.client.get(`${this.adminUrl}/metrics/detailed`,{params:{timeRange:e}})).data}async getRecentCalls(e=50){return(await this.client.get(`${this.adminUrl}/calls/recent`,{params:{limit:e}})).data}async resetMetrics(){return(await this.client.post(`${this.adminUrl}/metrics/reset`)).data}async getCircuitBreakerStatus(){return(await this.client.get(`${this.adminUrl}/circuit-breaker/status`)).data}async toggleCircuitBreaker(){return(await this.client.post(`${this.adminUrl}/circuit-breaker/toggle`)).data}async resetCircuitBreaker(){return(await this.client.post(`${this.adminUrl}/circuit-breaker/reset`)).data}async testTool(e,t={}){var s,a;const r=performance.now();try{const s=await this.client.post(`${this.adminUrl}/tools/${e}/test`,t);return{success:!0,responseTime:Math.round(performance.now()-r),data:s.data,timestamp:(new Date).toISOString()}}catch(i){return{success:!1,responseTime:Math.round(performance.now()-r),error:(null==(a=null==(s=i.response)?void 0:s.data)?void 0:a.message)||i.message,timestamp:(new Date).toISOString()}}}async testAllTools(){const e={},t=["calcom","database","retell","webhook","queue"].map(async t=>{try{const s=await this.testTool(t);e[t]=s}catch(s){e[t]={success:!1,error:s.message,timestamp:(new Date).toISOString()}}});return await Promise.allSettled(t),e}async getPerformanceReport(e="24h"){return(await this.client.get(`${this.adminUrl}/performance/report`,{params:{timeRange:e}})).data}async getComparisonReport(e,t){return(await this.client.get(`${this.adminUrl}/performance/comparison`,{params:{startDate:e,endDate:t}})).data}async healthCheck(){return(await this.client.get(`${this.adminUrl}/health`)).data}async systemStatus(){return(await this.client.get(`${this.adminUrl}/system/status`)).data}async subscribeToMetrics(e){if(window.Echo){const t=window.Echo.channel("mcp-metrics");return t.listen("MCPMetricsUpdated",t=>{e("metrics",t)}),t.listen("MCPCallCompleted",t=>{e("call",t)}),t.listen("CircuitBreakerStateChanged",t=>{e("circuitBreaker",t)}),()=>{t.stopListening("MCPMetricsUpdated"),t.stopListening("MCPCallCompleted"),t.stopListening("CircuitBreakerStateChanged")}}return null}async batchRequest(e){return(await this.client.post(`${this.adminUrl}/batch`,{requests:e})).data}async validateConfiguration(e){return(await this.client.post(`${this.adminUrl}/configuration/validate`,e)).data}async getAvailableTools(){return(await this.client.get(`${this.adminUrl}/tools`)).data}async getToolInfo(e){return(await this.client.get(`${this.adminUrl}/tools/${e}/info`)).data}async updateToolConfiguration(e,t){return(await this.client.put(`${this.adminUrl}/tools/${e}/config`,t)).data}async getErrors(e="24h",t="all"){return(await this.client.get(`${this.adminUrl}/errors`,{params:{timeRange:e,severity:t}})).data}async getErrorDetails(e){return(await this.client.get(`${this.adminUrl}/errors/${e}`)).data}async markErrorResolved(e){return(await this.client.post(`${this.adminUrl}/errors/${e}/resolve`)).data}async getUsageAnalytics(e="7d"){return(await this.client.get(`${this.adminUrl}/analytics/usage`,{params:{timeRange:e}})).data}async exportMetrics(e="json",t="24h"){return(await this.client.get(`${this.adminUrl}/metrics/export`,{params:{format:e,timeRange:t}})).data}async getCacheStatus(){return(await this.client.get(`${this.adminUrl}/cache/status`)).data}async clearCache(e="all"){return(await this.client.post(`${this.adminUrl}/cache/clear`,{type:e})).data}async getFeatureFlags(){return(await this.client.get(`${this.adminUrl}/features`)).data}async updateFeatureFlag(e,t){return(await this.client.put(`${this.adminUrl}/features/${e}`,{enabled:t})).data}async getWebhookComparison(e="24h"){return(await this.client.get(`${this.adminUrl}/webhooks/comparison`,{params:{timeRange:e}})).data}async switchToWebhookMode(){return(await this.client.post(`${this.adminUrl}/mode/webhook`)).data}async switchToMCPMode(){return(await this.client.post(`${this.adminUrl}/mode/mcp`)).data}formatBytes(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}formatDuration(e){return e<1e3?`${e}ms`:e<6e4?`${(e/1e3).toFixed(1)}s`:`${(e/6e4).toFixed(1)}m`}calculateSuccessRate(e,t){return t>0?e/t*100:0}},X=()=>{const[s,a]=e.useState({enabled:!1,rolloutPercentage:0,tokens:{retell:"",calcom:"",database:""},rateLimits:{requestsPerMinute:100,burstLimit:20},circuitBreaker:{failureThreshold:5,resetTimeout:6e4,halfOpenRequests:3}}),[r,i]=e.useState({totalRequests:0,successRate:0,averageLatency:0,circuitBreakerState:"closed",activeConnections:0,requestsPerMinute:0,errorRate:0}),[n,c]=e.useState([]),[l,w]=e.useState({}),[k,C]=e.useState(!0),[R,S]=e.useState({}),[M,T]=e.useState("idle"),[B,L]=e.useState({config:!0,monitoring:!0,testing:!1}),[X,H]=e.useState(null);e.useEffect(()=>{W(),J(),K(),V();const e=setInterval(J,5e3),t=setInterval(K,1e4);return()=>{clearInterval(e),clearInterval(t),X&&X.close()}},[]);const V=e.useCallback(()=>{if(window.Echo){const e=window.Echo.channel("mcp-metrics");return e.listen("MCPMetricsUpdated",e=>{i(t=>({...t,...e.metrics}))}),e.listen("MCPCallCompleted",e=>{c(t=>[e.call,...t.slice(0,9)])}),()=>e.stopListening()}},[]),W=async()=>{try{const e=await z.getConfiguration();a(e.data)}catch(e){}},J=async()=>{try{const e=await z.getMetrics();i(e.data),C(!1)}catch(e){C(!1)}},K=async()=>{try{const e=await z.getRecentCalls();c(e.data)}catch(e){}},G=e=>{switch(e){case"healthy":case"closed":case"success":return"text-green-600 bg-green-100";case"warning":case"half-open":return"text-yellow-600 bg-yellow-100";case"error":case"open":case"failed":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return k?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(o,{className:"w-5 h-5 animate-spin"}),t.jsx("span",{children:"Loading MCP Configuration..."})]})}):t.jsxs("div",{className:"space-y-6 p-6 max-w-7xl mx-auto",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"MCP Configuration"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Configure and monitor Retell.ai MCP integration"})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(I,{className:`${G(r.circuitBreakerState)} border-0`,children:r.circuitBreakerState.toUpperCase()}),t.jsx(U,{onClick:async()=>{T("saving");try{await z.updateConfiguration(s),T("success"),setTimeout(()=>T("idle"),2e3)}catch(e){T("error"),setTimeout(()=>T("idle"),3e3)}},disabled:"saving"===M,className:"bg-blue-600 hover:bg-blue-700",children:"saving"===M?"Saving...":"Save Configuration"})]})]}),"success"===M&&t.jsxs(q,{className:"bg-green-50 border-green-200",children:[t.jsx(d,{className:"w-4 h-4"}),t.jsx("span",{children:"Configuration saved successfully!"})]}),"error"===M&&t.jsxs(q,{className:"bg-red-50 border-red-200",children:[t.jsx(m,{className:"w-4 h-4"}),t.jsx("span",{children:"Failed to save configuration. Please try again."})]}),t.jsxs(E,{defaultValue:"configuration",className:"space-y-4",children:[t.jsxs(D,{className:"grid w-full grid-cols-3",children:[t.jsx(F,{value:"configuration",children:"Configuration"}),t.jsx(F,{value:"monitoring",children:"Monitoring"}),t.jsx(F,{value:"testing",children:"Testing"})]}),t.jsxs(A,{value:"configuration",className:"space-y-6",children:[t.jsxs(P,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>{return e="config",void L(t=>({...t,[e]:!t[e]}));var e},children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(u,{className:"w-5 h-5"}),t.jsx("h2",{className:"text-xl font-semibold",children:"MCP Settings"})]}),B.config?t.jsx(g,{className:"w-5 h-5"}):t.jsx(h,{className:"w-5 h-5"})]}),B.config&&t.jsxs("div",{className:"mt-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-900",children:"Enable MCP Mode"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Switch between MCP tools and traditional webhooks"})]}),t.jsx($,{checked:s.enabled,onCheckedChange:e=>a(t=>({...t,enabled:e}))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Rollout Percentage: ",s.rolloutPercentage,"%"]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("input",{type:"range",min:"0",max:"100",value:s.rolloutPercentage,onChange:e=>a(t=>({...t,rolloutPercentage:parseInt(e.target.value)})),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),t.jsxs("div",{className:"w-16 text-right text-sm font-medium",children:[s.rolloutPercentage,"%"]})]}),t.jsx(O,{value:s.rolloutPercentage,className:"mt-2"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Requests per Minute"}),t.jsx("input",{type:"number",value:s.rateLimits.requestsPerMinute,onChange:e=>a(t=>({...t,rateLimits:{...t.rateLimits,requestsPerMinute:parseInt(e.target.value)}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Burst Limit"}),t.jsx("input",{type:"number",value:s.rateLimits.burstLimit,onChange:e=>a(t=>({...t,rateLimits:{...t.rateLimits,burstLimit:parseInt(e.target.value)}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Circuit Breaker"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Failure Threshold"}),t.jsx("input",{type:"number",value:s.circuitBreaker.failureThreshold,onChange:e=>a(t=>({...t,circuitBreaker:{...t.circuitBreaker,failureThreshold:parseInt(e.target.value)}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reset Timeout (ms)"}),t.jsx("input",{type:"number",value:s.circuitBreaker.resetTimeout,onChange:e=>a(t=>({...t,circuitBreaker:{...t.circuitBreaker,resetTimeout:parseInt(e.target.value)}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Half-Open Requests"}),t.jsx("input",{type:"number",value:s.circuitBreaker.halfOpenRequests,onChange:e=>a(t=>({...t,circuitBreaker:{...t.circuitBreaker,halfOpenRequests:parseInt(e.target.value)}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]})]}),t.jsxs(P,{className:"p-6",children:[t.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[t.jsx(x,{className:"w-5 h-5 mr-2"}),"API Tokens"]}),t.jsx("div",{className:"space-y-4",children:Object.entries(s.tokens).map(([e,s])=>t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 capitalize",children:[e," Token"]}),t.jsx("input",{type:"password",value:s,onChange:t=>a(s=>({...s,tokens:{...s.tokens,[e]:t.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter API token"})]},e))})]})]}),t.jsxs(A,{value:"monitoring",className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsx(P,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total Requests"}),t.jsx("p",{className:"text-2xl font-bold",children:r.totalRequests.toLocaleString()})]}),t.jsx(f,{className:"w-8 h-8 text-blue-500"})]})}),t.jsx(P,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Success Rate"}),t.jsxs("p",{className:"text-2xl font-bold",children:[r.successRate.toFixed(1),"%"]})]}),t.jsx(d,{className:"w-8 h-8 text-green-500"})]})}),t.jsx(P,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Avg Latency"}),t.jsxs("p",{className:"text-2xl font-bold",children:[r.averageLatency.toFixed(0),"ms"]})]}),t.jsx(p,{className:"w-8 h-8 text-yellow-500"})]})}),t.jsx(P,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Active Connections"}),t.jsx("p",{className:"text-2xl font-bold",children:r.activeConnections})]}),t.jsx(b,{className:"w-8 h-8 text-purple-500"})]})})]}),t.jsxs(P,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[t.jsx(v,{className:"w-5 h-5 mr-2"}),"Circuit Breaker Status"]}),t.jsx(U,{onClick:async()=>{try{await z.toggleCircuitBreaker(),J()}catch(e){}},variant:"outline",size:"sm",children:"open"===r.circuitBreakerState?"Reset":"Trip"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(I,{className:`${G(r.circuitBreakerState)} border-0 px-3 py-1`,children:r.circuitBreakerState.toUpperCase()}),t.jsxs("div",{className:"text-sm text-gray-600",children:["Requests/min: ",r.requestsPerMinute," | Error Rate: ",r.errorRate,"%"]})]})]}),t.jsxs(P,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"Recent MCP Calls"}),t.jsxs(U,{onClick:K,variant:"outline",size:"sm",children:[t.jsx(o,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),t.jsx("div",{className:"space-y-2",children:0===n.length?t.jsx("p",{className:"text-gray-500 text-center py-8",children:"No recent calls"}):n.map((e,s)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(I,{className:`${G(e.success?"success":"failed")} border-0`,children:e.success?"SUCCESS":"FAILED"}),t.jsx("span",{className:"font-medium",children:e.tool}),t.jsx("span",{className:"text-sm text-gray-600",children:e.operation})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[t.jsxs("span",{children:[e.duration,"ms"]}),t.jsx("span",{children:e.timestamp})]})]},s))})]})]}),t.jsxs(A,{value:"testing",className:"space-y-6",children:[t.jsxs(P,{className:"p-6",children:[t.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[t.jsx(y,{className:"w-5 h-5 mr-2"}),"MCP Tools Testing"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:["calcom","database","retell","webhook","queue"].map(e=>t.jsxs(P,{className:"p-4 border-2 hover:border-blue-300 transition-colors",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("h3",{className:"font-medium capitalize",children:[e," Tool"]}),t.jsx(U,{onClick:()=>(async e=>{S(t=>({...t,[e]:!0}));try{const t=await z.testTool(e);w(s=>({...s,[e]:{success:t.success,responseTime:t.responseTime,data:t.data,timestamp:(new Date).toLocaleTimeString()}}))}catch(t){w(s=>({...s,[e]:{success:!1,error:t.message,timestamp:(new Date).toLocaleTimeString()}}))}finally{S(t=>({...t,[e]:!1}))}})(e),disabled:R[e],size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:R[e]?t.jsx(o,{className:"w-4 h-4 animate-spin"}):t.jsx(j,{className:"w-4 h-4"})})]}),l[e]&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(I,{className:`${G(l[e].success?"success":"failed")} border-0`,children:l[e].success?"PASS":"FAIL"}),l[e].responseTime&&t.jsxs("span",{className:"text-xs text-gray-500",children:[l[e].responseTime,"ms"]})]}),t.jsx("p",{className:"text-xs text-gray-600",children:l[e].timestamp}),l[e].error&&t.jsx("p",{className:"text-xs text-red-600",children:l[e].error})]})]},e))})]}),t.jsxs(P,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[t.jsx(N,{className:"w-5 h-5 mr-2"}),"Debug Information"]}),t.jsx(U,{onClick:async()=>{try{await z.resetMetrics(),J()}catch(e){}},variant:"outline",size:"sm",children:"Reset Metrics"})]}),t.jsx("pre",{className:"bg-gray-100 p-4 rounded-lg text-sm overflow-auto max-h-64",children:JSON.stringify({config:s,metrics:r,testResults:l},null,2)})]})]})]})]})};function H(){const e=document.getElementById("mcp-configuration-root");if(e){const a=e.getAttribute("data-mount-data");let r={};try{a&&(r=JSON.parse(a))}catch(s){}e.innerHTML="";w.createRoot(e).render(t.jsx(X,{...r}))}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",H):H(),window.MCPConfigurationDebug={remount:H,container:()=>document.getElementById("mcp-configuration-root")};
