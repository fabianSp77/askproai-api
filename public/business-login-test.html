<!DOCTYPE html>
<html>
<head>
    <title>Business Portal Login Test</title>
    <meta charset="utf-8">
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
        button {
            background: #3b82f6;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #2563eb;
        }
        input {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>Business Portal Login Test</h1>
    
    <div class="test-section">
        <h2>Test Links</h2>
        <p><a href="/business/login" target="_blank">Business Portal Login Page</a></p>
        <p><a href="/business/login-debug" target="_blank">Login Debug Info (JSON)</a></p>
        <p><a href="/business/auth-test" target="_blank">Auth Test Page</a></p>
        <p><a href="/test-login-simple.php" target="_blank">Simple PHP Login Test</a></p>
        <p><a href="/business-logout-all.php" class="error" style="font-weight: bold;">⚠️ Logout from ALL Portals</a></p>
    </div>
    
    <div class="test-section">
        <h2>Quick Login Test</h2>
        <p class="info">This form will submit directly to the login endpoint.</p>
        <form method="POST" action="/business/login">
            <input type="email" name="email" value="demo@askproai.de" placeholder="Email" required>
            <input type="password" name="password" value="password" placeholder="Password" required>
            <button type="submit">Login (Without CSRF)</button>
        </form>
        <p class="error">Note: This will likely fail with 419 error due to missing CSRF token.</p>
    </div>
    
    <div class="test-section">
        <h2>Login Status Check</h2>
        <button onclick="checkLoginStatus()">Check Current Login Status</button>
        <div id="status-result"></div>
    </div>
    
    <div class="test-section">
        <h2>Alternative Login URLs</h2>
        <ul>
            <li><a href="/portal/login" target="_blank">/portal/login</a> (redirects to business)</li>
            <li><a href="/admin/login" target="_blank">/admin/login</a> (admin panel)</li>
            <li><a href="/business" target="_blank">/business</a> (dashboard - requires auth)</li>
        </ul>
    </div>
    
    <script>
        async function checkLoginStatus() {
            const resultDiv = document.getElementById('status-result');
            resultDiv.innerHTML = '<p class="info">Checking...</p>';
            
            try {
                const response = await fetch('/business/login-debug');
                const data = await response.json();
                
                let html = '<h3>Login Status:</h3><pre>';
                html += JSON.stringify(data, null, 2);
                html += '</pre>';
                
                if (data.portal_auth_check === 'YES') {
                    html = '<p class="success">✅ You are logged in!</p>' + html;
                } else {
                    html = '<p class="error">❌ You are NOT logged in</p>' + html;
                }
                
                resultDiv.innerHTML = html;
            } catch (error) {
                resultDiv.innerHTML = '<p class="error">Error: ' + error.message + '</p>';
            }
        }
        
        // Auto-check on load
        window.onload = () => checkLoginStatus();
    </script>
</body>
</html>