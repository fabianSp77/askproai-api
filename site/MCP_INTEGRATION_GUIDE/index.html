<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://api.askproai.de/mkdocs/MCP_INTEGRATION_GUIDE/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>MCP (Model Context Protocol) Integration Guide für AskProAI - AskProAI Dokumentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "MCP (Model Context Protocol) Integration Guide f\u00fcr AskProAI";
        var mkdocs_page_input_path = "MCP_INTEGRATION_GUIDE.md";
        var mkdocs_page_url = "/mkdocs/MCP_INTEGRATION_GUIDE/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> AskProAI Dokumentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Start</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Hauptdokumentation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../CLAUDE/">Projekt Übersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CLAUDE_QUICK_REFERENCE/">Quick Reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CLAUDE_CONTEXT_SUMMARY/">Context Summary</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Power User</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../TOP_10_COMMANDS/">Top 10 Commands</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CLAUDE_BEFEHLE_FUER_DICH/">Claude Befehle für dich</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MY_COMMANDS/">Meine Commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Best Practices 2025</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../BEST_PRACTICES_IMPLEMENTATION/">Implementation Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../DEVELOPMENT_PROCESS_2025/">Development Process</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../CLAUDE_DOCUMENTATION_GAPS_ANALYSIS.md">Documentation Gaps</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Schnellstart</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../5-MINUTEN_ONBOARDING_PLAYBOOK/">5-Minuten Onboarding</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Architektur</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/overview/">Übersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/services/">Services</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/system-design/">System Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/mcp-architecture/">MCP Architecture</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/database-schema/">Database Schema</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/security/">Security</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/performance/">Performance</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../api/overview.md">Übersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api/authentication/">Authentication</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../api/endpoints.md">Endpoints</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api/webhooks/">Webhooks</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Features</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../features/appointment-booking/">Appointment Booking</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../features/call-management.md">Call Management</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../features/customer-portal.md">Customer Portal</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../features/multi-tenancy/">Multi-Tenancy</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Development</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../development/setup.md">Setup</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../development/testing.md">Testing</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../development/code-standards.md">Code Standards</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Deployment</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../deployment/overview.md">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../deployment/production.md">Production</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../deployment/environment-variables.md">Environment Variables</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Betrieb</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../CUSTOMER_SUCCESS_RUNBOOK/">Customer Success</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../EMERGENCY_RESPONSE_PLAYBOOK/">Emergency Response</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ERROR_PATTERNS/">Error Patterns</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../TROUBLESHOOTING_DECISION_TREE/">Troubleshooting</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../DEPLOYMENT_CHECKLIST/">Deployment Checklist</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Monitoring</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../KPI_DASHBOARD_TEMPLATE/">KPI Dashboard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../INTEGRATION_HEALTH_MONITOR/">Health Monitor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../PHONE_TO_APPOINTMENT_FLOW/">Phone to Appointment Flow</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">AskProAI Dokumentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>MCP (Model Context Protocol) Integration Guide für AskProAI</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="mcp-model-context-protocol-integration-guide-fur-askproai">MCP (Model Context Protocol) Integration Guide für AskProAI</h1>
<h2 id="ubersicht">Übersicht</h2>
<p>Diese Anleitung beschreibt die Nutzung der MCP Server Integration in AskProAI. MCP ermöglicht es AI-Assistenten wie Claude, direkt mit Ihrer Anwendung zu interagieren.</p>
<h2 id="verfugbare-mcp-server">Verfügbare MCP Server</h2>
<h3 id="1-database-mcp-server">1. Database MCP Server</h3>
<p>Ermöglicht Read-Only Zugriff auf die Datenbank für Debugging und Analyse.</p>
<p><strong>Endpoints:</strong>
- <code>GET /api/mcp/database/schema</code> - Datenbankschema abrufen
- <code>POST /api/mcp/database/query</code> - SQL-Abfragen ausführen (nur SELECT)
- <code>POST /api/mcp/database/search</code> - Suche in Tabellen
- <code>GET /api/mcp/database/failed-appointments</code> - Fehlgeschlagene Termine
- <code>GET /api/mcp/database/call-stats</code> - Anrufstatistiken
- <code>GET /api/mcp/database/tenant-stats</code> - Mandanten-Statistiken</p>
<p><strong>Beispiel-Anfragen an Claude:</strong>
- "Zeige mir alle fehlgeschlagenen Termine der letzten 24 Stunden"
- "Wie viele Anrufe hatten wir diese Woche?"
- "Suche nach Kunden mit der Telefonnummer 0170..."</p>
<h3 id="2-calcom-mcp-server">2. Cal.com MCP Server</h3>
<p>Integration mit Cal.com für Kalender-Management.</p>
<p><strong>Endpoints:</strong>
- <code>GET /api/mcp/calcom/event-types?company_id=XXX</code> - Event Types abrufen
- <code>POST /api/mcp/calcom/availability</code> - Verfügbarkeit prüfen
- <code>GET /api/mcp/calcom/bookings?company_id=XXX</code> - Buchungen abrufen
- <code>GET /api/mcp/calcom/assignments/{companyId}</code> - Event Type Zuordnungen
- <code>POST /api/mcp/calcom/sync</code> - Event Types synchronisieren
- <code>GET /api/mcp/calcom/test/{companyId}</code> - Verbindung testen</p>
<p><strong>Beispiel-Anfragen an Claude:</strong>
- "Synchronisiere die Event Types für Firma XYZ"
- "Zeige mir die verfügbaren Termine für morgen"
- "Welche Mitarbeiter sind welchen Event Types zugeordnet?"</p>
<h3 id="3-retellai-mcp-server">3. Retell.ai MCP Server</h3>
<p>Integration mit Retell.ai für Telefon-AI Management.</p>
<p><strong>Endpoints:</strong>
- <code>GET /api/mcp/retell/agent/{companyId}</code> - Agent-Informationen
- <code>GET /api/mcp/retell/agents/{companyId}</code> - Alle Agents auflisten
- <code>GET /api/mcp/retell/call-stats?company_id=XXX</code> - Anrufstatistiken
- <code>GET /api/mcp/retell/recent-calls?company_id=XXX</code> - Letzte Anrufe
- <code>GET /api/mcp/retell/call/{callId}</code> - Anrufdetails
- <code>POST /api/mcp/retell/search-calls</code> - Anrufe suchen
- <code>GET /api/mcp/retell/phone-numbers/{companyId}</code> - Telefonnummern
- <code>GET /api/mcp/retell/test/{companyId}</code> - Verbindung testen</p>
<p><strong>Beispiel-Anfragen an Claude:</strong>
- "Wie viele Anrufe hatten wir heute?"
- "Zeige mir Details zum letzten Anruf"
- "Welche Telefonnummern sind konfiguriert?"</p>
<h3 id="4-sentry-mcp-server-bereits-implementiert">4. Sentry MCP Server (bereits implementiert)</h3>
<p>Error-Tracking und Performance-Monitoring.</p>
<p><strong>Endpoints:</strong>
- <code>GET /api/mcp/sentry/issues</code> - Aktuelle Fehler
- <code>GET /api/mcp/sentry/issues/{issueId}</code> - Fehlerdetails
- <code>POST /api/mcp/sentry/issues/search</code> - Fehler suchen
- <code>GET /api/mcp/sentry/performance</code> - Performance-Daten</p>
<h2 id="authentifizierung">Authentifizierung</h2>
<p>Alle MCP Endpoints sind durch Sanctum Authentication geschützt. Sie benötigen ein gültiges API Token.</p>
<h2 id="nutzung-mit-claude">Nutzung mit Claude</h2>
<h3 id="in-claude-desktop">In Claude Desktop</h3>
<ol>
<li>Öffnen Sie Claude Desktop</li>
<li>Navigieren Sie zu den MCP Server Einstellungen</li>
<li>Fügen Sie die AskProAI MCP Server URL hinzu: <code>https://api.askproai.de/api/mcp</code></li>
<li>Konfigurieren Sie Ihr API Token</li>
</ol>
<h3 id="beispiel-konversationen">Beispiel-Konversationen</h3>
<p><strong>Fehleranalyse:</strong></p>
<pre><code>Claude: &quot;Was sind die häufigsten Fehler beim Booking Flow?&quot;
→ MCP nutzt Database + Sentry Server für Analyse
</code></pre>
<p><strong>Status-Check:</strong></p>
<pre><code>Claude: &quot;Wie ist der aktuelle System-Status?&quot;
→ MCP prüft Cal.com + Retell.ai Verbindungen
</code></pre>
<p><strong>Debugging:</strong></p>
<pre><code>Claude: &quot;Warum ist der Termin für Kunde Schmidt fehlgeschlagen?&quot;
→ MCP durchsucht Calls, Appointments und Error Logs
</code></pre>
<h2 id="sicherheit">Sicherheit</h2>
<h3 id="read-only-zugriff">Read-Only Zugriff</h3>
<ul>
<li>Database MCP erlaubt nur SELECT Queries</li>
<li>Keine Datenänderungen möglich</li>
<li>Sensitive Spalten (Passwörter etc.) werden gefiltert</li>
</ul>
<h3 id="tenant-isolation">Tenant Isolation</h3>
<ul>
<li>Alle Abfragen beachten die Multi-Tenancy</li>
<li>Company ID muss bei relevanten Anfragen angegeben werden</li>
</ul>
<h3 id="rate-limiting">Rate Limiting</h3>
<ul>
<li>API Endpoints haben Rate Limits</li>
<li>Cache wird für häufige Anfragen genutzt</li>
</ul>
<h2 id="erweiterte-nutzung">Erweiterte Nutzung</h2>
<h3 id="custom-queries">Custom Queries</h3>
<p>Sie können eigene SQL-Abfragen ausführen:</p>
<pre><code class="language-json">POST /api/mcp/database/query
{
    &quot;sql&quot;: &quot;SELECT COUNT(*) as total FROM appointments WHERE status = ?&quot;,
    &quot;bindings&quot;: [&quot;completed&quot;]
}
</code></pre>
<h3 id="cache-management">Cache Management</h3>
<p>Cache für jeden Service kann geleert werden:</p>
<pre><code>POST /api/mcp/{service}/cache/clear
</code></pre>
<p>Verfügbare Services: database, calcom, retell, sentry</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="company-not-found">"Company not found"</h3>
<ul>
<li>Stellen Sie sicher, dass die company_id korrekt ist</li>
<li>Prüfen Sie, ob der API Key Zugriff auf diese Company hat</li>
</ul>
<h3 id="only-select-queries-are-allowed">"Only SELECT queries are allowed"</h3>
<ul>
<li>Database MCP erlaubt nur lesende Zugriffe</li>
<li>Für Änderungen nutzen Sie die reguläre API</li>
</ul>
<h3 id="calcom-not-configured">"Cal.com not configured"</h3>
<ul>
<li>Prüfen Sie, ob die Company einen Cal.com API Key hat</li>
<li>Testen Sie die Verbindung mit <code>/api/mcp/calcom/test/{companyId}</code></li>
</ul>
<h2 id="best-practices">Best Practices</h2>
<ol>
<li><strong>Nutzen Sie spezifische Fragen</strong>: "Zeige Fehler der letzten 24 Stunden" statt "Zeige alle Fehler"</li>
<li><strong>Kombinieren Sie MCP Server</strong>: Nutzen Sie Database + Sentry für vollständige Fehleranalyse</li>
<li><strong>Cache beachten</strong>: Daten werden 5 Minuten gecacht - bei Bedarf Cache leeren</li>
<li><strong>Company Context</strong>: Geben Sie immer die company_id an für mandanten-spezifische Daten</li>
</ol>
<h2 id="zukunftige-erweiterungen">Zukünftige Erweiterungen</h2>
<ul>
<li><strong>Redis MCP</strong>: Cache und Queue Monitoring</li>
<li><strong>Horizon MCP</strong>: Queue Job Details</li>
<li><strong>Stripe MCP</strong>: Billing und Payment Informationen</li>
<li><strong>Custom Business Logic MCP</strong>: Spezifische Geschäftslogik-Operationen</li>
</ul>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
