<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://api.askproai.de/mkdocs/docs/configuration/cache/" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Cache Configuration - AskProAI Dokumentation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Cache Configuration";
        var mkdocs_page_input_path = "docs/configuration/cache.md";
        var mkdocs_page_url = "/mkdocs/docs/configuration/cache/";
      </script>
    
    <script src="../../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> AskProAI Dokumentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Start</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Hauptdokumentation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../CLAUDE/">Projekt Übersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../CLAUDE_QUICK_REFERENCE/">Quick Reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../CLAUDE_CONTEXT_SUMMARY/">Context Summary</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Power User</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../TOP_10_COMMANDS/">Top 10 Commands</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../CLAUDE_BEFEHLE_FUER_DICH/">Claude Befehle für dich</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../MY_COMMANDS/">Meine Commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Best Practices 2025</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../BEST_PRACTICES_IMPLEMENTATION/">Implementation Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../DEVELOPMENT_PROCESS_2025/">Development Process</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../CLAUDE_DOCUMENTATION_GAPS_ANALYSIS.md">Documentation Gaps</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Schnellstart</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../5-MINUTEN_ONBOARDING_PLAYBOOK/">5-Minuten Onboarding</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Architektur</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../architecture/overview/">Übersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../architecture/services/">Services</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../architecture/system-design/">System Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../architecture/mcp-architecture/">MCP Architecture</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../architecture/database-schema/">Database Schema</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../architecture/security/">Security</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../architecture/performance/">Performance</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../../api/overview.md">Übersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../api/authentication/">Authentication</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../api/endpoints.md">Endpoints</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../api/webhooks/">Webhooks</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Features</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../features/appointment-booking/">Appointment Booking</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../features/call-management.md">Call Management</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../features/customer-portal.md">Customer Portal</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../features/multi-tenancy/">Multi-Tenancy</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Development</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../../development/setup.md">Setup</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../development/testing.md">Testing</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../development/code-standards.md">Code Standards</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Deployment</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../../deployment/overview.md">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../deployment/production.md">Production</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../deployment/environment-variables.md">Environment Variables</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Betrieb</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../CUSTOMER_SUCCESS_RUNBOOK/">Customer Success</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../EMERGENCY_RESPONSE_PLAYBOOK/">Emergency Response</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../ERROR_PATTERNS/">Error Patterns</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../TROUBLESHOOTING_DECISION_TREE/">Troubleshooting</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../DEPLOYMENT_CHECKLIST/">Deployment Checklist</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Monitoring</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../KPI_DASHBOARD_TEMPLATE/">KPI Dashboard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../INTEGRATION_HEALTH_MONITOR/">Health Monitor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../PHONE_TO_APPOINTMENT_FLOW/">Phone to Appointment Flow</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">AskProAI Dokumentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Cache Configuration</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="cache-configuration">Cache Configuration</h1>
<h2 id="overview">Overview</h2>
<p>AskProAI uses multiple caching layers to optimize performance and reduce database load. This guide covers cache configuration, strategies, and best practices.</p>
<h2 id="cache-drivers">Cache Drivers</h2>
<h3 id="available-drivers">Available Drivers</h3>
<pre><code class="language-php">// config/cache.php
return [
    'default' =&gt; env('CACHE_DRIVER', 'redis'),

    'stores' =&gt; [
        'redis' =&gt; [
            'driver' =&gt; 'redis',
            'connection' =&gt; 'cache',
            'lock_connection' =&gt; 'default',
        ],

        'memcached' =&gt; [
            'driver' =&gt; 'memcached',
            'persistent_id' =&gt; env('MEMCACHED_PERSISTENT_ID'),
            'sasl' =&gt; [
                env('MEMCACHED_USERNAME'),
                env('MEMCACHED_PASSWORD'),
            ],
            'options' =&gt; [
                // Memcached::OPT_CONNECT_TIMEOUT =&gt; 2000,
            ],
            'servers' =&gt; [
                [
                    'host' =&gt; env('MEMCACHED_HOST', '127.0.0.1'),
                    'port' =&gt; env('MEMCACHED_PORT', 11211),
                    'weight' =&gt; 100,
                ],
            ],
        ],

        'dynamodb' =&gt; [
            'driver' =&gt; 'dynamodb',
            'key' =&gt; env('AWS_ACCESS_KEY_ID'),
            'secret' =&gt; env('AWS_SECRET_ACCESS_KEY'),
            'region' =&gt; env('AWS_DEFAULT_REGION', 'eu-central-1'),
            'table' =&gt; env('DYNAMODB_CACHE_TABLE', 'cache'),
            'endpoint' =&gt; env('DYNAMODB_ENDPOINT'),
        ],

        'file' =&gt; [
            'driver' =&gt; 'file',
            'path' =&gt; storage_path('framework/cache/data'),
        ],

        'database' =&gt; [
            'driver' =&gt; 'database',
            'table' =&gt; 'cache',
            'connection' =&gt; null,
            'lock_connection' =&gt; null,
        ],
    ],

    'prefix' =&gt; env('CACHE_PREFIX', 'askproai_cache'),
];
</code></pre>
<h3 id="redis-configuration">Redis Configuration</h3>
<pre><code class="language-php">// config/database.php
'redis' =&gt; [
    'client' =&gt; env('REDIS_CLIENT', 'phpredis'),

    'default' =&gt; [
        'host' =&gt; env('REDIS_HOST', '127.0.0.1'),
        'password' =&gt; env('REDIS_PASSWORD'),
        'port' =&gt; env('REDIS_PORT', 6379),
        'database' =&gt; env('REDIS_DB', 0),
    ],

    'cache' =&gt; [
        'host' =&gt; env('REDIS_HOST', '127.0.0.1'),
        'password' =&gt; env('REDIS_PASSWORD'),
        'port' =&gt; env('REDIS_PORT', 6379),
        'database' =&gt; env('REDIS_CACHE_DB', 1),
    ],

    'queue' =&gt; [
        'host' =&gt; env('REDIS_HOST', '127.0.0.1'),
        'password' =&gt; env('REDIS_PASSWORD'),
        'port' =&gt; env('REDIS_PORT', 6379),
        'database' =&gt; env('REDIS_QUEUE_DB', 2),
    ],

    'sessions' =&gt; [
        'host' =&gt; env('REDIS_HOST', '127.0.0.1'),
        'password' =&gt; env('REDIS_PASSWORD'),
        'port' =&gt; env('REDIS_PORT', 6379),
        'database' =&gt; env('REDIS_SESSION_DB', 3),
    ],
];
</code></pre>
<h2 id="caching-strategies">Caching Strategies</h2>
<h3 id="cache-keys-structure">Cache Keys Structure</h3>
<pre><code class="language-php">// app/Services/Cache/CacheKeyBuilder.php
class CacheKeyBuilder
{
    protected string $prefix;
    protected string $separator = ':';

    public function __construct()
    {
        $this-&gt;prefix = config('cache.prefix');
    }

    public function make(string $type, ...$identifiers): string
    {
        $parts = array_merge([$this-&gt;prefix, $type], $identifiers);
        return implode($this-&gt;separator, array_filter($parts));
    }

    // Examples:
    // askproai_cache:company:123:settings
    // askproai_cache:availability:2026361:2025-06-30
    // askproai_cache:user:456:permissions
}
</code></pre>
<h3 id="cache-ttl-configuration">Cache TTL Configuration</h3>
<pre><code class="language-php">// config/cache-ttl.php
return [
    // Short-lived cache (1-5 minutes)
    'availability' =&gt; 60,           // Cal.com availability slots
    'active_calls' =&gt; 30,          // Real-time call status
    'rate_limits' =&gt; 60,           // API rate limit counters

    // Medium-lived cache (5-60 minutes)
    'event_types' =&gt; 300,          // Cal.com event types
    'company_settings' =&gt; 1800,     // Company configuration
    'user_permissions' =&gt; 900,      // User access rights
    'service_health' =&gt; 300,        // External service status

    // Long-lived cache (1-24 hours)
    'statistics' =&gt; 3600,          // Dashboard statistics
    'reports' =&gt; 7200,             // Generated reports
    'translations' =&gt; 86400,        // Language translations
    'feature_flags' =&gt; 3600,        // Feature toggles

    // Session-based cache
    'user_session' =&gt; 7200,        // User session data
    'api_tokens' =&gt; 86400,         // API authentication tokens
];
</code></pre>
<h2 id="model-caching">Model Caching</h2>
<h3 id="eloquent-model-caching">Eloquent Model Caching</h3>
<pre><code class="language-php">// app/Traits/Cacheable.php
trait Cacheable
{
    protected static function bootCacheable()
    {
        static::saved(function ($model) {
            $model-&gt;clearCache();
        });

        static::deleted(function ($model) {
            $model-&gt;clearCache();
        });
    }

    public function getCacheKey(): string
    {
        return app(CacheKeyBuilder::class)-&gt;make(
            $this-&gt;getTable(),
            $this-&gt;getKey()
        );
    }

    public function remember($ttl = null)
    {
        $ttl = $ttl ?? $this-&gt;getCacheTTL();

        return Cache::remember($this-&gt;getCacheKey(), $ttl, function () {
            return $this-&gt;fresh();
        });
    }

    public function clearCache(): void
    {
        Cache::forget($this-&gt;getCacheKey());

        // Clear related caches
        foreach ($this-&gt;getCacheRelations() as $relation) {
            Cache::forget($this-&gt;getCacheKey() . ':' . $relation);
        }
    }

    protected function getCacheTTL(): int
    {
        return config('cache-ttl.' . $this-&gt;getTable(), 3600);
    }

    protected function getCacheRelations(): array
    {
        return [];
    }
}
</code></pre>
<h3 id="query-result-caching">Query Result Caching</h3>
<pre><code class="language-php">// app/Services/Cache/QueryCache.php
class QueryCache
{
    public function remember(string $key, $ttl, Closure $callback)
    {
        // Check if caching is enabled
        if (!config('database.cache_queries', true)) {
            return $callback();
        }

        return Cache::tags(['queries'])-&gt;remember($key, $ttl, $callback);
    }

    public function rememberForever(string $key, Closure $callback)
    {
        return Cache::tags(['queries'])-&gt;rememberForever($key, $callback);
    }

    public function flush(): void
    {
        Cache::tags(['queries'])-&gt;flush();
    }
}

// Usage in repository
class AppointmentRepository
{
    public function getUpcomingForBranch(int $branchId): Collection
    {
        $key = &quot;appointments:upcoming:branch:{$branchId}&quot;;

        return app(QueryCache::class)-&gt;remember($key, 300, function () use ($branchId) {
            return Appointment::where('branch_id', $branchId)
                -&gt;where('date', '&gt;=', now())
                -&gt;orderBy('date')
                -&gt;with(['customer', 'service', 'staff'])
                -&gt;get();
        });
    }
}
</code></pre>
<h2 id="api-response-caching">API Response Caching</h2>
<h3 id="response-cache-middleware">Response Cache Middleware</h3>
<pre><code class="language-php">// app/Http/Middleware/CacheResponse.php
class CacheResponse
{
    public function handle($request, Closure $next, $ttl = null)
    {
        // Skip caching for non-GET requests
        if (!$request-&gt;isMethod('GET')) {
            return $next($request);
        }

        // Skip if user is authenticated (personalized content)
        if ($request-&gt;user()) {
            return $next($request);
        }

        $key = $this-&gt;getCacheKey($request);

        return Cache::remember($key, $ttl ?? 300, function () use ($request, $next) {
            $response = $next($request);

            // Only cache successful responses
            if ($response-&gt;isSuccessful()) {
                return $response;
            }

            // Don't cache error responses
            Cache::forget($key);
            return $response;
        });
    }

    protected function getCacheKey(Request $request): string
    {
        $url = $request-&gt;url();
        $queryParams = $request-&gt;query();
        ksort($queryParams);

        return 'response:' . md5($url . '?' . http_build_query($queryParams));
    }
}
</code></pre>
<h3 id="api-endpoint-caching">API Endpoint Caching</h3>
<pre><code class="language-php">// routes/api.php
Route::middleware(['cache.response:300'])-&gt;group(function () {
    Route::get('/event-types', [EventTypeController::class, 'index']);
    Route::get('/branches', [BranchController::class, 'index']);
    Route::get('/services', [ServiceController::class, 'index']);
});

// Controller with custom cache
class StatisticsController extends Controller
{
    public function dashboard()
    {
        $stats = Cache::remember('dashboard:stats:' . auth()-&gt;user()-&gt;company_id, 3600, function () {
            return [
                'total_appointments' =&gt; $this-&gt;getAppointmentStats(),
                'total_calls' =&gt; $this-&gt;getCallStats(),
                'revenue' =&gt; $this-&gt;getRevenueStats(),
                'customer_growth' =&gt; $this-&gt;getCustomerGrowth(),
            ];
        });

        return response()-&gt;json($stats);
    }
}
</code></pre>
<h2 id="cache-warming">Cache Warming</h2>
<h3 id="cache-warming-commands">Cache Warming Commands</h3>
<pre><code class="language-php">// app/Console/Commands/WarmCache.php
class WarmCache extends Command
{
    protected $signature = 'cache:warm {--type=all}';

    public function handle()
    {
        $type = $this-&gt;option('type');

        $this-&gt;info('Starting cache warming...');

        match($type) {
            'event-types' =&gt; $this-&gt;warmEventTypes(),
            'availability' =&gt; $this-&gt;warmAvailability(),
            'statistics' =&gt; $this-&gt;warmStatistics(),
            'all' =&gt; $this-&gt;warmAll(),
        };

        $this-&gt;info('Cache warming completed!');
    }

    protected function warmEventTypes()
    {
        $companies = Company::active()-&gt;get();

        foreach ($companies as $company) {
            $this-&gt;info(&quot;Warming event types for company: {$company-&gt;name}&quot;);

            app(CalcomService::class)
                -&gt;setCompany($company)
                -&gt;getEventTypes(true); // Force refresh
        }
    }

    protected function warmAvailability()
    {
        $eventTypes = CalcomEventType::active()-&gt;get();
        $dates = CarbonPeriod::create(now(), now()-&gt;addDays(7));

        foreach ($eventTypes as $eventType) {
            foreach ($dates as $date) {
                $key = &quot;availability:{$eventType-&gt;calcom_event_type_id}:{$date-&gt;format('Y-m-d')}&quot;;

                Cache::remember($key, 300, function () use ($eventType, $date) {
                    return app(CalcomService::class)-&gt;getAvailability(
                        $eventType-&gt;calcom_event_type_id,
                        $date-&gt;format('Y-m-d')
                    );
                });
            }
        }
    }
}
</code></pre>
<h3 id="scheduled-cache-warming">Scheduled Cache Warming</h3>
<pre><code class="language-php">// app/Console/Kernel.php
protected function schedule(Schedule $schedule)
{
    // Warm critical caches before business hours
    $schedule-&gt;command('cache:warm --type=event-types')
        -&gt;dailyAt('06:00')
        -&gt;withoutOverlapping();

    $schedule-&gt;command('cache:warm --type=availability')
        -&gt;everyThirtyMinutes()
        -&gt;between('07:00', '20:00')
        -&gt;withoutOverlapping();

    $schedule-&gt;command('cache:warm --type=statistics')
        -&gt;hourly()
        -&gt;withoutOverlapping();
}
</code></pre>
<h2 id="cache-invalidation">Cache Invalidation</h2>
<h3 id="event-based-invalidation">Event-Based Invalidation</h3>
<pre><code class="language-php">// app/Listeners/InvalidateCache.php
class InvalidateCache
{
    public function handle($event)
    {
        match(get_class($event)) {
            AppointmentCreated::class =&gt; $this-&gt;invalidateAppointmentCaches($event-&gt;appointment),
            EventTypeUpdated::class =&gt; $this-&gt;invalidateEventTypeCaches($event-&gt;eventType),
            CompanySettingsUpdated::class =&gt; $this-&gt;invalidateCompanyCaches($event-&gt;company),
        };
    }

    protected function invalidateAppointmentCaches(Appointment $appointment)
    {
        // Clear availability cache for the date
        $key = &quot;availability:{$appointment-&gt;calcom_event_type_id}:{$appointment-&gt;date-&gt;format('Y-m-d')}&quot;;
        Cache::forget($key);

        // Clear branch statistics
        Cache::forget(&quot;statistics:branch:{$appointment-&gt;branch_id}&quot;);

        // Clear dashboard cache
        Cache::forget(&quot;dashboard:stats:{$appointment-&gt;company_id}&quot;);
    }
}
</code></pre>
<h3 id="manual-cache-clearing">Manual Cache Clearing</h3>
<pre><code class="language-php">// app/Services/Cache/CacheCleaner.php
class CacheCleaner
{
    public function clearAll(): void
    {
        Cache::flush();
    }

    public function clearByPattern(string $pattern): int
    {
        $count = 0;
        $redis = Cache::getRedis();

        $keys = $redis-&gt;keys(config('cache.prefix') . ':' . $pattern);

        foreach ($keys as $key) {
            $redis-&gt;del($key);
            $count++;
        }

        return $count;
    }

    public function clearByTags(array $tags): void
    {
        Cache::tags($tags)-&gt;flush();
    }

    public function clearExpired(): int
    {
        // Redis handles expiration automatically
        // This is for file or database cache drivers
        if (Cache::getStore() instanceof FileStore) {
            return $this-&gt;clearExpiredFiles();
        }

        return 0;
    }
}
</code></pre>
<h2 id="cache-monitoring">Cache Monitoring</h2>
<h3 id="cache-statistics">Cache Statistics</h3>
<pre><code class="language-php">// app/Services/Cache/CacheMonitor.php
class CacheMonitor
{
    public function getStats(): array
    {
        $redis = Cache::getRedis();
        $info = $redis-&gt;info();

        return [
            'used_memory' =&gt; $info['used_memory_human'],
            'total_keys' =&gt; $redis-&gt;dbSize(),
            'hit_rate' =&gt; $this-&gt;calculateHitRate(),
            'evicted_keys' =&gt; $info['evicted_keys'] ?? 0,
            'expired_keys' =&gt; $info['expired_keys'] ?? 0,
            'connected_clients' =&gt; $info['connected_clients'],
        ];
    }

    public function getKeysByPattern(string $pattern): array
    {
        $redis = Cache::getRedis();
        $keys = $redis-&gt;keys(config('cache.prefix') . ':' . $pattern);

        $result = [];
        foreach ($keys as $key) {
            $ttl = $redis-&gt;ttl($key);
            $type = $redis-&gt;type($key);

            $result[] = [
                'key' =&gt; str_replace(config('cache.prefix') . ':', '', $key),
                'ttl' =&gt; $ttl &gt; 0 ? $ttl : 'persistent',
                'type' =&gt; $type,
                'size' =&gt; strlen($redis-&gt;get($key)),
            ];
        }

        return $result;
    }
}
</code></pre>
<h3 id="cache-dashboard">Cache Dashboard</h3>
<pre><code class="language-php">// app/Http/Controllers/Admin/CacheDashboardController.php
class CacheDashboardController extends Controller
{
    public function index()
    {
        $monitor = app(CacheMonitor::class);

        return view('admin.cache-dashboard', [
            'stats' =&gt; $monitor-&gt;getStats(),
            'patterns' =&gt; [
                'companies' =&gt; $monitor-&gt;getKeysByPattern('company:*'),
                'availability' =&gt; $monitor-&gt;getKeysByPattern('availability:*'),
                'sessions' =&gt; $monitor-&gt;getKeysByPattern('session:*'),
            ],
        ]);
    }

    public function clear(Request $request)
    {
        $pattern = $request-&gt;input('pattern');

        $count = app(CacheCleaner::class)-&gt;clearByPattern($pattern);

        return response()-&gt;json([
            'message' =&gt; &quot;Cleared {$count} cache entries&quot;,
        ]);
    }
}
</code></pre>
<h2 id="performance-optimization">Performance Optimization</h2>
<h3 id="cache-preloading">Cache Preloading</h3>
<pre><code class="language-php">// app/Http/Middleware/PreloadCache.php
class PreloadCache
{
    public function handle($request, Closure $next)
    {
        if ($user = $request-&gt;user()) {
            // Preload user-specific caches
            dispatch(function () use ($user) {
                Cache::remember(&quot;user:{$user-&gt;id}:permissions&quot;, 900, function () use ($user) {
                    return $user-&gt;getAllPermissions();
                });

                Cache::remember(&quot;company:{$user-&gt;company_id}:settings&quot;, 1800, function () use ($user) {
                    return $user-&gt;company-&gt;settings;
                });
            })-&gt;afterResponse();
        }

        return $next($request);
    }
}
</code></pre>
<h3 id="batch-operations">Batch Operations</h3>
<pre><code class="language-php">// app/Services/Cache/CacheBatch.php
class CacheBatch
{
    public function getMany(array $keys): array
    {
        return Cache::many($keys);
    }

    public function putMany(array $values, $ttl = null): bool
    {
        return Cache::putMany($values, $ttl);
    }

    public function pipeline(Closure $callback)
    {
        return Cache::getRedis()-&gt;pipeline(function ($pipe) use ($callback) {
            return $callback($pipe);
        });
    }
}
</code></pre>
<h2 id="best-practices">Best Practices</h2>
<h3 id="1-cache-key-naming">1. Cache Key Naming</h3>
<ul>
<li>Use consistent, hierarchical naming</li>
<li>Include version numbers for cache busting</li>
<li>Make keys human-readable for debugging</li>
</ul>
<h3 id="2-ttl-strategy">2. TTL Strategy</h3>
<ul>
<li>Shorter TTL for frequently changing data</li>
<li>Longer TTL for static configuration</li>
<li>Use cache tags for grouped invalidation</li>
</ul>
<h3 id="3-memory-management">3. Memory Management</h3>
<ul>
<li>Monitor memory usage regularly</li>
<li>Set appropriate maxmemory policies</li>
<li>Use LRU eviction for Redis</li>
</ul>
<h3 id="4-error-handling">4. Error Handling</h3>
<pre><code class="language-php">try {
    $value = Cache::remember($key, $ttl, $callback);
} catch (Exception $e) {
    Log::error('Cache operation failed', ['key' =&gt; $key, 'error' =&gt; $e-&gt;getMessage()]);
    // Fallback to direct database query
    $value = $callback();
}
</code></pre>
<h2 id="related-documentation">Related Documentation</h2>
<ul>
<li><a href="../operations/performance.md">Performance Optimization</a></li>
<li><a href="../database/">Database Configuration</a></li>
<li><a href="../queues/">Queue Configuration</a></li>
</ul>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme_extra.js" defer></script>
    <script src="../../../js/theme.js" defer></script>
      <script src="../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
