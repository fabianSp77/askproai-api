<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://api.askproai.de/mkdocs/docs/configuration/services/" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Services Configuration - AskProAI Dokumentation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Services Configuration";
        var mkdocs_page_input_path = "docs/configuration/services.md";
        var mkdocs_page_url = "/mkdocs/docs/configuration/services/";
      </script>
    
    <script src="../../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> AskProAI Dokumentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Start</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Hauptdokumentation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../CLAUDE/">Projekt Übersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../CLAUDE_QUICK_REFERENCE/">Quick Reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../CLAUDE_CONTEXT_SUMMARY/">Context Summary</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Power User</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../TOP_10_COMMANDS/">Top 10 Commands</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../CLAUDE_BEFEHLE_FUER_DICH/">Claude Befehle für dich</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../MY_COMMANDS/">Meine Commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Best Practices 2025</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../BEST_PRACTICES_IMPLEMENTATION/">Implementation Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../DEVELOPMENT_PROCESS_2025/">Development Process</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../CLAUDE_DOCUMENTATION_GAPS_ANALYSIS.md">Documentation Gaps</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Schnellstart</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../5-MINUTEN_ONBOARDING_PLAYBOOK/">5-Minuten Onboarding</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Architektur</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../architecture/overview/">Übersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../architecture/services/">Services</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../architecture/system-design/">System Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../architecture/mcp-architecture/">MCP Architecture</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../architecture/database-schema/">Database Schema</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../architecture/security/">Security</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../architecture/performance/">Performance</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../../api/overview.md">Übersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../api/authentication/">Authentication</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../api/endpoints.md">Endpoints</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../api/webhooks/">Webhooks</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Features</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../features/appointment-booking/">Appointment Booking</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../features/call-management.md">Call Management</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../features/customer-portal.md">Customer Portal</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../features/multi-tenancy/">Multi-Tenancy</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Development</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../../development/setup.md">Setup</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../development/testing.md">Testing</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../development/code-standards.md">Code Standards</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Deployment</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../../deployment/overview.md">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../deployment/production.md">Production</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../deployment/environment-variables.md">Environment Variables</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Betrieb</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../CUSTOMER_SUCCESS_RUNBOOK/">Customer Success</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../EMERGENCY_RESPONSE_PLAYBOOK/">Emergency Response</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../ERROR_PATTERNS/">Error Patterns</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../TROUBLESHOOTING_DECISION_TREE/">Troubleshooting</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../DEPLOYMENT_CHECKLIST/">Deployment Checklist</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Monitoring</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../KPI_DASHBOARD_TEMPLATE/">KPI Dashboard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../INTEGRATION_HEALTH_MONITOR/">Health Monitor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../PHONE_TO_APPOINTMENT_FLOW/">Phone to Appointment Flow</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">AskProAI Dokumentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Services Configuration</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="services-configuration">Services Configuration</h1>
<h2 id="overview">Overview</h2>
<p>This guide covers the configuration of all external services integrated with AskProAI. Each service has its own configuration file and environment variables.</p>
<h2 id="service-configuration-files">Service Configuration Files</h2>
<h3 id="directory-structure">Directory Structure</h3>
<pre><code>config/
├── services.php      # Main services configuration
├── retell.php        # Retell.ai specific config
├── calcom.php        # Cal.com specific config
├── stripe.php        # Stripe/payment config
├── sms.php          # SMS providers config
├── mail.php         # Email services config
└── monitoring.php   # Monitoring services config
</code></pre>
<h2 id="retellai-configuration">Retell.ai Configuration</h2>
<h3 id="configuration-file">Configuration File</h3>
<pre><code class="language-php">// config/retell.php
return [
    'api_key' =&gt; env('DEFAULT_RETELL_API_KEY'),
    'agent_id' =&gt; env('DEFAULT_RETELL_AGENT_ID'),
    'webhook_secret' =&gt; env('RETELL_WEBHOOK_SECRET'),
    'base_url' =&gt; env('RETELL_BASE_URL', 'https://api.retellai.com'),
    'version' =&gt; env('RETELL_API_VERSION', 'v2'),

    'timeout' =&gt; env('RETELL_TIMEOUT', 30),
    'retry_times' =&gt; env('RETELL_RETRY_TIMES', 3),
    'retry_delay' =&gt; env('RETELL_RETRY_DELAY', 1000),

    'sandbox' =&gt; [
        'enabled' =&gt; env('RETELL_SANDBOX_MODE', false),
        'api_key' =&gt; env('RETELL_SANDBOX_API_KEY'),
        'agent_id' =&gt; env('RETELL_SANDBOX_AGENT_ID'),
    ],

    'features' =&gt; [
        'voice_biometrics' =&gt; env('RETELL_VOICE_BIOMETRICS', false),
        'sentiment_analysis' =&gt; env('RETELL_SENTIMENT_ANALYSIS', true),
        'language_detection' =&gt; env('RETELL_LANGUAGE_DETECTION', true),
    ],

    'webhooks' =&gt; [
        'events' =&gt; ['call_started', 'call_ended', 'call_analyzed'],
        'signature_header' =&gt; 'x-retell-signature',
        'tolerance' =&gt; 300, // 5 minutes
    ],
];
</code></pre>
<h3 id="service-registration">Service Registration</h3>
<pre><code class="language-php">// app/Providers/AppServiceProvider.php
public function register()
{
    $this-&gt;app-&gt;singleton(RetellService::class, function ($app) {
        $config = config('retell');

        if ($config['sandbox']['enabled']) {
            return new RetellSandboxService($config['sandbox']);
        }

        return new RetellService($config);
    });
}
</code></pre>
<h3 id="multi-tenant-configuration">Multi-Tenant Configuration</h3>
<pre><code class="language-php">// Company-specific Retell configuration
class CompanyRetellService
{
    public function getConfig(Company $company): array
    {
        return [
            'api_key' =&gt; $company-&gt;retell_api_key ?? config('retell.api_key'),
            'agent_id' =&gt; $company-&gt;retell_agent_id ?? config('retell.agent_id'),
            'voice_settings' =&gt; $company-&gt;retell_voice_settings ?? [
                'voice_id' =&gt; 'eleven_multilingual_v2',
                'language' =&gt; 'de-DE',
                'speed' =&gt; 1.0,
            ],
        ];
    }
}
</code></pre>
<h2 id="calcom-configuration">Cal.com Configuration</h2>
<h3 id="configuration-file_1">Configuration File</h3>
<pre><code class="language-php">// config/calcom.php
return [
    'api_key' =&gt; env('DEFAULT_CALCOM_API_KEY'),
    'team_slug' =&gt; env('DEFAULT_CALCOM_TEAM_SLUG'),
    'organization_id' =&gt; env('CALCOM_ORGANIZATION_ID'),
    'webhook_secret' =&gt; env('CALCOM_WEBHOOK_SECRET'),

    'api' =&gt; [
        'base_url' =&gt; env('CALCOM_API_BASE_URL', 'https://api.cal.com'),
        'version' =&gt; env('CALCOM_API_VERSION', 'v2'),
        'timeout' =&gt; env('CALCOM_TIMEOUT', 30),
    ],

    'cache' =&gt; [
        'ttl' =&gt; env('CALCOM_CACHE_TTL', 300), // 5 minutes
        'prefix' =&gt; 'calcom',
    ],

    'booking' =&gt; [
        'default_timezone' =&gt; env('CALCOM_DEFAULT_TIMEZONE', 'Europe/Berlin'),
        'buffer_time' =&gt; env('CALCOM_BUFFER_TIME', 0),
        'future_days_limit' =&gt; env('CALCOM_FUTURE_DAYS', 60),
        'min_notice_hours' =&gt; env('CALCOM_MIN_NOTICE', 24),
    ],

    'webhooks' =&gt; [
        'events' =&gt; [
            'BOOKING_CREATED',
            'BOOKING_CANCELLED',
            'BOOKING_RESCHEDULED',
            'BOOKING_REQUESTED',
        ],
        'signature_header' =&gt; 'X-Cal-Signature-256',
    ],
];
</code></pre>
<h3 id="service-factory">Service Factory</h3>
<pre><code class="language-php">// app/Services/Calendar/CalendarServiceFactory.php
class CalendarServiceFactory
{
    public function make(string $provider, array $config = []): CalendarServiceInterface
    {
        return match($provider) {
            'calcom' =&gt; new CalcomV2Service($config),
            'google' =&gt; new GoogleCalendarService($config),
            'outlook' =&gt; new OutlookCalendarService($config),
            default =&gt; throw new UnsupportedCalendarException($provider),
        };
    }
}
</code></pre>
<h2 id="sms-configuration">SMS Configuration</h2>
<h3 id="multi-provider-setup">Multi-Provider Setup</h3>
<pre><code class="language-php">// config/sms.php
return [
    'default' =&gt; env('SMS_PROVIDER', 'twilio'),
    'fallback' =&gt; env('SMS_FALLBACK_PROVIDER', 'messagebird'),

    'providers' =&gt; [
        'twilio' =&gt; [
            'driver' =&gt; 'twilio',
            'sid' =&gt; env('TWILIO_SID'),
            'token' =&gt; env('TWILIO_TOKEN'),
            'from' =&gt; env('TWILIO_FROM'),
            'messaging_service_sid' =&gt; env('TWILIO_MESSAGING_SERVICE_SID'),
            'status_callback' =&gt; env('APP_URL') . '/webhooks/twilio/status',
        ],

        'messagebird' =&gt; [
            'driver' =&gt; 'messagebird',
            'access_key' =&gt; env('MESSAGEBIRD_ACCESS_KEY'),
            'originator' =&gt; env('MESSAGEBIRD_ORIGINATOR', 'AskProAI'),
            'datacoding' =&gt; 'auto',
        ],

        'vonage' =&gt; [
            'driver' =&gt; 'vonage',
            'key' =&gt; env('VONAGE_KEY'),
            'secret' =&gt; env('VONAGE_SECRET'),
            'from' =&gt; env('VONAGE_SMS_FROM', 'AskProAI'),
        ],
    ],

    'rate_limits' =&gt; [
        'per_minute' =&gt; env('SMS_RATE_LIMIT_MINUTE', 60),
        'per_hour' =&gt; env('SMS_RATE_LIMIT_HOUR', 1000),
        'per_day' =&gt; env('SMS_RATE_LIMIT_DAY', 10000),
    ],

    'templates' =&gt; [
        'path' =&gt; resource_path('sms-templates'),
        'cache' =&gt; env('SMS_TEMPLATE_CACHE', true),
        'locales' =&gt; ['de', 'en', 'es', 'fr'],
    ],
];
</code></pre>
<h3 id="provider-manager">Provider Manager</h3>
<pre><code class="language-php">// app/Services/SMS/SmsManager.php
class SmsManager
{
    private array $providers = [];
    private CircuitBreaker $circuitBreaker;

    public function send(string $to, string $message): bool
    {
        $provider = $this-&gt;getAvailableProvider();

        try {
            return $this-&gt;circuitBreaker-&gt;call(
                $provider-&gt;getName(),
                fn() =&gt; $provider-&gt;send($to, $message)
            );
        } catch (CircuitOpenException $e) {
            // Try fallback provider
            return $this-&gt;sendWithFallback($to, $message);
        }
    }

    private function getAvailableProvider(): SmsProviderInterface
    {
        $default = config('sms.default');

        if ($this-&gt;circuitBreaker-&gt;isAvailable($default)) {
            return $this-&gt;providers[$default];
        }

        // Find first available provider
        foreach ($this-&gt;providers as $name =&gt; $provider) {
            if ($this-&gt;circuitBreaker-&gt;isAvailable($name)) {
                return $provider;
            }
        }

        throw new NoAvailableSmsProviderException();
    }
}
</code></pre>
<h2 id="email-configuration">Email Configuration</h2>
<h3 id="multi-mailer-setup">Multi-Mailer Setup</h3>
<pre><code class="language-php">// config/mail.php
return [
    'default' =&gt; env('MAIL_MAILER', 'smtp'),

    'mailers' =&gt; [
        'smtp' =&gt; [
            'transport' =&gt; 'smtp',
            'host' =&gt; env('MAIL_HOST'),
            'port' =&gt; env('MAIL_PORT'),
            'encryption' =&gt; env('MAIL_ENCRYPTION'),
            'username' =&gt; env('MAIL_USERNAME'),
            'password' =&gt; env('MAIL_PASSWORD'),
            'timeout' =&gt; null,
            'local_domain' =&gt; env('MAIL_EHLO_DOMAIN'),
        ],

        'mailgun' =&gt; [
            'transport' =&gt; 'mailgun',
            'domain' =&gt; env('MAILGUN_DOMAIN'),
            'secret' =&gt; env('MAILGUN_SECRET'),
            'endpoint' =&gt; env('MAILGUN_ENDPOINT', 'api.eu.mailgun.net'),
        ],

        'postmark' =&gt; [
            'transport' =&gt; 'postmark',
            'token' =&gt; env('POSTMARK_TOKEN'),
            'message_stream_id' =&gt; env('POSTMARK_MESSAGE_STREAM_ID'),
        ],

        'ses' =&gt; [
            'transport' =&gt; 'ses',
            'key' =&gt; env('AWS_ACCESS_KEY_ID'),
            'secret' =&gt; env('AWS_SECRET_ACCESS_KEY'),
            'region' =&gt; env('AWS_DEFAULT_REGION', 'eu-central-1'),
        ],
    ],

    'from' =&gt; [
        'address' =&gt; env('MAIL_FROM_ADDRESS', 'noreply@askproai.de'),
        'name' =&gt; env('MAIL_FROM_NAME', 'AskProAI'),
    ],

    'markdown' =&gt; [
        'theme' =&gt; 'askproai',
        'paths' =&gt; [
            resource_path('views/vendor/mail'),
        ],
    ],
];
</code></pre>
<h3 id="email-service-manager">Email Service Manager</h3>
<pre><code class="language-php">// app/Services/Email/EmailServiceManager.php
class EmailServiceManager
{
    public function sendTransactional(Mailable $mailable, string $to): void
    {
        // Use high-priority mailer for transactional emails
        Mail::mailer('postmark')
            -&gt;to($to)
            -&gt;queue($mailable-&gt;onQueue('emails-priority'));
    }

    public function sendMarketing(Mailable $mailable, Collection $recipients): void
    {
        // Use bulk mailer for marketing
        Mail::mailer('mailgun')
            -&gt;bcc($recipients-&gt;pluck('email'))
            -&gt;queue($mailable-&gt;onQueue('emails-bulk'));
    }

    public function sendSystemAlert(string $message, string $to): void
    {
        // Use most reliable mailer for system alerts
        Mail::mailer('ses')
            -&gt;to($to)
            -&gt;send(new SystemAlert($message));
    }
}
</code></pre>
<h2 id="payment-configuration">Payment Configuration</h2>
<h3 id="stripe-setup">Stripe Setup</h3>
<pre><code class="language-php">// config/stripe.php
return [
    'key' =&gt; env('STRIPE_KEY'),
    'secret' =&gt; env('STRIPE_SECRET'),
    'webhook' =&gt; [
        'secret' =&gt; env('STRIPE_WEBHOOK_SECRET'),
        'tolerance' =&gt; env('STRIPE_WEBHOOK_TOLERANCE', 300),
    ],

    'api_version' =&gt; env('STRIPE_API_VERSION', '2023-10-16'),

    'plans' =&gt; [
        'starter' =&gt; [
            'price_id' =&gt; env('STRIPE_PRICE_STARTER'),
            'features' =&gt; [
                'calls_per_month' =&gt; 100,
                'branches' =&gt; 1,
                'users' =&gt; 3,
            ],
        ],
        'professional' =&gt; [
            'price_id' =&gt; env('STRIPE_PRICE_PROFESSIONAL'),
            'features' =&gt; [
                'calls_per_month' =&gt; 500,
                'branches' =&gt; 3,
                'users' =&gt; 10,
            ],
        ],
        'enterprise' =&gt; [
            'price_id' =&gt; env('STRIPE_PRICE_ENTERPRISE'),
            'features' =&gt; [
                'calls_per_month' =&gt; 'unlimited',
                'branches' =&gt; 'unlimited',
                'users' =&gt; 'unlimited',
            ],
        ],
    ],

    'metered_billing' =&gt; [
        'call_overage' =&gt; env('STRIPE_PRICE_PER_CALL'),
        'sms_overage' =&gt; env('STRIPE_PRICE_PER_SMS'),
    ],

    'currency' =&gt; env('CASHIER_CURRENCY', 'eur'),
    'currency_locale' =&gt; env('CASHIER_CURRENCY_LOCALE', 'de_DE'),
];
</code></pre>
<h2 id="monitoring-services">Monitoring Services</h2>
<h3 id="configuration">Configuration</h3>
<pre><code class="language-php">// config/monitoring.php
return [
    'sentry' =&gt; [
        'enabled' =&gt; env('SENTRY_ENABLED', true),
        'dsn' =&gt; env('SENTRY_LARAVEL_DSN'),
        'environment' =&gt; env('SENTRY_ENVIRONMENT', env('APP_ENV')),
        'traces_sample_rate' =&gt; env('SENTRY_TRACES_SAMPLE_RATE', 0.1),
        'profiles_sample_rate' =&gt; env('SENTRY_PROFILES_SAMPLE_RATE', 0.1),
    ],

    'newrelic' =&gt; [
        'enabled' =&gt; env('NEW_RELIC_ENABLED', false),
        'app_name' =&gt; env('NEW_RELIC_APP_NAME'),
        'license_key' =&gt; env('NEW_RELIC_LICENSE_KEY'),
    ],

    'cloudwatch' =&gt; [
        'enabled' =&gt; env('CLOUDWATCH_ENABLED', false),
        'region' =&gt; env('AWS_DEFAULT_REGION'),
        'log_group' =&gt; env('CLOUDWATCH_LOG_GROUP'),
        'log_stream' =&gt; env('CLOUDWATCH_LOG_STREAM'),
    ],

    'health_checks' =&gt; [
        'database' =&gt; true,
        'redis' =&gt; true,
        'retell' =&gt; true,
        'calcom' =&gt; true,
        'stripe' =&gt; true,
        'mail' =&gt; true,
        'sms' =&gt; true,
    ],
];
</code></pre>
<h2 id="service-health-checks">Service Health Checks</h2>
<h3 id="health-check-configuration">Health Check Configuration</h3>
<pre><code class="language-php">// app/Services/HealthCheck/HealthCheckManager.php
class HealthCheckManager
{
    private array $checks = [];

    public function register(string $name, HealthCheckInterface $check): void
    {
        $this-&gt;checks[$name] = $check;
    }

    public function runAll(): HealthReport
    {
        $results = [];

        foreach ($this-&gt;checks as $name =&gt; $check) {
            try {
                $results[$name] = $check-&gt;check();
            } catch (\Exception $e) {
                $results[$name] = new HealthCheckResult(
                    status: 'failed',
                    message: $e-&gt;getMessage()
                );
            }
        }

        return new HealthReport($results);
    }
}
</code></pre>
<h3 id="service-specific-health-checks">Service-Specific Health Checks</h3>
<pre><code class="language-php">// app/Services/HealthCheck/Checks/RetellHealthCheck.php
class RetellHealthCheck implements HealthCheckInterface
{
    public function check(): HealthCheckResult
    {
        try {
            $response = Http::timeout(5)
                -&gt;withHeaders(['Authorization' =&gt; 'Bearer ' . config('retell.api_key')])
                -&gt;get(config('retell.base_url') . '/health');

            if ($response-&gt;successful()) {
                return new HealthCheckResult('healthy', 'Retell API is operational');
            }

            return new HealthCheckResult('degraded', 'Retell API returned ' . $response-&gt;status());
        } catch (\Exception $e) {
            return new HealthCheckResult('unhealthy', 'Retell API is unreachable: ' . $e-&gt;getMessage());
        }
    }
}
</code></pre>
<h2 id="circuit-breaker-configuration">Circuit Breaker Configuration</h2>
<h3 id="global-circuit-breaker-settings">Global Circuit Breaker Settings</h3>
<pre><code class="language-php">// config/circuit-breaker.php
return [
    'defaults' =&gt; [
        'failure_threshold' =&gt; 5,
        'success_threshold' =&gt; 2,
        'timeout' =&gt; 60,
        'time_window' =&gt; 120,
    ],

    'services' =&gt; [
        'retell' =&gt; [
            'failure_threshold' =&gt; 3,
            'timeout' =&gt; 30,
        ],
        'calcom' =&gt; [
            'failure_threshold' =&gt; 5,
            'timeout' =&gt; 60,
        ],
        'stripe' =&gt; [
            'failure_threshold' =&gt; 2,
            'timeout' =&gt; 120,
        ],
        'sms' =&gt; [
            'failure_threshold' =&gt; 10,
            'timeout' =&gt; 300,
        ],
    ],
];
</code></pre>
<h2 id="rate-limiting-configuration">Rate Limiting Configuration</h2>
<h3 id="api-rate-limits">API Rate Limits</h3>
<pre><code class="language-php">// app/Http/Kernel.php
protected $middlewareGroups = [
    'api' =&gt; [
        'throttle:api',
        \Illuminate\Routing\Middleware\SubstituteBindings::class,
    ],
];

// config/rate-limiting.php
return [
    'api' =&gt; [
        'default' =&gt; env('API_RATE_LIMIT', 60),
        'premium' =&gt; env('API_RATE_LIMIT_PREMIUM', 300),
        'enterprise' =&gt; env('API_RATE_LIMIT_ENTERPRISE', 1000),
    ],

    'webhooks' =&gt; [
        'retell' =&gt; 100,
        'calcom' =&gt; 100,
        'stripe' =&gt; 50,
    ],

    'internal' =&gt; [
        'sms' =&gt; 60,
        'email' =&gt; 100,
        'calls' =&gt; 30,
    ],
];
</code></pre>
<h2 id="feature-flag-configuration">Feature Flag Configuration</h2>
<h3 id="feature-management">Feature Management</h3>
<pre><code class="language-php">// config/features.php
return [
    'customer_portal' =&gt; env('FEATURE_CUSTOMER_PORTAL', false),
    'sms_notifications' =&gt; env('FEATURE_SMS_NOTIFICATIONS', true),
    'whatsapp_integration' =&gt; env('FEATURE_WHATSAPP_INTEGRATION', false),
    'multi_language' =&gt; env('FEATURE_MULTI_LANGUAGE', true),
    'advanced_analytics' =&gt; env('FEATURE_ADVANCED_ANALYTICS', true),
    'unified_services' =&gt; env('FEATURE_UNIFIED_SERVICES', false),

    'experimental' =&gt; [
        'ai_insights' =&gt; env('FEATURE_AI_INSIGHTS', false),
        'voice_biometrics' =&gt; env('FEATURE_VOICE_BIOMETRICS', false),
        'predictive_scheduling' =&gt; env('FEATURE_PREDICTIVE_SCHEDULING', false),
    ],
];

// Usage
if (feature('customer_portal')) {
    // Enable customer portal routes
}
</code></pre>
<h2 id="related-documentation">Related Documentation</h2>
<ul>
<li><a href="../environment/">Environment Configuration</a></li>
<li><a href="../security/">Security Configuration</a></li>
<li><a href="../cache/">Cache Configuration</a></li>
<li><a href="../queues/">Queue Configuration</a></li>
</ul>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme_extra.js" defer></script>
    <script src="../../../js/theme.js" defer></script>
      <script src="../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
