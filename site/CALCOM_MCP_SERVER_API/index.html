<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://api.askproai.de/mkdocs/CALCOM_MCP_SERVER_API/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>CalcomMCPServer API Documentation - AskProAI Dokumentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "CalcomMCPServer API Documentation";
        var mkdocs_page_input_path = "CALCOM_MCP_SERVER_API.md";
        var mkdocs_page_url = "/mkdocs/CALCOM_MCP_SERVER_API/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> AskProAI Dokumentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Start</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Hauptdokumentation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../CLAUDE/">Projekt Übersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CLAUDE_QUICK_REFERENCE/">Quick Reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CLAUDE_CONTEXT_SUMMARY/">Context Summary</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Power User</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../TOP_10_COMMANDS/">Top 10 Commands</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CLAUDE_BEFEHLE_FUER_DICH/">Claude Befehle für dich</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MY_COMMANDS/">Meine Commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Best Practices 2025</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../BEST_PRACTICES_IMPLEMENTATION/">Implementation Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../DEVELOPMENT_PROCESS_2025/">Development Process</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../CLAUDE_DOCUMENTATION_GAPS_ANALYSIS.md">Documentation Gaps</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Schnellstart</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../5-MINUTEN_ONBOARDING_PLAYBOOK/">5-Minuten Onboarding</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Architektur</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/overview/">Übersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/services/">Services</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/system-design/">System Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/mcp-architecture/">MCP Architecture</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/database-schema/">Database Schema</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/security/">Security</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/performance/">Performance</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../api/overview.md">Übersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api/authentication/">Authentication</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../api/endpoints.md">Endpoints</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api/webhooks/">Webhooks</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Features</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../features/appointment-booking/">Appointment Booking</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../features/call-management.md">Call Management</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../features/customer-portal.md">Customer Portal</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../features/multi-tenancy/">Multi-Tenancy</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Development</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../development/setup.md">Setup</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../development/testing.md">Testing</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../development/code-standards.md">Code Standards</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Deployment</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../deployment/overview.md">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../deployment/production.md">Production</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../deployment/environment-variables.md">Environment Variables</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Betrieb</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../CUSTOMER_SUCCESS_RUNBOOK/">Customer Success</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../EMERGENCY_RESPONSE_PLAYBOOK/">Emergency Response</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ERROR_PATTERNS/">Error Patterns</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../TROUBLESHOOTING_DECISION_TREE/">Troubleshooting</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../DEPLOYMENT_CHECKLIST/">Deployment Checklist</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Monitoring</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../KPI_DASHBOARD_TEMPLATE/">KPI Dashboard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../INTEGRATION_HEALTH_MONITOR/">Health Monitor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../PHONE_TO_APPOINTMENT_FLOW/">Phone to Appointment Flow</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">AskProAI Dokumentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>CalcomMCPServer API Documentation</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="calcommcpserver-api-documentation">CalcomMCPServer API Documentation</h1>
<p>The CalcomMCPServer provides a robust interface to Cal.com with built-in caching, circuit breaker protection, and retry logic.</p>
<h2 id="features">Features</h2>
<ul>
<li><strong>Circuit Breaker Protection</strong>: Prevents cascading failures when Cal.com is unavailable</li>
<li><strong>Response Caching</strong>: Reduces API calls and improves performance</li>
<li><strong>Retry Logic</strong>: Automatic retry with exponential backoff for transient failures</li>
<li><strong>Idempotency</strong>: Prevents duplicate bookings with idempotency keys</li>
<li><strong>Alternative Slot Finder</strong>: Intelligent algorithm to find alternative time slots</li>
</ul>
<h2 id="methods">Methods</h2>
<h3 id="checkavailabilityarray-params-array">checkAvailability(array $params): array</h3>
<p>Checks availability for a specific event type with caching.</p>
<p><strong>Parameters:</strong>
- <code>company_id</code> (required): Company ID
- <code>event_type_id</code> (required): Cal.com event type ID
- <code>date_from</code> (optional): Start date (default: today)
- <code>date_to</code> (optional): End date (default: +7 days)
- <code>timezone</code> (optional): Timezone (default: Europe/Berlin)</p>
<p><strong>Response:</strong></p>
<pre><code class="language-json">{
    &quot;success&quot;: true,
    &quot;available_slots&quot;: [...],
    &quot;date_range&quot;: {
        &quot;from&quot;: &quot;2025-06-21&quot;,
        &quot;to&quot;: &quot;2025-06-28&quot;
    },
    &quot;event_type_id&quot;: 2026361,
    &quot;timezone&quot;: &quot;Europe/Berlin&quot;,
    &quot;cached_until&quot;: &quot;2025-06-21T10:35:00+00:00&quot;
}
</code></pre>
<h3 id="createbookingarray-params-array">createBooking(array $params): array</h3>
<p>Creates a booking with retry logic and idempotency protection.</p>
<p><strong>Parameters:</strong>
- <code>company_id</code> (required): Company ID
- <code>event_type_id</code> (required): Cal.com event type ID
- <code>start</code> (required): Start time (ISO 8601 format)
- <code>end</code> (optional): End time (calculated from event type if not provided)
- <code>name</code> (required): Customer name
- <code>email</code> (required): Customer email
- <code>phone</code> (optional): Customer phone
- <code>notes</code> (optional): Booking notes
- <code>timezone</code> (optional): Timezone (default: Europe/Berlin)
- <code>metadata</code> (optional): Additional metadata</p>
<p><strong>Response:</strong></p>
<pre><code class="language-json">{
    &quot;success&quot;: true,
    &quot;booking&quot;: {
        &quot;id&quot;: 12345,
        &quot;uid&quot;: &quot;abc123&quot;,
        &quot;start&quot;: &quot;2025-06-22T10:00:00Z&quot;,
        &quot;end&quot;: &quot;2025-06-22T10:30:00Z&quot;,
        &quot;status&quot;: &quot;ACCEPTED&quot;,
        &quot;event_type_id&quot;: 2026361
    },
    &quot;message&quot;: &quot;Booking created successfully&quot;,
    &quot;attempts&quot;: 1
}
</code></pre>
<h3 id="updatebookingarray-params-array">updateBooking(array $params): array</h3>
<p>Updates an existing booking.</p>
<p><strong>Parameters:</strong>
- <code>company_id</code> (required): Company ID
- <code>booking_id</code> (required): Booking ID
- <code>start</code> (optional): New start time
- <code>end</code> (optional): New end time
- <code>title</code> (optional): New title
- <code>description</code> (optional): New description
- <code>reschedule_reason</code> (optional): Reason for rescheduling</p>
<p><strong>Response:</strong></p>
<pre><code class="language-json">{
    &quot;success&quot;: true,
    &quot;booking&quot;: {...},
    &quot;message&quot;: &quot;Booking updated successfully&quot;
}
</code></pre>
<h3 id="cancelbookingarray-params-array">cancelBooking(array $params): array</h3>
<p>Cancels a booking.</p>
<p><strong>Parameters:</strong>
- <code>company_id</code> (required): Company ID
- <code>booking_id</code> (required): Booking ID
- <code>cancellation_reason</code> (optional): Reason for cancellation</p>
<p><strong>Response:</strong></p>
<pre><code class="language-json">{
    &quot;success&quot;: true,
    &quot;message&quot;: &quot;Booking cancelled successfully&quot;,
    &quot;booking_id&quot;: 12345,
    &quot;cancelled_at&quot;: &quot;2025-06-21T10:00:00+00:00&quot;
}
</code></pre>
<h3 id="findalternativeslotsarray-params-array">findAlternativeSlots(array $params): array</h3>
<p>Finds alternative time slots when the preferred slot is not available.</p>
<p><strong>Parameters:</strong>
- <code>company_id</code> (required): Company ID
- <code>event_type_id</code> (required): Cal.com event type ID
- <code>preferred_start</code> (required): Preferred start time
- <code>search_days</code> (optional): Days to search (default: 7)
- <code>max_alternatives</code> (optional): Maximum alternatives to return (default: 5)
- <code>timezone</code> (optional): Timezone (default: Europe/Berlin)</p>
<p><strong>Response:</strong></p>
<pre><code class="language-json">{
    &quot;success&quot;: true,
    &quot;preferred_start&quot;: &quot;2025-06-22T09:00:00+00:00&quot;,
    &quot;alternatives&quot;: [
        {
            &quot;start&quot;: &quot;2025-06-22T10:00:00Z&quot;,
            &quot;end&quot;: &quot;2025-06-22T10:30:00Z&quot;,
            &quot;date&quot;: &quot;2025-06-22&quot;,
            &quot;time&quot;: &quot;10:00&quot;,
            &quot;day_of_week&quot;: &quot;Saturday&quot;,
            &quot;days_from_preferred&quot;: 0
        }
    ],
    &quot;search_period&quot;: {
        &quot;from&quot;: &quot;2025-06-22&quot;,
        &quot;to&quot;: &quot;2025-06-29&quot;
    },
    &quot;total_available&quot;: 15,
    &quot;message&quot;: &quot;Alternative slots found&quot;
}
</code></pre>
<h2 id="circuit-breaker-states">Circuit Breaker States</h2>
<p>The circuit breaker has three states:</p>
<ol>
<li><strong>CLOSED</strong>: Normal operation, all requests go through</li>
<li><strong>OPEN</strong>: Service is down, requests fail fast with fallback</li>
<li><strong>HALF_OPEN</strong>: Testing if service is back up</li>
</ol>
<p>Configuration:
- Failure threshold: 5 failures
- Success threshold: 2 successes to close
- Timeout: 60 seconds
- Half-open requests: 3 test requests</p>
<h2 id="caching-strategy">Caching Strategy</h2>
<ul>
<li>Event types: Cached for 5 minutes</li>
<li>Availability: Cached for 5 minutes with smart key generation</li>
<li>Bookings: Idempotency cache for 24 hours</li>
<li>Cache is automatically cleared on updates</li>
</ul>
<h2 id="error-handling">Error Handling</h2>
<p>All methods return a consistent error format:</p>
<pre><code class="language-json">{
    &quot;success&quot;: false,
    &quot;error&quot;: &quot;error_type&quot;,
    &quot;message&quot;: &quot;Human readable error message&quot;,
    &quot;circuit_breaker_open&quot;: true // When circuit is open
}
</code></pre>
<p>Error types:
- <code>validation_error</code>: Invalid input parameters
- <code>configuration_error</code>: Company or Cal.com not configured
- <code>service_unavailable</code>: Circuit breaker is open
- <code>booking_failed</code>: Booking creation failed
- <code>update_failed</code>: Update operation failed
- <code>cancellation_failed</code>: Cancellation failed
- <code>exception</code>: General exception occurred</p>
<h2 id="usage-example">Usage Example</h2>
<pre><code class="language-php">use App\Services\MCP\CalcomMCPServer;

$mcpServer = new CalcomMCPServer();

// Check availability
$availability = $mcpServer-&gt;checkAvailability([
    'company_id' =&gt; 1,
    'event_type_id' =&gt; 2026361,
    'date_from' =&gt; '2025-06-21',
    'date_to' =&gt; '2025-06-28'
]);

// Create booking
if ($availability['success']) {
    $booking = $mcpServer-&gt;createBooking([
        'company_id' =&gt; 1,
        'event_type_id' =&gt; 2026361,
        'start' =&gt; '2025-06-22T10:00:00Z',
        'name' =&gt; 'John Doe',
        'email' =&gt; 'john@example.com',
        'phone' =&gt; '+49 30 12345678'
    ]);
}
</code></pre>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
