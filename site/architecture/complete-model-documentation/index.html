<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://api.askproai.de/mkdocs/architecture/complete-model-documentation/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Complete Model Documentation - AskProAI Dokumentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Complete Model Documentation";
        var mkdocs_page_input_path = "architecture/complete-model-documentation.md";
        var mkdocs_page_url = "/mkdocs/architecture/complete-model-documentation/";
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> AskProAI Dokumentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Start</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Hauptdokumentation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../CLAUDE/">Projekt √úbersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../CLAUDE_QUICK_REFERENCE/">Quick Reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../CLAUDE_CONTEXT_SUMMARY/">Context Summary</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Power User</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../TOP_10_COMMANDS/">Top 10 Commands</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../CLAUDE_BEFEHLE_FUER_DICH/">Claude Befehle f√ºr dich</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../MY_COMMANDS/">Meine Commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Best Practices 2025</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../BEST_PRACTICES_IMPLEMENTATION/">Implementation Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../DEVELOPMENT_PROCESS_2025/">Development Process</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../CLAUDE_DOCUMENTATION_GAPS_ANALYSIS.md">Documentation Gaps</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Schnellstart</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../5-MINUTEN_ONBOARDING_PLAYBOOK/">5-Minuten Onboarding</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Architektur</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../overview/">√úbersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../services/">Services</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../system-design/">System Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mcp-architecture/">MCP Architecture</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../database-schema/">Database Schema</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../security/">Security</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../performance/">Performance</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../api/overview.md">√úbersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/authentication/">Authentication</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../api/endpoints.md">Endpoints</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/webhooks/">Webhooks</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Features</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../features/appointment-booking/">Appointment Booking</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../features/call-management.md">Call Management</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../features/customer-portal.md">Customer Portal</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../features/multi-tenancy/">Multi-Tenancy</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Development</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../development/setup.md">Setup</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../development/testing.md">Testing</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../development/code-standards.md">Code Standards</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Deployment</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../deployment/overview.md">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../deployment/production.md">Production</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../deployment/environment-variables.md">Environment Variables</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Betrieb</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../CUSTOMER_SUCCESS_RUNBOOK/">Customer Success</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../EMERGENCY_RESPONSE_PLAYBOOK/">Emergency Response</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../ERROR_PATTERNS/">Error Patterns</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../TROUBLESHOOTING_DECISION_TREE/">Troubleshooting</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../DEPLOYMENT_CHECKLIST/">Deployment Checklist</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Monitoring</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../KPI_DASHBOARD_TEMPLATE/">KPI Dashboard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../INTEGRATION_HEALTH_MONITOR/">Health Monitor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../PHONE_TO_APPOINTMENT_FLOW/">Phone to Appointment Flow</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">AskProAI Dokumentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Complete Model Documentation</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="complete-model-documentation">Complete Model Documentation</h1>
<p>Generated on: 2025-06-23</p>
<h2 id="model-overview">Model Overview</h2>
<p>The AskProAI platform uses <strong>75 Eloquent models</strong> to represent the business domain. All models implement multi-tenancy through the <code>company_id</code> field where applicable.</p>
<h2 id="core-domain-models">Core Domain Models</h2>
<h3 id="company-organization">üè¢ Company &amp; Organization</h3>
<h4 id="company">Company</h4>
<ul>
<li><strong>Table</strong>: <code>companies</code></li>
<li><strong>Purpose</strong>: Root tenant model for multi-tenancy</li>
<li><strong>Key Fields</strong>: name, slug, settings (JSON), is_active, subscription_status</li>
<li><strong>Relations</strong>: hasMany branches, staff, customers, appointments</li>
</ul>
<h4 id="branch">Branch</h4>
<ul>
<li><strong>Table</strong>: <code>branches</code></li>
<li><strong>Purpose</strong>: Physical locations/outlets of a company</li>
<li><strong>Key Fields</strong>: name, address, phone_number, email, timezone, is_active</li>
<li><strong>Relations</strong>: belongsTo company, hasMany staff, appointments, phoneNumbers</li>
</ul>
<h4 id="brancheventtype">BranchEventType</h4>
<ul>
<li><strong>Table</strong>: <code>branch_event_types</code></li>
<li><strong>Purpose</strong>: Links Cal.com event types to branches</li>
<li><strong>Key Fields</strong>: branch_id, calcom_event_type_id, is_active</li>
<li><strong>Relations</strong>: belongsTo branch, calcomEventType</li>
</ul>
<h3 id="people-models">üë• People Models</h3>
<h4 id="customer">Customer</h4>
<ul>
<li><strong>Table</strong>: <code>customers</code></li>
<li><strong>Purpose</strong>: Customer records with contact information</li>
<li><strong>Key Fields</strong>: name, email, phone, tags (JSON), preferences (JSON)</li>
<li><strong>Relations</strong>: belongsTo company, hasMany appointments, calls</li>
</ul>
<h4 id="staff">Staff</h4>
<ul>
<li><strong>Table</strong>: <code>staff</code></li>
<li><strong>Purpose</strong>: Employees who provide services</li>
<li><strong>Key Fields</strong>: name, email, phone, home_branch_id, is_active</li>
<li><strong>Relations</strong>: belongsTo company, branch, hasMany appointments, staffEventTypes</li>
</ul>
<h4 id="user">User</h4>
<ul>
<li><strong>Table</strong>: <code>users</code></li>
<li><strong>Purpose</strong>: System users for authentication</li>
<li><strong>Key Fields</strong>: name, email, password, company_id, staff_id</li>
<li><strong>Relations</strong>: belongsTo company, staff, hasMany roles</li>
</ul>
<h3 id="appointment-models">üìÖ Appointment Models</h3>
<h4 id="appointment">Appointment</h4>
<ul>
<li><strong>Table</strong>: <code>appointments</code></li>
<li><strong>Purpose</strong>: Core appointment/booking records</li>
<li><strong>Key Fields</strong>: starts_at, ends_at, status, customer_id, staff_id, service_id</li>
<li><strong>Relations</strong>: belongsTo customer, staff, service, branch, call</li>
</ul>
<h4 id="appointmentnote">AppointmentNote</h4>
<ul>
<li><strong>Table</strong>: <code>appointment_notes</code></li>
<li><strong>Purpose</strong>: Notes and comments on appointments</li>
<li><strong>Key Fields</strong>: appointment_id, user_id, content, is_internal</li>
<li><strong>Relations</strong>: belongsTo appointment, user</li>
</ul>
<h4 id="appointmentreminder">AppointmentReminder</h4>
<ul>
<li><strong>Table</strong>: <code>appointment_reminders</code></li>
<li><strong>Purpose</strong>: Scheduled reminders for appointments</li>
<li><strong>Key Fields</strong>: appointment_id, type, scheduled_at, sent_at</li>
<li><strong>Relations</strong>: belongsTo appointment</li>
</ul>
<h3 id="phone-system-models">üìû Phone System Models</h3>
<h4 id="call">Call</h4>
<ul>
<li><strong>Table</strong>: <code>calls</code></li>
<li><strong>Purpose</strong>: Phone call records from Retell.ai</li>
<li><strong>Key Fields</strong>: call_id, phone_number, duration, transcript, analysis (JSON)</li>
<li><strong>Relations</strong>: hasOne appointment, belongsTo customer</li>
</ul>
<h4 id="phonenumber">PhoneNumber</h4>
<ul>
<li><strong>Table</strong>: <code>phone_numbers</code></li>
<li><strong>Purpose</strong>: Phone numbers assigned to branches</li>
<li><strong>Key Fields</strong>: phone_number, branch_id, retell_agent_id, is_active</li>
<li><strong>Relations</strong>: belongsTo branch</li>
</ul>
<h4 id="callbackrequest">CallbackRequest</h4>
<ul>
<li><strong>Table</strong>: <code>callback_requests</code></li>
<li><strong>Purpose</strong>: Customer callback requests</li>
<li><strong>Key Fields</strong>: phone_number, preferred_time, status, assigned_to</li>
<li><strong>Relations</strong>: belongsTo customer, staff</li>
</ul>
<h3 id="service-models">üõçÔ∏è Service Models</h3>
<h4 id="service">Service</h4>
<ul>
<li><strong>Table</strong>: <code>services</code></li>
<li><strong>Purpose</strong>: Services offered by branches</li>
<li><strong>Key Fields</strong>: name, description, duration, price, branch_id</li>
<li><strong>Relations</strong>: belongsTo branch, hasMany appointments</li>
</ul>
<h4 id="masterservice">MasterService</h4>
<ul>
<li><strong>Table</strong>: <code>master_services</code></li>
<li><strong>Purpose</strong>: Company-wide service templates</li>
<li><strong>Key Fields</strong>: name, description, default_duration, default_price</li>
<li><strong>Relations</strong>: belongsTo company, hasMany branchServiceOverrides</li>
</ul>
<h4 id="servicecategory">ServiceCategory</h4>
<ul>
<li><strong>Table</strong>: <code>service_categories</code></li>
<li><strong>Purpose</strong>: Categories for organizing services</li>
<li><strong>Key Fields</strong>: name, slug, parent_id, sort_order</li>
<li><strong>Relations</strong>: hasMany services, belongsTo parent</li>
</ul>
<h3 id="calendar-integration-models">üìÖ Calendar Integration Models</h3>
<h4 id="calcomeventtype">CalcomEventType</h4>
<ul>
<li><strong>Table</strong>: <code>calcom_event_types</code></li>
<li><strong>Purpose</strong>: Cached Cal.com event types</li>
<li><strong>Key Fields</strong>: event_type_id, title, slug, length, price</li>
<li><strong>Relations</strong>: hasMany staffEventTypes, branchEventTypes</li>
</ul>
<h4 id="staffeventtype">StaffEventType</h4>
<ul>
<li><strong>Table</strong>: <code>staff_event_types</code></li>
<li><strong>Purpose</strong>: Links staff to Cal.com event types</li>
<li><strong>Key Fields</strong>: staff_id, calcom_event_type_id, is_primary</li>
<li><strong>Relations</strong>: belongsTo staff, calcomEventType</li>
</ul>
<h4 id="calcombooking">CalcomBooking</h4>
<ul>
<li><strong>Table</strong>: <code>calcom_bookings</code></li>
<li><strong>Purpose</strong>: Cal.com booking records</li>
<li><strong>Key Fields</strong>: booking_uid, event_type_id, start_time, end_time</li>
<li><strong>Relations</strong>: belongsTo appointment</li>
</ul>
<h3 id="notification-models">üîî Notification Models</h3>
<h4 id="notification">Notification</h4>
<ul>
<li><strong>Table</strong>: <code>notifications</code></li>
<li><strong>Purpose</strong>: System notifications</li>
<li><strong>Key Fields</strong>: type, notifiable_type, notifiable_id, data (JSON)</li>
<li><strong>Relations</strong>: morphTo notifiable</li>
</ul>
<h4 id="notificationtemplate">NotificationTemplate</h4>
<ul>
<li><strong>Table</strong>: <code>notification_templates</code></li>
<li><strong>Purpose</strong>: Email/SMS templates</li>
<li><strong>Key Fields</strong>: name, type, subject, content, variables (JSON)</li>
<li><strong>Relations</strong>: belongsTo company</li>
</ul>
<h3 id="analytics-models">üìä Analytics Models</h3>
<h4 id="metricsnapshot">MetricSnapshot</h4>
<ul>
<li><strong>Table</strong>: <code>metric_snapshots</code></li>
<li><strong>Purpose</strong>: Historical metric data</li>
<li><strong>Key Fields</strong>: metric_type, value, metadata (JSON), recorded_at</li>
<li><strong>Relations</strong>: belongsTo company, branch</li>
</ul>
<h4 id="conversiontracking">ConversionTracking</h4>
<ul>
<li><strong>Table</strong>: <code>conversion_trackings</code></li>
<li><strong>Purpose</strong>: Track call-to-appointment conversions</li>
<li><strong>Key Fields</strong>: call_id, appointment_id, conversion_time</li>
<li><strong>Relations</strong>: belongsTo call, appointment</li>
</ul>
<h3 id="security-audit-models">üîê Security &amp; Audit Models</h3>
<h4 id="auditlog">AuditLog</h4>
<ul>
<li><strong>Table</strong>: <code>audit_logs</code></li>
<li><strong>Purpose</strong>: Track all system changes</li>
<li><strong>Key Fields</strong>: user_id, action, model_type, model_id, changes (JSON)</li>
<li><strong>Relations</strong>: belongsTo user, morphTo auditable</li>
</ul>
<h4 id="apitoken">ApiToken</h4>
<ul>
<li><strong>Table</strong>: <code>api_tokens</code></li>
<li><strong>Purpose</strong>: API authentication tokens</li>
<li><strong>Key Fields</strong>: tokenable_type, tokenable_id, token, abilities (JSON)</li>
<li><strong>Relations</strong>: morphTo tokenable</li>
</ul>
<h3 id="webhook-models">üîÑ Webhook Models</h3>
<h4 id="webhookevent">WebhookEvent</h4>
<ul>
<li><strong>Table</strong>: <code>webhook_events</code></li>
<li><strong>Purpose</strong>: Incoming webhook storage</li>
<li><strong>Key Fields</strong>: provider, event_type, payload (JSON), processed_at</li>
<li><strong>Relations</strong>: hasMany webhookProcessingLogs</li>
</ul>
<h4 id="webhookendpoint">WebhookEndpoint</h4>
<ul>
<li><strong>Table</strong>: <code>webhook_endpoints</code></li>
<li><strong>Purpose</strong>: Configured webhook endpoints</li>
<li><strong>Key Fields</strong>: url, secret, events (JSON), is_active</li>
<li><strong>Relations</strong>: belongsTo company</li>
</ul>
<h3 id="financial-models">üí∞ Financial Models</h3>
<h4 id="invoice">Invoice</h4>
<ul>
<li><strong>Table</strong>: <code>invoices</code></li>
<li><strong>Purpose</strong>: Customer invoices</li>
<li><strong>Key Fields</strong>: invoice_number, amount, status, due_date</li>
<li><strong>Relations</strong>: belongsTo customer, hasMany lineItems</li>
</ul>
<h4 id="payment">Payment</h4>
<ul>
<li><strong>Table</strong>: <code>payments</code></li>
<li><strong>Purpose</strong>: Payment records</li>
<li><strong>Key Fields</strong>: amount, method, status, transaction_id</li>
<li><strong>Relations</strong>: belongsTo invoice, customer</li>
</ul>
<h4 id="subscription">Subscription</h4>
<ul>
<li><strong>Table</strong>: <code>subscriptions</code></li>
<li><strong>Purpose</strong>: Company subscriptions</li>
<li><strong>Key Fields</strong>: plan_id, status, starts_at, ends_at</li>
<li><strong>Relations</strong>: belongsTo company</li>
</ul>
<h3 id="feature-configuration-models">üöÄ Feature &amp; Configuration Models</h3>
<h4 id="featureflag">FeatureFlag</h4>
<ul>
<li><strong>Table</strong>: <code>feature_flags</code></li>
<li><strong>Purpose</strong>: Feature toggles</li>
<li><strong>Key Fields</strong>: name, enabled, config (JSON), rollout_percentage</li>
<li><strong>Relations</strong>: belongsToMany companies</li>
</ul>
<h4 id="systemsetting">SystemSetting</h4>
<ul>
<li><strong>Table</strong>: <code>system_settings</code></li>
<li><strong>Purpose</strong>: Global system configuration</li>
<li><strong>Key Fields</strong>: key, value (JSON), is_public</li>
<li><strong>Relations</strong>: none (global)</li>
</ul>
<h3 id="content-models">üìù Content Models</h3>
<h4 id="knowledgebasearticle">KnowledgeBaseArticle</h4>
<ul>
<li><strong>Table</strong>: <code>knowledge_base_articles</code></li>
<li><strong>Purpose</strong>: Help articles</li>
<li><strong>Key Fields</strong>: title, slug, content, category_id, is_published</li>
<li><strong>Relations</strong>: belongsTo category, company</li>
</ul>
<h4 id="emailtemplate">EmailTemplate</h4>
<ul>
<li><strong>Table</strong>: <code>email_templates</code></li>
<li><strong>Purpose</strong>: Transactional email templates</li>
<li><strong>Key Fields</strong>: name, subject, html_content, text_content</li>
<li><strong>Relations</strong>: belongsTo company</li>
</ul>
<h3 id="queue-job-models">üîÑ Queue &amp; Job Models</h3>
<h4 id="queuedjob">QueuedJob</h4>
<ul>
<li><strong>Table</strong>: <code>jobs</code></li>
<li><strong>Purpose</strong>: Laravel queue jobs</li>
<li><strong>Key Fields</strong>: queue, payload, attempts, reserved_at</li>
<li><strong>Relations</strong>: none</li>
</ul>
<h4 id="failedjob">FailedJob</h4>
<ul>
<li><strong>Table</strong>: <code>failed_jobs</code></li>
<li><strong>Purpose</strong>: Failed queue jobs</li>
<li><strong>Key Fields</strong>: uuid, connection, queue, payload, exception</li>
<li><strong>Relations</strong>: none</li>
</ul>
<h3 id="migration-import-models">üóÉÔ∏è Migration &amp; Import Models</h3>
<h4 id="importlog">ImportLog</h4>
<ul>
<li><strong>Table</strong>: <code>import_logs</code></li>
<li><strong>Purpose</strong>: Track data imports</li>
<li><strong>Key Fields</strong>: type, status, processed, failed, errors (JSON)</li>
<li><strong>Relations</strong>: belongsTo user</li>
</ul>
<h4 id="migrationstatus">MigrationStatus</h4>
<ul>
<li><strong>Table</strong>: <code>migration_statuses</code></li>
<li><strong>Purpose</strong>: Track data migrations</li>
<li><strong>Key Fields</strong>: migration_name, batch, status, started_at</li>
<li><strong>Relations</strong>: none</li>
</ul>
<h2 id="model-traits">Model Traits</h2>
<h3 id="commonly-used-traits">Commonly Used Traits</h3>
<ol>
<li>
<p><strong>HasCompany</strong>: Adds company scoping
   <code>php
   use HasCompany;</code></p>
</li>
<li>
<p><strong>HasUuid</strong>: Adds UUID primary keys
   <code>php
   use HasUuid;</code></p>
</li>
<li>
<p><strong>LogsActivity</strong>: Audit logging
   <code>php
   use LogsActivity;</code></p>
</li>
<li>
<p><strong>Searchable</strong>: Full-text search
   <code>php
   use Searchable;</code></p>
</li>
<li>
<p><strong>HasTags</strong>: Tagging support
   <code>php
   use HasTags;</code></p>
</li>
</ol>
<h2 id="model-scopes">Model Scopes</h2>
<h3 id="global-scopes">Global Scopes</h3>
<ul>
<li><strong>TenantScope</strong>: Automatically filters by company_id</li>
<li><strong>ActiveScope</strong>: Filters only active records</li>
<li><strong>PublishedScope</strong>: Filters published content</li>
</ul>
<h3 id="local-scopes">Local Scopes</h3>
<pre><code class="language-php">// Common local scopes
-&gt;active()
-&gt;inactive()
-&gt;today()
-&gt;thisWeek()
-&gt;thisMonth()
-&gt;between($start, $end)
-&gt;forBranch($branchId)
-&gt;forStaff($staffId)
-&gt;withStatus($status)
</code></pre>
<h2 id="model-events">Model Events</h2>
<h3 id="commonly-observed-events">Commonly Observed Events</h3>
<pre><code class="language-php">creating  - Set default values
created   - Send notifications
updating  - Log changes
updated   - Clear cache
deleting  - Check dependencies
deleted   - Cleanup related data
</code></pre>
<h2 id="relationships-map">Relationships Map</h2>
<pre><code class="language-mermaid">erDiagram
    Company ||--o{ Branch : has
    Company ||--o{ Customer : has
    Company ||--o{ Staff : has

    Branch ||--o{ Appointment : has
    Branch ||--o{ Service : offers
    Branch ||--o{ PhoneNumber : has

    Staff ||--o{ Appointment : handles
    Staff }o--|| Branch : works_at
    Staff ||--o{ StaffEventType : has

    Customer ||--o{ Appointment : books
    Customer ||--o{ Call : makes

    Appointment }o--|| Customer : for
    Appointment }o--|| Staff : with
    Appointment }o--|| Service : books
    Appointment }o--|| Call : from

    Call }o--|| Customer : from
    Call ||--o| Appointment : creates
</code></pre>
<h2 id="performance-optimizations">Performance Optimizations</h2>
<ol>
<li>
<p><strong>Eager Loading</strong>: Prevent N+1 queries
   <code>php
   Appointment::with(['customer', 'staff', 'service'])-&gt;get();</code></p>
</li>
<li>
<p><strong>Indexing</strong>: Key fields are indexed</p>
</li>
<li>company_id on all tenant models</li>
<li>phone_number for lookups</li>
<li>email for authentication</li>
<li>
<p>starts_at for appointments</p>
</li>
<li>
<p><strong>Caching</strong>: Frequently accessed data</p>
</li>
<li>Company settings</li>
<li>Service catalogs</li>
<li>Staff schedules</li>
</ol>
<h2 id="future-considerations">Future Considerations</h2>
<ol>
<li><strong>Soft Deletes</strong>: Add to more models</li>
<li><strong>Versioning</strong>: Track model changes</li>
<li><strong>Partitioning</strong>: For large tables</li>
<li><strong>Archiving</strong>: Old appointment data</li>
<li><strong>Read Replicas</strong>: For reporting</li>
</ol>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
