<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://api.askproai.de/mkdocs/architecture/performance/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Performance - AskProAI Dokumentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Performance";
        var mkdocs_page_input_path = "architecture/performance.md";
        var mkdocs_page_url = "/mkdocs/architecture/performance/";
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> AskProAI Dokumentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Start</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Hauptdokumentation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../CLAUDE/">Projekt Übersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../CLAUDE_QUICK_REFERENCE/">Quick Reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../CLAUDE_CONTEXT_SUMMARY/">Context Summary</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Power User</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../TOP_10_COMMANDS/">Top 10 Commands</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../CLAUDE_BEFEHLE_FUER_DICH/">Claude Befehle für dich</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../MY_COMMANDS/">Meine Commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Best Practices 2025</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../BEST_PRACTICES_IMPLEMENTATION/">Implementation Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../DEVELOPMENT_PROCESS_2025/">Development Process</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../CLAUDE_DOCUMENTATION_GAPS_ANALYSIS.md">Documentation Gaps</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Schnellstart</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../5-MINUTEN_ONBOARDING_PLAYBOOK/">5-Minuten Onboarding</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Architektur</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../overview/">Übersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../services/">Services</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../system-design/">System Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mcp-architecture/">MCP Architecture</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../database-schema/">Database Schema</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../security/">Security</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Performance</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#performance-goals">Performance Goals</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#target-metrics">Target Metrics</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#architecture-components">Architecture Components</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#load-balancing">Load Balancing</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#caching-strategy">Caching Strategy</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#cache-layers">Cache Layers</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#cache-configuration">Cache Configuration</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#database-optimization">Database Optimization</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#connection-pooling">Connection Pooling</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#query-optimization">Query Optimization</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#api-performance">API Performance</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#response-time-optimization">Response Time Optimization</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#batch-operations">Batch Operations</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#queue-performance">Queue Performance</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#queue-configuration">Queue Configuration</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#job-batching">Job Batching</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#frontend-performance">Frontend Performance</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#asset-optimization">Asset Optimization</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#lazy-loading">Lazy Loading</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#performance-monitoring">Performance Monitoring</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#application-performance-monitoring-apm">Application Performance Monitoring (APM)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#database-query-monitoring">Database Query Monitoring</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#real-time-metrics">Real-time Metrics</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#performance-optimization-techniques">Performance Optimization Techniques</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1-database-optimizations">1. Database Optimizations</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2-code-optimizations">2. Code Optimizations</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#3-caching-strategies">3. Caching Strategies</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#load-testing">Load Testing</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#test-scenarios">Test Scenarios</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#performance-benchmarks">Performance Benchmarks</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#scaling-strategy">Scaling Strategy</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#horizontal-scaling">Horizontal Scaling</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#vertical-scaling-limits">Vertical Scaling Limits</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../api/overview.md">Übersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/authentication/">Authentication</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../api/endpoints.md">Endpoints</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/webhooks/">Webhooks</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Features</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../features/appointment-booking/">Appointment Booking</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../features/call-management.md">Call Management</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../features/customer-portal.md">Customer Portal</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../features/multi-tenancy/">Multi-Tenancy</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Development</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../development/setup.md">Setup</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../development/testing.md">Testing</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../development/code-standards.md">Code Standards</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Deployment</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../deployment/overview.md">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../deployment/production.md">Production</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../deployment/environment-variables.md">Environment Variables</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Betrieb</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../CUSTOMER_SUCCESS_RUNBOOK/">Customer Success</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../EMERGENCY_RESPONSE_PLAYBOOK/">Emergency Response</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../ERROR_PATTERNS/">Error Patterns</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../TROUBLESHOOTING_DECISION_TREE/">Troubleshooting</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../DEPLOYMENT_CHECKLIST/">Deployment Checklist</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Monitoring</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../KPI_DASHBOARD_TEMPLATE/">KPI Dashboard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../INTEGRATION_HEALTH_MONITOR/">Health Monitor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../PHONE_TO_APPOINTMENT_FLOW/">Phone to Appointment Flow</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">AskProAI Dokumentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Architektur &raquo;</li>
      <li>Performance</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="performance-architecture">Performance Architecture</h1>
<h2 id="overview">Overview</h2>
<p>AskProAI is designed to handle high-volume phone calls and appointment bookings with sub-second response times. This document outlines our performance architecture, optimization strategies, and monitoring approach.</p>
<h2 id="performance-goals">Performance Goals</h2>
<h3 id="target-metrics">Target Metrics</h3>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Target</th>
<th>Current</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>API Response Time (p50)</td>
<td>&lt; 100ms</td>
<td>87ms</td>
<td>✅</td>
</tr>
<tr>
<td>API Response Time (p99)</td>
<td>&lt; 500ms</td>
<td>432ms</td>
<td>✅</td>
</tr>
<tr>
<td>Phone Number Resolution</td>
<td>&lt; 50ms</td>
<td>34ms</td>
<td>✅</td>
</tr>
<tr>
<td>Availability Check</td>
<td>&lt; 200ms</td>
<td>156ms</td>
<td>✅</td>
</tr>
<tr>
<td>Webhook Processing</td>
<td>&lt; 1s</td>
<td>890ms</td>
<td>✅</td>
</tr>
<tr>
<td>Page Load Time</td>
<td>&lt; 2s</td>
<td>1.8s</td>
<td>✅</td>
</tr>
<tr>
<td>Concurrent Calls</td>
<td>&gt; 200</td>
<td>250</td>
<td>✅</td>
</tr>
<tr>
<td>Requests per Second</td>
<td>&gt; 1000</td>
<td>1200</td>
<td>✅</td>
</tr>
</tbody>
</table>
<h2 id="architecture-components">Architecture Components</h2>
<h3 id="load-balancing">Load Balancing</h3>
<pre><code class="language-mermaid">graph LR
    subgraph &quot;Traffic Distribution&quot;
        CF[Cloudflare]
        LB[Load Balancer]
    end

    subgraph &quot;Web Servers&quot;
        WEB1[Web Server 1]
        WEB2[Web Server 2]
        WEB3[Web Server 3]
    end

    subgraph &quot;Queue Workers&quot;
        QW1[Worker Pool 1]
        QW2[Worker Pool 2]
    end

    CF --&gt; LB
    LB --&gt; WEB1
    LB --&gt; WEB2
    LB --&gt; WEB3

    WEB1 --&gt; QW1
    WEB2 --&gt; QW1
    WEB3 --&gt; QW2
</code></pre>
<h3 id="caching-strategy">Caching Strategy</h3>
<h4 id="cache-layers">Cache Layers</h4>
<pre><code class="language-mermaid">graph TD
    REQ[Request] --&gt; L1[Browser Cache]
    L1 --&gt; L2[CDN Cache]
    L2 --&gt; L3[Application Cache]
    L3 --&gt; L4[Database Cache]
    L4 --&gt; DB[(Database)]

    L1 -.hit.-&gt; RESP[Response]
    L2 -.hit.-&gt; RESP
    L3 -.hit.-&gt; RESP
    L4 -.hit.-&gt; RESP
    DB --&gt; RESP
</code></pre>
<h4 id="cache-configuration">Cache Configuration</h4>
<pre><code class="language-php">// config/cache.php
return [
    'default' =&gt; env('CACHE_DRIVER', 'redis'),

    'stores' =&gt; [
        'redis' =&gt; [
            'driver' =&gt; 'redis',
            'connection' =&gt; 'cache',
            'lock_connection' =&gt; 'default',
        ],
    ],

    'prefix' =&gt; 'askproai_cache',

    'ttl' =&gt; [
        'phone_resolution' =&gt; 3600,      // 1 hour
        'branch_info' =&gt; 86400,          // 24 hours
        'availability' =&gt; 300,           // 5 minutes
        'customer_data' =&gt; 900,          // 15 minutes
        'api_responses' =&gt; 60,           // 1 minute
    ]
];
</code></pre>
<h3 id="database-optimization">Database Optimization</h3>
<h4 id="connection-pooling">Connection Pooling</h4>
<pre><code class="language-php">// Database connection pool configuration
'mysql' =&gt; [
    'driver' =&gt; 'mysql',
    'host' =&gt; env('DB_HOST'),
    'port' =&gt; env('DB_PORT'),
    'database' =&gt; env('DB_DATABASE'),
    'username' =&gt; env('DB_USERNAME'),
    'password' =&gt; env('DB_PASSWORD'),
    'charset' =&gt; 'utf8mb4',
    'collation' =&gt; 'utf8mb4_unicode_ci',
    'prefix' =&gt; '',
    'strict' =&gt; false,
    'engine' =&gt; 'InnoDB',
    'options' =&gt; [
        PDO::ATTR_PERSISTENT =&gt; true,
        PDO::ATTR_EMULATE_PREPARES =&gt; false,
        PDO::MYSQL_ATTR_USE_BUFFERED_QUERY =&gt; true,
    ],
    'pool' =&gt; [
        'min' =&gt; 10,
        'max' =&gt; 200,
        'idle_timeout' =&gt; 300,
    ]
],
</code></pre>
<h4 id="query-optimization">Query Optimization</h4>
<pre><code class="language-sql">-- Optimized appointment query with covering index
CREATE INDEX idx_appointments_lookup 
ON appointments (
    company_id, 
    branch_id, 
    start_time, 
    status,
    staff_id,
    service_id
) INCLUDE (
    customer_id,
    end_time,
    notes
);

-- Query uses covering index
SELECT 
    id, customer_id, staff_id, service_id,
    start_time, end_time, status, notes
FROM appointments
WHERE company_id = 1
    AND branch_id = 3
    AND start_time &gt;= '2025-06-24'
    AND start_time &lt; '2025-06-25'
    AND status IN ('confirmed', 'pending')
ORDER BY start_time;
</code></pre>
<h3 id="api-performance">API Performance</h3>
<h4 id="response-time-optimization">Response Time Optimization</h4>
<pre><code class="language-php">class AppointmentController
{
    public function index(Request $request)
    {
        // Cache key based on request parameters
        $cacheKey = 'appointments:' . md5(serialize($request-&gt;all()));

        return Cache::remember($cacheKey, 60, function () use ($request) {
            return Appointment::query()
                -&gt;with(['customer', 'staff', 'service']) // Eager load
                -&gt;where('company_id', auth()-&gt;user()-&gt;company_id)
                -&gt;filter($request-&gt;all())
                -&gt;paginate(20);
        });
    }
}
</code></pre>
<h4 id="batch-operations">Batch Operations</h4>
<pre><code class="language-php">// Batch appointment creation
public function batchCreate(Request $request)
{
    $appointments = collect($request-&gt;appointments);

    // Validate all first
    $appointments-&gt;each(fn($data) =&gt; 
        $this-&gt;validate($data, AppointmentRequest::rules())
    );

    // Bulk insert
    $created = DB::transaction(function () use ($appointments) {
        return Appointment::insert(
            $appointments-&gt;map(fn($data) =&gt; 
                array_merge($data, [
                    'company_id' =&gt; auth()-&gt;user()-&gt;company_id,
                    'created_at' =&gt; now(),
                    'updated_at' =&gt; now()
                ])
            )-&gt;toArray()
        );
    });

    // Process webhooks async
    ProcessBatchWebhooks::dispatch($created);

    return response()-&gt;json(['created' =&gt; count($created)]);
}
</code></pre>
<h3 id="queue-performance">Queue Performance</h3>
<h4 id="queue-configuration">Queue Configuration</h4>
<pre><code class="language-php">// config/horizon.php
'environments' =&gt; [
    'production' =&gt; [
        'supervisor-1' =&gt; [
            'connection' =&gt; 'redis',
            'queue' =&gt; ['critical', 'high', 'default'],
            'balance' =&gt; 'auto',
            'minProcesses' =&gt; 10,
            'maxProcesses' =&gt; 50,
            'balanceMaxShift' =&gt; 5,
            'balanceCooldown' =&gt; 3,
            'memory' =&gt; 128,
            'tries' =&gt; 3,
        ],
        'webhooks' =&gt; [
            'connection' =&gt; 'redis',
            'queue' =&gt; ['webhooks'],
            'balance' =&gt; 'simple',
            'processes' =&gt; 20,
            'memory' =&gt; 256,
            'tries' =&gt; 5,
            'timeout' =&gt; 30,
        ],
    ],
],
</code></pre>
<h4 id="job-batching">Job Batching</h4>
<pre><code class="language-php">// Batch webhook processing
class ProcessWebhookBatch
{
    public function handle()
    {
        $webhooks = WebhookEvent::pending()
            -&gt;take(100)
            -&gt;get();

        $webhooks-&gt;chunk(10)-&gt;each(function ($chunk) {
            Bus::batch($chunk-&gt;map(function ($webhook) {
                return new ProcessSingleWebhook($webhook);
            }))-&gt;dispatch();
        });
    }
}
</code></pre>
<h3 id="frontend-performance">Frontend Performance</h3>
<h4 id="asset-optimization">Asset Optimization</h4>
<pre><code class="language-javascript">// vite.config.js
export default defineConfig({
    build: {
        rollupOptions: {
            output: {
                manualChunks: {
                    vendor: ['vue', 'axios', 'lodash'],
                    charts: ['chart.js', 'chartjs-adapter-date-fns'],
                }
            }
        },
        cssCodeSplit: true,
        sourcemap: false,
        minify: 'terser',
        terserOptions: {
            compress: {
                drop_console: true,
                drop_debugger: true
            }
        }
    }
});
</code></pre>
<h4 id="lazy-loading">Lazy Loading</h4>
<pre><code class="language-vue">&lt;!-- Lazy load heavy components --&gt;
&lt;template&gt;
    &lt;div&gt;
        &lt;LazyCalendar v-if=&quot;showCalendar&quot; /&gt;
        &lt;LazyAnalytics v-if=&quot;showAnalytics&quot; /&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
    components: {
        LazyCalendar: () =&gt; import('./Calendar.vue'),
        LazyAnalytics: () =&gt; import('./Analytics.vue')
    }
}
&lt;/script&gt;
</code></pre>
<h2 id="performance-monitoring">Performance Monitoring</h2>
<h3 id="application-performance-monitoring-apm">Application Performance Monitoring (APM)</h3>
<pre><code class="language-php">// Custom performance tracking
class PerformanceMiddleware
{
    public function handle($request, Closure $next)
    {
        $start = microtime(true);

        $response = $next($request);

        $duration = (microtime(true) - $start) * 1000;

        // Log slow requests
        if ($duration &gt; 500) {
            Log::warning('Slow request detected', [
                'url' =&gt; $request-&gt;fullUrl(),
                'method' =&gt; $request-&gt;method(),
                'duration_ms' =&gt; $duration,
                'memory_mb' =&gt; memory_get_peak_usage(true) / 1048576,
            ]);
        }

        // Add performance headers
        $response-&gt;headers-&gt;set('X-Response-Time', $duration . 'ms');

        return $response;
    }
}
</code></pre>
<h3 id="database-query-monitoring">Database Query Monitoring</h3>
<pre><code class="language-php">// Query logging for slow queries
DB::listen(function ($query) {
    if ($query-&gt;time &gt; 100) { // Queries over 100ms
        Log::channel('slow_queries')-&gt;warning('Slow query detected', [
            'sql' =&gt; $query-&gt;sql,
            'bindings' =&gt; $query-&gt;bindings,
            'time' =&gt; $query-&gt;time,
            'connection' =&gt; $query-&gt;connectionName,
        ]);
    }
});
</code></pre>
<h3 id="real-time-metrics">Real-time Metrics</h3>
<pre><code class="language-php">class MetricsCollector
{
    public function collect()
    {
        return [
            'response_time' =&gt; [
                'p50' =&gt; $this-&gt;percentile(50),
                'p90' =&gt; $this-&gt;percentile(90),
                'p99' =&gt; $this-&gt;percentile(99),
            ],
            'throughput' =&gt; [
                'requests_per_second' =&gt; $this-&gt;getRPS(),
                'concurrent_users' =&gt; $this-&gt;getConcurrentUsers(),
            ],
            'resources' =&gt; [
                'cpu_usage' =&gt; sys_getloadavg()[0],
                'memory_usage' =&gt; memory_get_usage(true) / 1048576,
                'db_connections' =&gt; DB::connection()-&gt;getPdo()-&gt;getAttribute(PDO::ATTR_CONNECTION_STATUS),
            ],
            'cache' =&gt; [
                'hit_rate' =&gt; Cache::getStore()-&gt;getHitRate(),
                'memory_usage' =&gt; Cache::getStore()-&gt;getMemoryUsage(),
            ]
        ];
    }
}
</code></pre>
<h2 id="performance-optimization-techniques">Performance Optimization Techniques</h2>
<h3 id="1-database-optimizations">1. Database Optimizations</h3>
<pre><code class="language-sql">-- Partition large tables
ALTER TABLE appointments 
PARTITION BY RANGE (YEAR(created_at)) (
    PARTITION p2023 VALUES LESS THAN (2024),
    PARTITION p2024 VALUES LESS THAN (2025),
    PARTITION p2025 VALUES LESS THAN (2026),
    PARTITION p_future VALUES LESS THAN MAXVALUE
);

-- Optimize for common queries
CREATE INDEX idx_phone_lookup 
ON phone_numbers (phone_number, company_id, branch_id)
WHERE active = 1;
</code></pre>
<h3 id="2-code-optimizations">2. Code Optimizations</h3>
<pre><code class="language-php">// Use generators for large datasets
public function exportAppointments()
{
    foreach ($this-&gt;getAppointmentsGenerator() as $appointment) {
        yield $this-&gt;formatAppointment($appointment);
    }
}

private function getAppointmentsGenerator()
{
    return Appointment::query()
        -&gt;where('company_id', $this-&gt;company_id)
        -&gt;cursor();
}
</code></pre>
<h3 id="3-caching-strategies">3. Caching Strategies</h3>
<pre><code class="language-php">// Multi-level caching
class CacheService
{
    public function remember($key, $ttl, Closure $callback)
    {
        // L1: In-memory cache
        if ($cached = $this-&gt;memoryCache-&gt;get($key)) {
            return $cached;
        }

        // L2: Redis cache
        if ($cached = Cache::get($key)) {
            $this-&gt;memoryCache-&gt;put($key, $cached, 60);
            return $cached;
        }

        // L3: Database or compute
        $value = $callback();

        // Store in both caches
        Cache::put($key, $value, $ttl);
        $this-&gt;memoryCache-&gt;put($key, $value, 60);

        return $value;
    }
}
</code></pre>
<h2 id="load-testing">Load Testing</h2>
<h3 id="test-scenarios">Test Scenarios</h3>
<pre><code class="language-yaml">scenarios:
  - name: &quot;Normal Load&quot;
    users: 100
    duration: 300
    requests_per_user: 10

  - name: &quot;Peak Load&quot;
    users: 500
    duration: 600
    requests_per_user: 20

  - name: &quot;Stress Test&quot;
    users: 1000
    duration: 300
    requests_per_user: 50
</code></pre>
<h3 id="performance-benchmarks">Performance Benchmarks</h3>
<pre><code class="language-bash"># API endpoint benchmarks
ab -n 10000 -c 100 https://api.askproai.de/api/v2/appointments

# Database query benchmarks
mysqlslap --concurrency=50 --iterations=100 --query=test.sql

# Redis benchmarks
redis-benchmark -q -n 100000
</code></pre>
<h2 id="scaling-strategy">Scaling Strategy</h2>
<h3 id="horizontal-scaling">Horizontal Scaling</h3>
<pre><code class="language-yaml"># Kubernetes scaling configuration
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: api-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: api-deployment
  minReplicas: 3
  maxReplicas: 20
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 80
</code></pre>
<h3 id="vertical-scaling-limits">Vertical Scaling Limits</h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Current</th>
<th>Maximum</th>
<th>Scaling Strategy</th>
</tr>
</thead>
<tbody>
<tr>
<td>Web Servers</td>
<td>4 vCPU, 8GB</td>
<td>16 vCPU, 64GB</td>
<td>Horizontal preferred</td>
</tr>
<tr>
<td>Database</td>
<td>8 vCPU, 32GB</td>
<td>64 vCPU, 256GB</td>
<td>Read replicas</td>
</tr>
<tr>
<td>Redis</td>
<td>4 vCPU, 16GB</td>
<td>16 vCPU, 64GB</td>
<td>Cluster mode</td>
</tr>
<tr>
<td>Queue Workers</td>
<td>2 vCPU, 4GB</td>
<td>8 vCPU, 16GB</td>
<td>Horizontal only</td>
</tr>
</tbody>
</table>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../security/" class="btn btn-neutral float-left" title="Security"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../../api/authentication/" class="btn btn-neutral float-right" title="Authentication">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../security/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../api/authentication/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
