<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://api.askproai.de/mkdocs/DASHBOARD_REDESIGN_README/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Dashboard Redesign - Technical Documentation - AskProAI Dokumentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Dashboard Redesign - Technical Documentation";
        var mkdocs_page_input_path = "DASHBOARD_REDESIGN_README.md";
        var mkdocs_page_url = "/mkdocs/DASHBOARD_REDESIGN_README/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> AskProAI Dokumentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Start</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Hauptdokumentation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../CLAUDE/">Projekt Übersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CLAUDE_QUICK_REFERENCE/">Quick Reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CLAUDE_CONTEXT_SUMMARY/">Context Summary</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Power User</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../TOP_10_COMMANDS/">Top 10 Commands</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CLAUDE_BEFEHLE_FUER_DICH/">Claude Befehle für dich</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MY_COMMANDS/">Meine Commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Best Practices 2025</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../BEST_PRACTICES_IMPLEMENTATION/">Implementation Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../DEVELOPMENT_PROCESS_2025/">Development Process</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../CLAUDE_DOCUMENTATION_GAPS_ANALYSIS.md">Documentation Gaps</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Schnellstart</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../5-MINUTEN_ONBOARDING_PLAYBOOK/">5-Minuten Onboarding</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Architektur</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/overview/">Übersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/services/">Services</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/system-design/">System Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/mcp-architecture/">MCP Architecture</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/database-schema/">Database Schema</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/security/">Security</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/performance/">Performance</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../api/overview.md">Übersicht</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api/authentication/">Authentication</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../api/endpoints.md">Endpoints</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api/webhooks/">Webhooks</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Features</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../features/appointment-booking/">Appointment Booking</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../features/call-management.md">Call Management</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../features/customer-portal.md">Customer Portal</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../features/multi-tenancy/">Multi-Tenancy</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Development</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../development/setup.md">Setup</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../development/testing.md">Testing</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../development/code-standards.md">Code Standards</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Deployment</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../deployment/overview.md">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../deployment/production.md">Production</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../deployment/environment-variables.md">Environment Variables</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Betrieb</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../CUSTOMER_SUCCESS_RUNBOOK/">Customer Success</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../EMERGENCY_RESPONSE_PLAYBOOK/">Emergency Response</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ERROR_PATTERNS/">Error Patterns</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../TROUBLESHOOTING_DECISION_TREE/">Troubleshooting</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../DEPLOYMENT_CHECKLIST/">Deployment Checklist</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Monitoring</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../KPI_DASHBOARD_TEMPLATE/">KPI Dashboard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../INTEGRATION_HEALTH_MONITOR/">Health Monitor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../PHONE_TO_APPOINTMENT_FLOW/">Phone to Appointment Flow</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">AskProAI Dokumentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Dashboard Redesign - Technical Documentation</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="dashboard-redesign-technical-documentation">Dashboard Redesign - Technical Documentation</h1>
<h2 id="overview">Overview</h2>
<p>This document describes the complete redesign of the AskProAI Filament admin dashboard pages for Appointments (Termine), Calls (Anrufe), and Customers (Kunden). The redesign focuses on delivering enterprise-grade KPIs, real-time filtering, and exceptional performance.</p>
<h2 id="architecture">Architecture</h2>
<h3 id="component-structure">Component Structure</h3>
<pre><code>app/Filament/Admin/
├── Widgets/
│   ├── UniversalKpiWidget.php          # Base class for all KPI widgets
│   ├── GlobalFilterWidget.php          # Cross-widget filter synchronization
│   ├── AppointmentKpiWidget.php        # Appointment-specific KPIs
│   ├── CallKpiWidget.php               # Call-specific KPIs
│   ├── CustomerKpiWidget.php           # Customer-specific KPIs
│   ├── AppointmentTrendWidget.php      # Revenue trend chart
│   ├── CallDurationHistogramWidget.php # Call duration distribution
│   ├── CustomerFunnelWidget.php        # Conversion funnel
│   └── CustomerSourceWidget.php        # Customer acquisition sources
├── Traits/
│   └── HasGlobalFilters.php           # Filter state management trait
└── Resources/
    ├── AppointmentResource.php         # Enhanced with dashboard widgets
    ├── CallResource.php                # Enhanced with dashboard widgets
    └── CustomerResource.php            # Enhanced with dashboard widgets

app/Services/Dashboard/
└── DashboardMetricsService.php        # Centralized KPI calculation service
</code></pre>
<h3 id="key-design-patterns">Key Design Patterns</h3>
<h4 id="1-universal-widget-system">1. <strong>Universal Widget System</strong></h4>
<p>All KPI widgets extend <code>UniversalKpiWidget</code> which provides:
- Consistent formatting and styling
- Error handling and graceful degradation
- Trend calculation and visualization
- Responsive layout support</p>
<h4 id="2-global-filter-synchronization">2. <strong>Global Filter Synchronization</strong></h4>
<p>The <code>HasGlobalFilters</code> trait enables:
- Cross-widget filter state sharing via Livewire events
- Session persistence for filter preferences
- Real-time updates without page refresh</p>
<h4 id="3-service-oriented-architecture">3. <strong>Service-Oriented Architecture</strong></h4>
<p><code>DashboardMetricsService</code> centralizes:
- All KPI calculations in one place
- Multi-level caching strategy
- Query optimization
- Consistent data formatting</p>
<h2 id="kpis-implemented">KPIs Implemented</h2>
<h3 id="appointment-kpis">Appointment KPIs</h3>
<ol>
<li><strong>Revenue</strong> (Gesamt-Umsatz)</li>
<li>Current period revenue with trend</li>
<li>Comparison to previous period</li>
<li>
<p>Service-based calculation</p>
</li>
<li>
<p><strong>Occupancy Rate</strong> (Auslastung)</p>
</li>
<li>Booked vs. available time slots</li>
<li>Branch and staff filtering</li>
<li>
<p>Real-time updates</p>
</li>
<li>
<p><strong>Conversion Rate</strong> (Conversion)</p>
</li>
<li>Calls to appointments ratio</li>
<li>Funnel visualization</li>
<li>
<p>Period comparisons</p>
</li>
<li>
<p><strong>No-Show Rate</strong></p>
</li>
<li>Missed appointments tracking</li>
<li>Customer reliability metrics</li>
<li>Prevention insights</li>
</ol>
<h3 id="call-kpis">Call KPIs</h3>
<ol>
<li><strong>Total Calls</strong> (Anzahl Anrufe)</li>
<li>Volume tracking with trends</li>
<li>Peak time analysis</li>
<li>
<p>Duration distribution</p>
</li>
<li>
<p><strong>Success Rate</strong> (Erfolgsquote)</p>
</li>
<li>Calls resulting in appointments</li>
<li>Agent performance metrics</li>
<li>
<p>Conversion optimization</p>
</li>
<li>
<p><strong>Average Duration</strong> (Ø Dauer)</p>
</li>
<li>Call length analysis</li>
<li>Service time optimization</li>
<li>
<p>Quality indicators</p>
</li>
<li>
<p><strong>Cost Analysis</strong> (Kosten)</p>
</li>
<li>Per-call cost calculation</li>
<li>ROI metrics</li>
<li>Budget tracking</li>
</ol>
<h3 id="customer-kpis">Customer KPIs</h3>
<ol>
<li><strong>New Customers</strong> (Neue Kunden)</li>
<li>Acquisition tracking</li>
<li>Growth metrics</li>
<li>
<p>Source analysis</p>
</li>
<li>
<p><strong>Customer Lifetime Value</strong> (CLV)</p>
</li>
<li>Revenue per customer</li>
<li>Retention metrics</li>
<li>
<p>Profitability analysis</p>
</li>
<li>
<p><strong>Returning Rate</strong> (Wiederkehrrate)</p>
</li>
<li>Customer loyalty metrics</li>
<li>Service satisfaction indicators</li>
<li>
<p>Retention strategies</p>
</li>
<li>
<p><strong>Top Customers</strong> (Top-Kunden Anteil)</p>
</li>
<li>Revenue concentration</li>
<li>VIP identification</li>
<li>Risk assessment</li>
</ol>
<h2 id="performance-optimizations">Performance Optimizations</h2>
<h3 id="database-indexes">Database Indexes</h3>
<p>Created specialized indexes for dashboard queries:</p>
<pre><code class="language-sql">-- Appointments
idx_appointments_revenue_calc (company_id, status, starts_at, service_id)
idx_appointments_conversion_track (company_id, call_id, created_at)
idx_appointments_branch_date (company_id, branch_id, starts_at)

-- Calls
idx_calls_company_date (company_id, created_at)
idx_calls_status_duration (company_id, call_status, duration_sec)

-- Customers
idx_customers_company_phone (company_id, phone)
idx_customers_company_created (company_id, created_at)
</code></pre>
<h3 id="caching-strategy">Caching Strategy</h3>
<p>Three-tier caching approach:
- <strong>60s TTL</strong>: Live data (current day stats)
- <strong>300s TTL</strong>: Recent data (week/month stats)<br />
- <strong>3600s TTL</strong>: Historical data (quarter/year stats)</p>
<h3 id="query-optimization">Query Optimization</h3>
<ul>
<li>Eager loading for relationships</li>
<li>Subquery optimization for aggregates</li>
<li>Chunked processing for large datasets</li>
<li>Query result caching</li>
</ul>
<h2 id="filter-system">Filter System</h2>
<h3 id="available-filters">Available Filters</h3>
<ol>
<li><strong>Period Selection</strong></li>
<li>Today, Yesterday</li>
<li>This/Last Week</li>
<li>This/Last Month</li>
<li>This Quarter, This Year</li>
<li>
<p>Custom Date Range</p>
</li>
<li>
<p><strong>Dimension Filters</strong></p>
</li>
<li>Branch/Location</li>
<li>Staff Member</li>
<li>Service Type</li>
</ol>
<h3 id="filter-persistence">Filter Persistence</h3>
<ul>
<li>Session-based storage</li>
<li>URL parameter support</li>
<li>Cross-widget synchronization</li>
</ul>
<h2 id="mobile-responsiveness">Mobile Responsiveness</h2>
<h3 id="breakpoint-strategy">Breakpoint Strategy</h3>
<ul>
<li><strong>Mobile (&lt;640px)</strong>: Single column, stacked widgets</li>
<li><strong>Tablet (640-1024px)</strong>: 2-column grid</li>
<li><strong>Desktop (&gt;1024px)</strong>: 3-4 column grid</li>
</ul>
<h3 id="touch-optimizations">Touch Optimizations</h3>
<ul>
<li>Larger tap targets for filters</li>
<li>Swipeable period selection</li>
<li>Optimized chart interactions</li>
</ul>
<h2 id="testing">Testing</h2>
<h3 id="unit-tests">Unit Tests</h3>
<ul>
<li><code>DashboardMetricsServiceTest</code>: Service layer testing</li>
<li>KPI calculation verification</li>
<li>Cache behavior testing</li>
<li>Edge case handling</li>
</ul>
<h3 id="feature-tests">Feature Tests</h3>
<ul>
<li><code>GlobalFilterSynchronizationTest</code>: Filter system testing</li>
<li>Widget interaction testing</li>
<li>Event broadcasting verification</li>
<li>Session persistence testing</li>
</ul>
<h3 id="performance-testing">Performance Testing</h3>
<ul>
<li><code>OptimizeDashboardPerformance</code> command</li>
<li>Query analysis and optimization</li>
<li>Cache warming strategies</li>
<li>Index effectiveness verification</li>
</ul>
<h2 id="usage">Usage</h2>
<h3 id="basic-implementation">Basic Implementation</h3>
<pre><code class="language-php">// In your Filament Resource
protected function getHeaderWidgets(): array
{
    return [
        GlobalFilterWidget::class,
        AppointmentKpiWidget::class,
        AppointmentTrendWidget::class,
    ];
}
</code></pre>
<h3 id="custom-kpi-widget">Custom KPI Widget</h3>
<pre><code class="language-php">class CustomKpiWidget extends UniversalKpiWidget
{
    protected function getKpis(array $filters): array
    {
        return app(DashboardMetricsService::class)
            -&gt;getCustomKpis($filters);
    }

    protected function getWidgetTitle(): string
    {
        return 'Custom KPIs';
    }
}
</code></pre>
<h3 id="performance-monitoring">Performance Monitoring</h3>
<pre><code class="language-bash"># Analyze query performance
php artisan dashboard:optimize --analyze

# Warm up caches
php artisan dashboard:optimize --cache

# Run tests
php artisan test --filter Dashboard
</code></pre>
<h2 id="security-considerations">Security Considerations</h2>
<h3 id="multi-tenancy">Multi-Tenancy</h3>
<ul>
<li>Automatic company_id scoping</li>
<li>User permission checks</li>
<li>Data isolation verification</li>
</ul>
<h3 id="input-validation">Input Validation</h3>
<ul>
<li>Filter sanitization</li>
<li>SQL injection prevention</li>
<li>XSS protection in charts</li>
</ul>
<h2 id="future-enhancements">Future Enhancements</h2>
<h3 id="planned-features">Planned Features</h3>
<ol>
<li><strong>Export Functionality</strong></li>
<li>PDF reports</li>
<li>Excel exports</li>
<li>
<p>Scheduled reports</p>
</li>
<li>
<p><strong>Advanced Analytics</strong></p>
</li>
<li>Predictive metrics</li>
<li>Anomaly detection</li>
<li>
<p>Trend forecasting</p>
</li>
<li>
<p><strong>Customization</strong></p>
</li>
<li>User-defined KPIs</li>
<li>Widget arrangement</li>
<li>Custom date ranges</li>
</ol>
<h3 id="performance-roadmap">Performance Roadmap</h3>
<ol>
<li><strong>Real-time Updates</strong></li>
<li>WebSocket integration</li>
<li>Live data streaming</li>
<li>
<p>Push notifications</p>
</li>
<li>
<p><strong>Advanced Caching</strong></p>
</li>
<li>Redis clustering</li>
<li>Edge caching</li>
<li>Predictive pre-loading</li>
</ol>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="common-issues">Common Issues</h3>
<h4 id="slow-performance">Slow Performance</h4>
<ol>
<li>Check missing indexes: <code>php artisan dashboard:optimize --analyze</code></li>
<li>Clear stale caches: <code>php artisan cache:clear</code></li>
<li>Review query log for N+1 issues</li>
</ol>
<h4 id="filter-not-working">Filter Not Working</h4>
<ol>
<li>Check session configuration</li>
<li>Verify Livewire events are firing</li>
<li>Ensure trait is properly mounted</li>
</ol>
<h4 id="missing-data">Missing Data</h4>
<ol>
<li>Verify user has company_id</li>
<li>Check tenant scoping</li>
<li>Review date range filters</li>
</ol>
<h2 id="support">Support</h2>
<p>For issues or questions:
1. Check logs: <code>storage/logs/laravel.log</code>
2. Run diagnostics: <code>php artisan dashboard:optimize --analyze</code>
3. Review test coverage: <code>php artisan test --coverage</code></p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
