<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AskProAI Business Portal - Complete Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Reset & Base Styles */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Inter', sans-serif; background: #f8fafc; color: #0f172a; line-height: 1.5; }
        
        /* Utility Classes */
        .hidden { display: none !important; }
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .flex-1 { flex: 1; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .justify-center { justify-content: center; }
        .justify-end { justify-content: flex-end; }
        .gap-1 { gap: 0.25rem; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }
        .gap-6 { gap: 1.5rem; }
        .grid { display: grid; }
        .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
        .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        .grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
        .grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
        .space-y-2 > * + * { margin-top: 0.5rem; }
        .space-y-3 > * + * { margin-top: 0.75rem; }
        .space-y-4 > * + * { margin-top: 1rem; }
        .space-y-6 > * + * { margin-top: 1.5rem; }
        .space-x-2 > * + * { margin-left: 0.5rem; }
        .space-x-3 > * + * { margin-left: 0.75rem; }
        .space-x-4 > * + * { margin-left: 1rem; }
        
        /* Spacing */
        .p-2 { padding: 0.5rem; }
        .p-3 { padding: 0.75rem; }
        .p-4 { padding: 1rem; }
        .p-6 { padding: 1.5rem; }
        .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
        .px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
        .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .py-4 { padding-top: 1rem; padding-bottom: 1rem; }
        .pt-16 { padding-top: 4rem; }
        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-3 { margin-top: 0.75rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-6 { margin-top: 1.5rem; }
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .ml-2 { margin-left: 0.5rem; }
        .ml-3 { margin-left: 0.75rem; }
        .mr-2 { margin-right: 0.5rem; }
        .mr-3 { margin-right: 0.75rem; }
        
        /* Typography */
        .text-xs { font-size: 0.75rem; line-height: 1rem; }
        .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
        .text-base { font-size: 1rem; line-height: 1.5rem; }
        .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
        .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
        .text-2xl { font-size: 1.5rem; line-height: 2rem; }
        .text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
        .text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
        .font-normal { font-weight: 400; }
        .font-medium { font-weight: 500; }
        .font-semibold { font-weight: 600; }
        .font-bold { font-weight: 700; }
        .text-left { text-align: left; }
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .uppercase { text-transform: uppercase; }
        .tracking-wider { letter-spacing: 0.05em; }
        
        /* Colors */
        .text-white { color: #ffffff; }
        .text-gray-400 { color: #9ca3af; }
        .text-gray-500 { color: #6b7280; }
        .text-gray-600 { color: #4b5563; }
        .text-gray-700 { color: #374151; }
        .text-gray-900 { color: #111827; }
        .text-blue-600 { color: #2563eb; }
        .text-blue-700 { color: #1d4ed8; }
        .text-green-600 { color: #16a34a; }
        .text-green-800 { color: #166534; }
        .text-red-600 { color: #dc2626; }
        .text-red-800 { color: #991b1b; }
        .text-yellow-600 { color: #d97706; }
        .text-yellow-800 { color: #92400e; }
        .text-purple-600 { color: #9333ea; }
        .text-orange-600 { color: #ea580c; }
        
        .bg-white { background-color: #ffffff; }
        .bg-gray-50 { background-color: #f9fafb; }
        .bg-gray-100 { background-color: #f3f4f6; }
        .bg-gray-200 { background-color: #e5e7eb; }
        .bg-gray-600 { background-color: #4b5563; }
        .bg-gray-900 { background-color: #111827; }
        .bg-blue-50 { background-color: #eff6ff; }
        .bg-blue-100 { background-color: #dbeafe; }
        .bg-blue-500 { background-color: #3b82f6; }
        .bg-blue-600 { background-color: #2563eb; }
        .bg-blue-700 { background-color: #1d4ed8; }
        .bg-green-50 { background-color: #f0fdf4; }
        .bg-green-100 { background-color: #dcfce7; }
        .bg-green-500 { background-color: #22c55e; }
        .bg-green-600 { background-color: #16a34a; }
        .bg-red-50 { background-color: #fef2f2; }
        .bg-red-100 { background-color: #fee2e2; }
        .bg-red-500 { background-color: #ef4444; }
        .bg-red-600 { background-color: #dc2626; }
        .bg-yellow-50 { background-color: #fffbeb; }
        .bg-yellow-100 { background-color: #fef3c7; }
        .bg-purple-100 { background-color: #ede9fe; }
        .bg-purple-500 { background-color: #a855f7; }
        .bg-orange-100 { background-color: #fed7aa; }
        .bg-orange-500 { background-color: #f97316; }
        .bg-indigo-500 { background-color: #6366f1; }
        .bg-gradient-to-r { background-image: linear-gradient(to right, var(--tw-gradient-stops)); }
        .from-blue-600 { --tw-gradient-from: #2563eb; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to); }
        .to-blue-700 { --tw-gradient-to: #1d4ed8; }
        
        /* Borders */
        .border { border-width: 1px; }
        .border-2 { border-width: 2px; }
        .border-t { border-top-width: 1px; }
        .border-b { border-bottom-width: 1px; }
        .border-l-4 { border-left-width: 4px; }
        .border-gray-200 { border-color: #e5e7eb; }
        .border-gray-300 { border-color: #d1d5db; }
        .border-blue-500 { border-color: #3b82f6; }
        .border-green-500 { border-color: #22c55e; }
        .border-yellow-500 { border-color: #eab308; }
        
        /* Border Radius */
        .rounded { border-radius: 0.25rem; }
        .rounded-md { border-radius: 0.375rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .rounded-xl { border-radius: 0.75rem; }
        .rounded-full { border-radius: 9999px; }
        
        /* Shadow */
        .shadow-sm { box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05); }
        .shadow { box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1); }
        .shadow-md { box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }
        .shadow-lg { box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); }
        .shadow-xl { box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1); }
        
        /* Effects */
        .hover\:bg-gray-50:hover { background-color: #f9fafb; }
        .hover\:bg-gray-100:hover { background-color: #f3f4f6; }
        .hover\:bg-gray-200:hover { background-color: #e5e7eb; }
        .hover\:bg-gray-300:hover { background-color: #d1d5db; }
        .hover\:bg-blue-700:hover { background-color: #1d4ed8; }
        .hover\:bg-green-700:hover { background-color: #15803d; }
        .hover\:text-gray-600:hover { color: #4b5563; }
        .hover\:text-gray-700:hover { color: #374151; }
        .hover\:text-blue-800:hover { color: #1e40af; }
        .hover\:text-blue-900:hover { color: #1e3a8a; }
        .hover\:text-green-800:hover { color: #166534; }
        .hover\:text-green-900:hover { color: #14532d; }
        .hover\:text-red-800:hover { color: #991b1b; }
        .hover\:shadow-lg:hover { box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); }
        
        /* Layout */
        .fixed { position: fixed; }
        .absolute { position: absolute; }
        .relative { position: relative; }
        .inset-0 { top: 0; right: 0; bottom: 0; left: 0; }
        .top-0 { top: 0; }
        .right-0 { right: 0; }
        .-top-1 { top: -0.25rem; }
        .-right-1 { right: -0.25rem; }
        .z-10 { z-index: 10; }
        .z-20 { z-index: 20; }
        .z-50 { z-index: 50; }
        
        .w-full { width: 100%; }
        .w-64 { width: 16rem; }
        .max-w-md { max-width: 28rem; }
        .max-w-lg { max-width: 32rem; }
        .max-w-xl { max-width: 36rem; }
        .max-w-2xl { max-width: 42rem; }
        .max-w-3xl { max-width: 48rem; }
        .max-w-4xl { max-width: 56rem; }
        .max-w-5xl { max-width: 64rem; }
        .max-w-7xl { max-width: 80rem; }
        .min-h-screen { min-height: 100vh; }
        .max-h-96 { max-height: 24rem; }
        .h-4 { height: 1rem; }
        .h-5 { height: 1.25rem; }
        .h-6 { height: 1.5rem; }
        .h-8 { height: 2rem; }
        .h-10 { height: 2.5rem; }
        .h-12 { height: 3rem; }
        .h-16 { height: 4rem; }
        .h-64 { height: 16rem; }
        .h-full { height: 100%; }
        .h-screen { height: 100vh; }
        .w-4 { width: 1rem; }
        .w-5 { width: 1.25rem; }
        .w-6 { width: 1.5rem; }
        .w-8 { width: 2rem; }
        .w-10 { width: 2.5rem; }
        .w-12 { width: 3rem; }
        
        /* Form Elements */
        input, textarea, select {
            border: 1px solid #e5e7eb;
            border-radius: 0.375rem;
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            font-weight: 500;
            border-radius: 0.375rem;
            transition: all 0.15s ease-in-out;
            cursor: pointer;
            border: none;
            text-decoration: none;
        }
        
        .btn-primary {
            background-color: #3b82f6;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #2563eb;
        }
        
        .btn-secondary {
            background-color: #e5e7eb;
            color: #374151;
        }
        
        .btn-secondary:hover {
            background-color: #d1d5db;
        }
        
        .btn-success {
            background-color: #22c55e;
            color: white;
        }
        
        .btn-success:hover {
            background-color: #16a34a;
        }
        
        .btn-danger {
            background-color: #ef4444;
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #dc2626;
        }
        
        .btn-sm {
            padding: 0.375rem 0.75rem;
            font-size: 0.75rem;
        }
        
        .btn-icon {
            padding: 0.5rem;
        }
        
        /* Badge */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.125rem 0.625rem;
            font-size: 0.75rem;
            font-weight: 600;
            border-radius: 9999px;
        }
        
        .badge-blue {
            background-color: #dbeafe;
            color: #1e40af;
        }
        
        .badge-green {
            background-color: #dcfce7;
            color: #166534;
        }
        
        .badge-red {
            background-color: #fee2e2;
            color: #991b1b;
        }
        
        .badge-yellow {
            background-color: #fef3c7;
            color: #92400e;
        }
        
        /* Card */
        .card {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        }
        
        .card-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .card-body {
            padding: 1.5rem;
        }
        
        /* Table */
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            text-align: left;
            font-weight: 500;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #6b7280;
            padding: 0.75rem 1.5rem;
            background-color: #f9fafb;
        }
        
        td {
            padding: 1rem 1.5rem;
            border-top: 1px solid #e5e7eb;
        }
        
        tr:hover {
            background-color: #f9fafb;
        }
        
        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        
        .modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            max-width: 42rem;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }
        
        .modal.active .modal-content {
            transform: scale(1);
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .tab {
            padding: 1rem 1.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            color: #6b7280;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: all 0.15s ease;
        }
        
        .tab:hover {
            color: #374151;
        }
        
        .tab.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
        }
        
        /* Dropdown */
        .dropdown {
            position: relative;
        }
        
        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 0.5rem;
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            min-width: 12rem;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-0.5rem);
            transition: all 0.15s ease;
        }
        
        .dropdown.active .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .dropdown-item {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            color: #374151;
            cursor: pointer;
            transition: background-color 0.15s ease;
        }
        
        .dropdown-item:hover {
            background-color: #f3f4f6;
        }
        
        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 4rem;
            left: 0;
            bottom: 0;
            width: 16rem;
            background-color: white;
            border-right: 1px solid #e5e7eb;
            overflow-y: auto;
        }
        
        .sidebar-item {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            font-size: 0.875rem;
            color: #374151;
            cursor: pointer;
            transition: all 0.15s ease;
        }
        
        .sidebar-item:hover {
            background-color: #f3f4f6;
        }
        
        .sidebar-item.active {
            background-color: #eff6ff;
            color: #3b82f6;
            font-weight: 500;
        }
        
        .sidebar-item i {
            width: 1.25rem;
            height: 1.25rem;
            margin-right: 0.75rem;
        }
        
        /* Main Content */
        .main-content {
            margin-left: 16rem;
            padding: 2rem;
        }
        
        /* Stats Card */
        .stat-card {
            background-color: white;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        }
        
        .stat-value {
            font-size: 1.875rem;
            font-weight: 700;
            color: #111827;
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: #6b7280;
        }
        
        .stat-change {
            font-size: 0.75rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            margin-top: 0.25rem;
        }
        
        .stat-change.positive {
            color: #16a34a;
        }
        
        .stat-change.negative {
            color: #dc2626;
        }
        
        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 0.5rem;
            background-color: #e5e7eb;
            border-radius: 9999px;
            overflow: hidden;
        }
        
        .progress-bar-fill {
            height: 100%;
            background-color: #3b82f6;
            transition: width 0.3s ease;
        }
        
        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 2.75rem;
            height: 1.5rem;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #d1d5db;
            border-radius: 9999px;
            transition: 0.3s;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 1.25rem;
            width: 1.25rem;
            left: 0.125rem;
            bottom: 0.125rem;
            background-color: white;
            border-radius: 50%;
            transition: 0.3s;
        }
        
        input:checked + .toggle-slider {
            background-color: #3b82f6;
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(1.25rem);
        }
        
        /* Notification */
        .notification {
            position: fixed;
            bottom: 1rem;
            right: 1rem;
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            min-width: 20rem;
            transform: translateX(25rem);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification-icon {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .notification-icon.success {
            background-color: #dcfce7;
            color: #16a34a;
        }
        
        .notification-icon.error {
            background-color: #fee2e2;
            color: #dc2626;
        }
        
        .notification-icon.info {
            background-color: #dbeafe;
            color: #3b82f6;
        }
        
        /* Loading Spinner */
        .spinner {
            display: inline-block;
            width: 1.25rem;
            height: 1.25rem;
            border: 2px solid #e5e7eb;
            border-radius: 50%;
            border-top-color: #3b82f6;
            animation: spin 0.6s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Tooltip */
        .tooltip {
            position: relative;
        }
        
        .tooltip-content {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            margin-bottom: 0.5rem;
            padding: 0.5rem 0.75rem;
            background-color: #1f2937;
            color: white;
            font-size: 0.75rem;
            border-radius: 0.375rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease, visibility 0.2s ease;
        }
        
        .tooltip:hover .tooltip-content {
            opacity: 1;
            visibility: visible;
        }
        
        /* Skeleton Loader */
        .skeleton {
            background: linear-gradient(90deg, #f3f4f6 25%, #e5e7eb 50%, #f3f4f6 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Audio Player */
        .audio-player {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background-color: #f9fafb;
            border-radius: 0.5rem;
        }
        
        .audio-controls {
            display: flex;
            gap: 0.5rem;
        }
        
        .audio-progress {
            flex: 1;
            height: 0.25rem;
            background-color: #e5e7eb;
            border-radius: 9999px;
            cursor: pointer;
        }
        
        .audio-progress-fill {
            height: 100%;
            background-color: #3b82f6;
            border-radius: 9999px;
            width: 0%;
        }
        
        .audio-time {
            font-size: 0.75rem;
            color: #6b7280;
            min-width: 3rem;
        }
        
        /* Calendar */
        .calendar {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            overflow: hidden;
        }
        
        .calendar-header {
            padding: 1rem;
            background-color: #f9fafb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
        }
        
        .calendar-day-header {
            padding: 0.5rem;
            text-align: center;
            font-size: 0.75rem;
            font-weight: 500;
            color: #6b7280;
            background-color: #f9fafb;
        }
        
        .calendar-day {
            padding: 0.75rem;
            text-align: center;
            font-size: 0.875rem;
            border: 1px solid #f3f4f6;
            cursor: pointer;
            transition: background-color 0.15s ease;
        }
        
        .calendar-day:hover {
            background-color: #f9fafb;
        }
        
        .calendar-day.selected {
            background-color: #3b82f6;
            color: white;
        }
        
        .calendar-day.disabled {
            color: #d1d5db;
            cursor: not-allowed;
        }
        
        .calendar-day.has-event {
            position: relative;
        }
        
        .calendar-day.has-event::after {
            content: "";
            position: absolute;
            bottom: 0.25rem;
            left: 50%;
            transform: translateX(-50%);
            width: 0.25rem;
            height: 0.25rem;
            background-color: #3b82f6;
            border-radius: 50%;
        }
        
        /* Charts Container */
        .chart-container {
            position: relative;
            height: 300px;
        }
        
        /* Command Palette */
        .command-palette {
            position: fixed;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 40rem;
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);
            z-index: 100;
            display: none;
        }
        
        .command-palette.active {
            display: block;
        }
        
        .command-input {
            width: 100%;
            padding: 1rem 1.5rem;
            font-size: 1rem;
            border: none;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .command-list {
            max-height: 20rem;
            overflow-y: auto;
        }
        
        .command-item {
            padding: 0.75rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            cursor: pointer;
            transition: background-color 0.15s ease;
        }
        
        .command-item:hover {
            background-color: #f9fafb;
        }
        
        .command-item.selected {
            background-color: #eff6ff;
        }
        
        /* Print Styles */
        @media print {
            .sidebar, .no-print {
                display: none !important;
            }
            
            .main-content {
                margin-left: 0 !important;
            }
            
            body {
                background: white;
            }
        }
        
        /* Dark Mode Support */
        @media (prefers-color-scheme: dark) {
            body {
                background: #0f172a;
                color: #e5e7eb;
            }
            
            .bg-white {
                background-color: #1e293b;
            }
            
            .text-gray-900 {
                color: #f3f4f6;
            }
            
            .text-gray-700 {
                color: #d1d5db;
            }
            
            .text-gray-600 {
                color: #9ca3af;
            }
            
            .text-gray-500 {
                color: #6b7280;
            }
            
            .border-gray-200 {
                border-color: #374151;
            }
            
            input, textarea, select {
                background-color: #1e293b;
                border-color: #374151;
                color: #e5e7eb;
            }
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            
            .sidebar.open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .grid-cols-2 {
                grid-template-columns: repeat(1, minmax(0, 1fr));
            }
            
            .grid-cols-3 {
                grid-template-columns: repeat(1, minmax(0, 1fr));
            }
            
            .grid-cols-4 {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }
        
        /* Custom Animations */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-1rem);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-slideIn {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }
        
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        /* Live Indicator */
        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .live-dot {
            width: 0.5rem;
            height: 0.5rem;
            background-color: #ef4444;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 0.5rem;
        }
        
        ::-webkit-scrollbar-track {
            background: #f3f4f6;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 9999px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 h-16 bg-white border-b border-gray-200 z-20">
        <div class="h-full px-4 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <button class="p-2 hover:bg-gray-100 rounded-lg md:hidden" onclick="toggleSidebar()">
                    <i data-lucide="menu" class="w-5 h-5"></i>
                </button>
                <div class="flex items-center gap-2">
                    <h1 class="text-xl font-bold">AskProAI</h1>
                    <span class="text-sm text-gray-500">Business Portal</span>
                </div>
            </div>
            
            <div class="flex items-center gap-3">
                <!-- Quick Actions -->
                <button class="p-2 hover:bg-gray-100 rounded-lg" onclick="openCommandPalette()">
                    <i data-lucide="command" class="w-5 h-5"></i>
                </button>
                
                <!-- Search -->
                <div class="hidden md:flex items-center bg-gray-100 rounded-lg px-3 py-2">
                    <i data-lucide="search" class="w-4 h-4 text-gray-500"></i>
                    <input type="text" placeholder="Suche..." class="bg-transparent border-none outline-none ml-2 w-64 text-sm">
                </div>
                
                <!-- Notifications -->
                <div class="dropdown">
                    <button class="p-2 hover:bg-gray-100 rounded-lg relative" onclick="toggleDropdown(this)">
                        <i data-lucide="bell" class="w-5 h-5"></i>
                        <span class="absolute -top-1 -right-1 h-4 w-4 bg-red-500 rounded-full text-white text-xs flex items-center justify-center">3</span>
                    </button>
                    <div class="dropdown-menu">
                        <div class="p-3 border-b border-gray-200">
                            <h3 class="font-semibold">Benachrichtigungen</h3>
                        </div>
                        <div class="dropdown-item">
                            <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                            <div class="flex-1">
                                <p class="text-sm font-medium">Neuer Termin gebucht</p>
                                <p class="text-xs text-gray-500">vor 5 Minuten</p>
                            </div>
                        </div>
                        <div class="dropdown-item">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <div class="flex-1">
                                <p class="text-sm font-medium">Zahlung erhalten</p>
                                <p class="text-xs text-gray-500">vor 1 Stunde</p>
                            </div>
                        </div>
                        <div class="dropdown-item">
                            <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                            <div class="flex-1">
                                <p class="text-sm font-medium">Guthaben niedrig</p>
                                <p class="text-xs text-gray-500">vor 2 Stunden</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- User Menu -->
                <div class="dropdown">
                    <button class="flex items-center gap-2 p-2 hover:bg-gray-100 rounded-lg" onclick="toggleDropdown(this)">
                        <img src="https://ui-avatars.com/api/?name=Demo+User&background=3B82F6&color=fff" alt="User" class="w-8 h-8 rounded-full">
                        <div class="hidden md:block text-left">
                            <div class="text-sm font-medium">Demo User</div>
                            <div class="text-xs text-gray-500">demo@askproai.de</div>
                        </div>
                        <i data-lucide="chevron-down" class="w-4 h-4 hidden md:block"></i>
                    </button>
                    <div class="dropdown-menu">
                        <div class="dropdown-item">
                            <i data-lucide="user" class="w-4 h-4"></i>
                            <span>Mein Profil</span>
                        </div>
                        <div class="dropdown-item">
                            <i data-lucide="settings" class="w-4 h-4"></i>
                            <span>Einstellungen</span>
                        </div>
                        <div class="dropdown-item">
                            <i data-lucide="help-circle" class="w-4 h-4"></i>
                            <span>Hilfe & Support</span>
                        </div>
                        <div class="border-t border-gray-200"></div>
                        <div class="dropdown-item">
                            <i data-lucide="log-out" class="w-4 h-4"></i>
                            <span>Abmelden</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <nav class="p-4">
            <ul class="space-y-1">
                <li>
                    <a href="#" class="sidebar-item active" data-page="dashboard">
                        <i data-lucide="home" class="w-5 h-5"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-item" data-page="calls">
                        <i data-lucide="phone" class="w-5 h-5"></i>
                        <span>Anrufe</span>
                        <span class="ml-auto badge badge-blue">24</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-item" data-page="appointments">
                        <i data-lucide="calendar" class="w-5 h-5"></i>
                        <span>Termine</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-item" data-page="customers">
                        <i data-lucide="users" class="w-5 h-5"></i>
                        <span>Kunden</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-item" data-page="analytics">
                        <i data-lucide="bar-chart-2" class="w-5 h-5"></i>
                        <span>Analytics</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-item" data-page="billing">
                        <i data-lucide="credit-card" class="w-5 h-5"></i>
                        <span>Abrechnung</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-item" data-page="goals">
                        <i data-lucide="target" class="w-5 h-5"></i>
                        <span>Ziele & KPIs</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-item" data-page="team">
                        <i data-lucide="users-2" class="w-5 h-5"></i>
                        <span>Team</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-item" data-page="branches">
                        <i data-lucide="building" class="w-5 h-5"></i>
                        <span>Filialen</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-item" data-page="settings">
                        <i data-lucide="settings" class="w-5 h-5"></i>
                        <span>Einstellungen</span>
                    </a>
                </li>
            </ul>
            
            <!-- Branch Selector -->
            <div class="mt-6 p-3 bg-gray-50 rounded-lg">
                <label class="text-xs text-gray-500 font-medium">Aktuelle Filiale</label>
                <select class="w-full mt-1 text-sm" onchange="changeBranch(this.value)">
                    <option value="all">Alle Filialen</option>
                    <option value="main">Hauptfiliale</option>
                    <option value="north">Filiale Nord</option>
                    <option value="south">Filiale Süd</option>
                </select>
            </div>
            
            <!-- Quick Stats -->
            <div class="mt-6 p-3 bg-blue-50 rounded-lg">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-xs text-gray-600">Guthaben</span>
                    <span class="text-sm font-semibold">€125,50</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-bar-fill" style="width: 65%;"></div>
                </div>
                <p class="text-xs text-gray-500 mt-1">Reicht für ~322 Min.</p>
            </div>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content pt-16">
        <!-- Dashboard Page -->
        <div id="dashboardPage" class="page active">
            <!-- Page Header -->
            <div class="mb-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900">Dashboard</h2>
                        <p class="text-gray-600">Willkommen zurück! Hier ist Ihre Übersicht.</p>
                    </div>
                    <div class="flex items-center gap-3">
                        <button class="btn btn-secondary btn-sm">
                            <i data-lucide="download" class="w-4 h-4 mr-2"></i>
                            Export
                        </button>
                        <button class="btn btn-primary btn-sm" onclick="refreshDashboard()">
                            <i data-lucide="refresh-cw" class="w-4 h-4 mr-2"></i>
                            Aktualisieren
                        </button>
                    </div>
                </div>
            </div>

            <!-- Live Status Bar -->
            <div class="bg-green-50 border border-green-200 rounded-lg p-3 mb-6 flex items-center justify-between">
                <div class="flex items-center gap-2">
                    <div class="live-indicator">
                        <div class="live-dot"></div>
                        <span class="text-sm font-medium text-green-800">Live</span>
                    </div>
                    <span class="text-sm text-green-700">3 aktive Anrufe • 2 Agenten online</span>
                </div>
                <button class="text-sm text-green-700 hover:text-green-800 font-medium">Details anzeigen</button>
            </div>

            <!-- Stats Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                <div class="stat-card">
                    <div class="flex items-center justify-between mb-2">
                        <div class="p-2 bg-blue-100 rounded-lg">
                            <i data-lucide="phone-incoming" class="w-5 h-5 text-blue-600"></i>
                        </div>
                        <span class="text-xs text-gray-500">Heute</span>
                    </div>
                    <div class="stat-value">24</div>
                    <div class="stat-label">Anrufe</div>
                    <div class="stat-change positive">
                        <i data-lucide="trending-up" class="w-4 h-4 mr-1"></i>
                        +12% vs. gestern
                    </div>
                    <div class="progress-bar mt-3">
                        <div class="progress-bar-fill" style="width: 75%;"></div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="flex items-center justify-between mb-2">
                        <div class="p-2 bg-green-100 rounded-lg">
                            <i data-lucide="calendar-check" class="w-5 h-5 text-green-600"></i>
                        </div>
                        <span class="text-xs text-gray-500">Heute</span>
                    </div>
                    <div class="stat-value">18</div>
                    <div class="stat-label">Neue Termine</div>
                    <div class="stat-change positive">
                        <i data-lucide="trending-up" class="w-4 h-4 mr-1"></i>
                        +5% vs. gestern
                    </div>
                    <div class="mt-3">
                        <div class="flex justify-between text-xs text-gray-500">
                            <span>Bestätigt: 15</span>
                            <span>Offen: 3</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="flex items-center justify-between mb-2">
                        <div class="p-2 bg-purple-100 rounded-lg">
                            <i data-lucide="clock" class="w-5 h-5 text-purple-600"></i>
                        </div>
                        <span class="text-xs text-gray-500">Durchschnitt</span>
                    </div>
                    <div class="stat-value">3:45</div>
                    <div class="stat-label">Anrufdauer</div>
                    <div class="stat-change negative">
                        <i data-lucide="trending-down" class="w-4 h-4 mr-1"></i>
                        -8% vs. gestern
                    </div>
                    <div class="mt-3 text-xs text-gray-500">
                        Min: 0:32 • Max: 12:18
                    </div>
                </div>

                <div class="stat-card">
                    <div class="flex items-center justify-between mb-2">
                        <div class="p-2 bg-yellow-100 rounded-lg">
                            <i data-lucide="trending-up" class="w-5 h-5 text-yellow-600"></i>
                        </div>
                        <span class="text-xs text-gray-500">Rate</span>
                    </div>
                    <div class="stat-value">72%</div>
                    <div class="stat-label">Konversion</div>
                    <div class="stat-change positive">
                        <i data-lucide="trending-up" class="w-4 h-4 mr-1"></i>
                        +3% vs. gestern
                    </div>
                    <div class="mt-3">
                        <div class="grid grid-cols-3 gap-1 text-xs text-center">
                            <div>
                                <div class="font-medium">85%</div>
                                <div class="text-gray-500">Mo</div>
                            </div>
                            <div>
                                <div class="font-medium">72%</div>
                                <div class="text-gray-500">Di</div>
                            </div>
                            <div>
                                <div class="font-medium">68%</div>
                                <div class="text-gray-500">Mi</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Row -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                <div class="card">
                    <div class="card-header">
                        <div class="flex items-center justify-between">
                            <h3 class="text-lg font-semibold">Anrufvolumen (7 Tage)</h3>
                            <div class="flex items-center gap-2">
                                <button class="text-sm text-gray-500 hover:text-gray-700">
                                    <i data-lucide="maximize-2" class="w-4 h-4"></i>
                                </button>
                                <div class="dropdown">
                                    <button class="text-sm text-gray-500 hover:text-gray-700" onclick="toggleDropdown(this)">
                                        <i data-lucide="more-vertical" class="w-4 h-4"></i>
                                    </button>
                                    <div class="dropdown-menu">
                                        <div class="dropdown-item">Als Bild speichern</div>
                                        <div class="dropdown-item">Daten exportieren</div>
                                        <div class="dropdown-item">Drucken</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="callVolumeChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="flex items-center justify-between">
                            <h3 class="text-lg font-semibold">Terminbuchungen (7 Tage)</h3>
                            <div class="flex items-center gap-2">
                                <button class="text-sm text-gray-500 hover:text-gray-700">
                                    <i data-lucide="maximize-2" class="w-4 h-4"></i>
                                </button>
                                <div class="dropdown">
                                    <button class="text-sm text-gray-500 hover:text-gray-700" onclick="toggleDropdown(this)">
                                        <i data-lucide="more-vertical" class="w-4 h-4"></i>
                                    </button>
                                    <div class="dropdown-menu">
                                        <div class="dropdown-item">Als Bild speichern</div>
                                        <div class="dropdown-item">Daten exportieren</div>
                                        <div class="dropdown-item">Drucken</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="appointmentChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Additional Charts -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                <div class="card">
                    <div class="card-header">
                        <h3 class="text-lg font-semibold">Konversionsrate nach Uhrzeit</h3>
                    </div>
                    <div class="card-body">
                        <div class="chart-container" style="height: 200px;">
                            <canvas id="conversionByHourChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="text-lg font-semibold">Top Services</h3>
                    </div>
                    <div class="card-body">
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                        <span class="text-xs font-semibold">1</span>
                                    </div>
                                    <span class="text-sm">Beratungsgespräch</span>
                                </div>
                                <span class="text-sm font-semibold">42%</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center">
                                        <span class="text-xs font-semibold">2</span>
                                    </div>
                                    <span class="text-sm">Erstberatung</span>
                                </div>
                                <span class="text-sm font-semibold">28%</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center">
                                        <span class="text-xs font-semibold">3</span>
                                    </div>
                                    <span class="text-sm">Follow-up</span>
                                </div>
                                <span class="text-sm font-semibold">18%</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center">
                                        <span class="text-xs font-semibold">4</span>
                                    </div>
                                    <span class="text-sm">Sonstige</span>
                                </div>
                                <span class="text-sm font-semibold">12%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="text-lg font-semibold">Team Performance</h3>
                    </div>
                    <div class="card-body">
                        <div class="chart-container" style="height: 200px;">
                            <canvas id="teamPerformanceChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Activity Feed & Upcoming -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="card">
                    <div class="card-header">
                        <div class="flex items-center justify-between">
                            <h3 class="text-lg font-semibold">Letzte Aktivitäten</h3>
                            <button class="text-sm text-blue-600 hover:text-blue-700">Alle anzeigen</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="space-y-4">
                            <div class="flex items-start gap-3">
                                <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i data-lucide="phone-incoming" class="w-5 h-5 text-green-600"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium">Neuer Anruf von +49 151 12345678</p>
                                    <p class="text-xs text-gray-500">Termin für nächste Woche gebucht</p>
                                    <p class="text-xs text-gray-400 mt-1">vor 5 Minuten</p>
                                </div>
                                <button class="btn btn-sm">
                                    <i data-lucide="play" class="w-4 h-4"></i>
                                </button>
                            </div>

                            <div class="flex items-start gap-3">
                                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i data-lucide="calendar-check" class="w-5 h-5 text-blue-600"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium">Termin bestätigt</p>
                                    <p class="text-xs text-gray-500">Maria Schmidt - Beratungsgespräch</p>
                                    <p class="text-xs text-gray-400 mt-1">vor 12 Minuten</p>
                                </div>
                            </div>

                            <div class="flex items-start gap-3">
                                <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i data-lucide="alert-circle" class="w-5 h-5 text-yellow-600"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium">Guthaben niedrig</p>
                                    <p class="text-xs text-gray-500">Aktuelles Guthaben: €25,30</p>
                                    <p class="text-xs text-gray-400 mt-1">vor 1 Stunde</p>
                                </div>
                                <button class="btn btn-primary btn-sm">Aufladen</button>
                            </div>

                            <div class="flex items-start gap-3">
                                <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i data-lucide="target" class="w-5 h-5 text-purple-600"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium">Tagesziel erreicht!</p>
                                    <p class="text-xs text-gray-500">20 Termine gebucht - Ziel: 20</p>
                                    <p class="text-xs text-gray-400 mt-1">vor 2 Stunden</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="flex items-center justify-between">
                            <h3 class="text-lg font-semibold">Anstehende Termine</h3>
                            <button class="text-sm text-blue-600 hover:text-blue-700">Kalender öffnen</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="space-y-3">
                            <div class="p-3 border-l-4 border-blue-500 bg-blue-50 rounded-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="font-medium text-sm">Maria Schmidt</p>
                                        <p class="text-xs text-gray-600">Beratungsgespräch • Hauptfiliale</p>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-sm font-medium">14:00</p>
                                        <p class="text-xs text-gray-500">in 30 Min.</p>
                                    </div>
                                </div>
                                <div class="flex items-center gap-2 mt-2">
                                    <button class="text-xs text-blue-600 hover:text-blue-700">Details</button>
                                    <span class="text-gray-300">•</span>
                                    <button class="text-xs text-blue-600 hover:text-blue-700">Anrufen</button>
                                    <span class="text-gray-300">•</span>
                                    <button class="text-xs text-blue-600 hover:text-blue-700">Verschieben</button>
                                </div>
                            </div>

                            <div class="p-3 border-l-4 border-green-500 bg-green-50 rounded-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="font-medium text-sm">Thomas Müller</p>
                                        <p class="text-xs text-gray-600">Erstberatung • Filiale Nord</p>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-sm font-medium">15:30</p>
                                        <p class="text-xs text-gray-500">in 2 Std.</p>
                                    </div>
                                </div>
                                <div class="flex items-center gap-2 mt-2">
                                    <span class="badge badge-yellow">Unbestätigt</span>
                                    <button class="text-xs text-green-600 hover:text-green-700">Bestätigen</button>
                                </div>
                            </div>

                            <div class="p-3 border-l-4 border-purple-500 bg-purple-50 rounded-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="font-medium text-sm">Sandra Weber</p>
                                        <p class="text-xs text-gray-600">Nachbesprechung • Online</p>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-sm font-medium">17:00</p>
                                        <p class="text-xs text-gray-500">in 3.5 Std.</p>
                                    </div>
                                </div>
                                <div class="flex items-center gap-2 mt-2">
                                    <i data-lucide="video" class="w-4 h-4 text-purple-600"></i>
                                    <button class="text-xs text-purple-600 hover:text-purple-700">Meeting-Link senden</button>
                                </div>
                            </div>

                            <button class="w-full py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-200 rounded-lg hover:bg-gray-50">
                                + Neuer Termin
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calls Page -->
        <div id="callsPage" class="page hidden">
            <div class="mb-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900">Anrufe</h2>
                        <p class="text-gray-600">Verwalten Sie alle eingehenden und ausgehenden Anrufe.</p>
                    </div>
                    <div class="flex items-center gap-3">
                        <button class="btn btn-secondary btn-sm" onclick="exportCalls()">
                            <i data-lucide="download" class="w-4 h-4 mr-2"></i>
                            Export
                        </button>
                        <button class="btn btn-primary btn-sm" onclick="refreshCalls()">
                            <i data-lucide="refresh-cw" class="w-4 h-4 mr-2"></i>
                            Aktualisieren
                        </button>
                    </div>
                </div>
            </div>

            <!-- Advanced Filters -->
            <div class="card mb-6">
                <div class="card-body">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div>
                            <label class="text-sm font-medium text-gray-700 mb-1">Suche</label>
                            <div class="relative">
                                <i data-lucide="search" class="w-4 h-4 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"></i>
                                <input type="text" placeholder="Nummer, Name oder ID..." class="pl-10 w-full">
                            </div>
                        </div>
                        <div>
                            <label class="text-sm font-medium text-gray-700 mb-1">Status</label>
                            <select class="w-full">
                                <option>Alle Status</option>
                                <option>Erfolgreich</option>
                                <option>Verpasst</option>
                                <option>Abgebrochen</option>
                                <option>In Bearbeitung</option>
                            </select>
                        </div>
                        <div>
                            <label class="text-sm font-medium text-gray-700 mb-1">Zeitraum</label>
                            <input type="date" class="w-full">
                        </div>
                        <div>
                            <label class="text-sm font-medium text-gray-700 mb-1">Ergebnis</label>
                            <select class="w-full">
                                <option>Alle Ergebnisse</option>
                                <option>Termin gebucht</option>
                                <option>Info erteilt</option>
                                <option>Rückruf vereinbart</option>
                                <option>Kein Interesse</option>
                            </select>
                        </div>
                    </div>
                    <div class="flex items-center justify-between mt-4">
                        <div class="flex items-center gap-3">
                            <button class="text-sm text-blue-600 hover:text-blue-700">Filter zurücksetzen</button>
                            <button class="text-sm text-blue-600 hover:text-blue-700">Filter speichern</button>
                        </div>
                        <div class="text-sm text-gray-500">
                            <span class="font-medium">247</span> Ergebnisse gefunden
                        </div>
                    </div>
                </div>
            </div>

            <!-- Calls Table -->
            <div class="card">
                <div class="card-body p-0">
                    <div class="overflow-x-auto">
                        <table>
                            <thead>
                                <tr>
                                    <th>
                                        <input type="checkbox" onchange="selectAllCalls(this.checked)">
                                    </th>
                                    <th>Anrufer</th>
                                    <th>Status</th>
                                    <th>Dauer</th>
                                    <th>Ergebnis</th>
                                    <th>Agent</th>
                                    <th>Zeit</th>
                                    <th>Aktionen</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <input type="checkbox" class="call-checkbox">
                                    </td>
                                    <td>
                                        <div class="flex items-center gap-3">
                                            <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                                <i data-lucide="user" class="w-5 h-5 text-blue-600"></i>
                                            </div>
                                            <div>
                                                <p class="font-medium">+49 151 12345678</p>
                                                <p class="text-sm text-gray-500">Maria Schmidt</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="badge badge-green">Erfolgreich</span>
                                    </td>
                                    <td>
                                        <div class="flex items-center gap-2">
                                            <span>3:45</span>
                                            <button class="text-gray-400 hover:text-gray-600" onclick="playAudio('call1')">
                                                <i data-lucide="play-circle" class="w-4 h-4"></i>
                                            </button>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="flex items-center gap-1">
                                            <i data-lucide="calendar-check" class="w-4 h-4 text-green-600"></i>
                                            <span class="text-sm">Termin gebucht</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="flex items-center gap-2">
                                            <img src="https://ui-avatars.com/api/?name=AI&background=3B82F6&color=fff" 
                                                 alt="AI" class="w-6 h-6 rounded-full">
                                            <span class="text-sm">AI Agent</span>
                                        </div>
                                    </td>
                                    <td class="text-sm text-gray-500">vor 15 Min.</td>
                                    <td>
                                        <div class="flex items-center gap-2">
                                            <button class="text-blue-600 hover:text-blue-700" onclick="showCallDetails('call1')">
                                                <i data-lucide="eye" class="w-4 h-4"></i>
                                            </button>
                                            <button class="text-green-600 hover:text-green-700" onclick="showTranscript('call1')">
                                                <i data-lucide="file-text" class="w-4 h-4"></i>
                                            </button>
                                            <button class="text-gray-600 hover:text-gray-700">
                                                <i data-lucide="download" class="w-4 h-4"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <input type="checkbox" class="call-checkbox">
                                    </td>
                                    <td>
                                        <div class="flex items-center gap-3">
                                            <div class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center">
                                                <i data-lucide="user" class="w-5 h-5 text-gray-600"></i>
                                            </div>
                                            <div>
                                                <p class="font-medium">+49 170 98765432</p>
                                                <p class="text-sm text-gray-500">Unbekannt</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="badge badge-blue">Beantwortet</span>
                                    </td>
                                    <td>
                                        <div class="flex items-center gap-2">
                                            <span>2:12</span>
                                            <button class="text-gray-400 hover:text-gray-600" onclick="playAudio('call2')">
                                                <i data-lucide="play-circle" class="w-4 h-4"></i>
                                            </button>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="flex items-center gap-1">
                                            <i data-lucide="info" class="w-4 h-4 text-blue-600"></i>
                                            <span class="text-sm">Info erteilt</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="flex items-center gap-2">
                                            <img src="https://ui-avatars.com/api/?name=AI&background=3B82F6&color=fff" 
                                                 alt="AI" class="w-6 h-6 rounded-full">
                                            <span class="text-sm">AI Agent</span>
                                        </div>
                                    </td>
                                    <td class="text-sm text-gray-500">vor 32 Min.</td>
                                    <td>
                                        <div class="flex items-center gap-2">
                                            <button class="text-blue-600 hover:text-blue-700" onclick="showCallDetails('call2')">
                                                <i data-lucide="eye" class="w-4 h-4"></i>
                                            </button>
                                            <button class="text-green-600 hover:text-green-700" onclick="showTranscript('call2')">
                                                <i data-lucide="file-text" class="w-4 h-4"></i>
                                            </button>
                                            <button class="text-gray-600 hover:text-gray-700">
                                                <i data-lucide="download" class="w-4 h-4"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <input type="checkbox" class="call-checkbox">
                                    </td>
                                    <td>
                                        <div class="flex items-center gap-3">
                                            <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center">
                                                <i data-lucide="phone-missed" class="w-5 h-5 text-red-600"></i>
                                            </div>
                                            <div>
                                                <p class="font-medium">+49 162 55443322</p>
                                                <p class="text-sm text-gray-500">Unbekannt</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="badge badge-red">Verpasst</span>
                                    </td>
                                    <td>0:00</td>
                                    <td>
                                        <span class="text-sm text-gray-500">-</span>
                                    </td>
                                    <td>
                                        <span class="text-sm text-gray-500">-</span>
                                    </td>
                                    <td class="text-sm text-gray-500">vor 1 Std.</td>
                                    <td>
                                        <div class="flex items-center gap-2">
                                            <button class="text-blue-600 hover:text-blue-700" onclick="callBack('+49 162 55443322')">
                                                <i data-lucide="phone-outgoing" class="w-4 h-4"></i>
                                            </button>
                                            <button class="text-gray-400">
                                                <i data-lucide="file-text" class="w-4 h-4"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Pagination -->
                    <div class="p-4 border-t border-gray-200">
                        <div class="flex items-center justify-between">
                            <div class="text-sm text-gray-500">
                                Zeige <strong>1-10</strong> von <strong>247</strong> Einträgen
                            </div>
                            <div class="flex items-center gap-2">
                                <button class="btn btn-secondary btn-sm" disabled>
                                    <i data-lucide="chevron-left" class="w-4 h-4"></i>
                                </button>
                                <button class="btn btn-primary btn-sm">1</button>
                                <button class="btn btn-secondary btn-sm">2</button>
                                <button class="btn btn-secondary btn-sm">3</button>
                                <span class="text-gray-500">...</span>
                                <button class="btn btn-secondary btn-sm">25</button>
                                <button class="btn btn-secondary btn-sm">
                                    <i data-lucide="chevron-right" class="w-4 h-4"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bulk Actions -->
            <div class="fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white px-6 py-3 rounded-lg shadow-lg hidden" id="bulkActions">
                <div class="flex items-center gap-4">
                    <span class="text-sm"><span id="selectedCount">0</span> ausgewählt</span>
                    <button class="text-sm hover:text-gray-300">Export</button>
                    <button class="text-sm hover:text-gray-300">Als gehört markieren</button>
                    <button class="text-sm hover:text-gray-300">Tags hinzufügen</button>
                    <button class="text-sm text-red-400 hover:text-red-300">Löschen</button>
                </div>
            </div>
        </div>

        <!-- Other pages will be added here -->
    </main>

    <!-- Command Palette -->
    <div class="command-palette" id="commandPalette">
        <input type="text" class="command-input" placeholder="Suche nach Befehlen..." id="commandInput">
        <div class="command-list" id="commandList">
            <div class="command-item" data-action="new-appointment">
                <i data-lucide="calendar-plus" class="w-4 h-4 text-gray-500"></i>
                <div class="flex-1">
                    <p class="text-sm font-medium">Neuer Termin</p>
                    <p class="text-xs text-gray-500">Termin manuell anlegen</p>
                </div>
                <kbd class="text-xs bg-gray-100 px-2 py-1 rounded">⌘K</kbd>
            </div>
            <div class="command-item" data-action="search-customer">
                <i data-lucide="search" class="w-4 h-4 text-gray-500"></i>
                <div class="flex-1">
                    <p class="text-sm font-medium">Kunde suchen</p>
                    <p class="text-xs text-gray-500">Nach Kunden suchen</p>
                </div>
            </div>
            <div class="command-item" data-action="export-data">
                <i data-lucide="download" class="w-4 h-4 text-gray-500"></i>
                <div class="flex-1">
                    <p class="text-sm font-medium">Daten exportieren</p>
                    <p class="text-xs text-gray-500">CSV oder PDF Export</p>
                </div>
            </div>
            <div class="command-item" data-action="quick-topup">
                <i data-lucide="credit-card" class="w-4 h-4 text-gray-500"></i>
                <div class="flex-1">
                    <p class="text-sm font-medium">Guthaben aufladen</p>
                    <p class="text-xs text-gray-500">Schnellaufladung</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Call Details Modal -->
    <div class="modal" id="callDetailsModal">
        <div class="modal-content max-w-3xl">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <h3 class="text-xl font-semibold">Anrufdetails</h3>
                    <button onclick="closeModal('callDetailsModal')" class="text-gray-400 hover:text-gray-600">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <div class="grid grid-cols-2 gap-6 mb-6">
                    <div>
                        <label class="text-sm text-gray-500">Anrufer</label>
                        <p class="font-medium">+49 151 12345678</p>
                        <p class="text-sm text-gray-600">Maria Schmidt</p>
                    </div>
                    <div>
                        <label class="text-sm text-gray-500">Status</label>
                        <div class="flex items-center gap-2 mt-1">
                            <span class="badge badge-green">Erfolgreich</span>
                            <span class="text-sm text-gray-500">• 3:45 Min.</span>
                        </div>
                    </div>
                    <div>
                        <label class="text-sm text-gray-500">Datum & Zeit</label>
                        <p class="font-medium">21.07.2025, 14:23</p>
                    </div>
                    <div>
                        <label class="text-sm text-gray-500">Agent</label>
                        <div class="flex items-center gap-2 mt-1">
                            <img src="https://ui-avatars.com/api/?name=AI&background=3B82F6&color=fff" 
                                 alt="AI" class="w-6 h-6 rounded-full">
                            <span>AI Agent v2.3</span>
                        </div>
                    </div>
                </div>

                <!-- Audio Player -->
                <div class="mb-6">
                    <label class="text-sm text-gray-500 mb-2 block">Aufzeichnung</label>
                    <div class="audio-player">
                        <div class="audio-controls">
                            <button class="btn btn-icon" onclick="togglePlay()">
                                <i data-lucide="play" class="w-4 h-4"></i>
                            </button>
                        </div>
                        <div class="audio-progress">
                            <div class="audio-progress-fill"></div>
                        </div>
                        <span class="audio-time">0:00 / 3:45</span>
                        <button class="btn btn-icon">
                            <i data-lucide="download" class="w-4 h-4"></i>
                        </button>
                    </div>
                </div>

                <!-- Transcript -->
                <div class="mb-6">
                    <div class="flex items-center justify-between mb-2">
                        <label class="text-sm text-gray-500">Transkript</label>
                        <div class="flex items-center gap-2">
                            <button class="text-sm text-blue-600 hover:text-blue-700">
                                <i data-lucide="languages" class="w-4 h-4 mr-1"></i>
                                Übersetzen
                            </button>
                            <button class="text-sm text-blue-600 hover:text-blue-700">
                                <i data-lucide="copy" class="w-4 h-4 mr-1"></i>
                                Kopieren
                            </button>
                        </div>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-4 max-h-64 overflow-y-auto space-y-3">
                        <div class="flex gap-3">
                            <span class="text-sm font-medium text-blue-600">AI:</span>
                            <p class="text-sm">Guten Tag, Sie sind verbunden mit Demo GmbH. Wie kann ich Ihnen helfen?</p>
                        </div>
                        <div class="flex gap-3">
                            <span class="text-sm font-medium text-green-600">Kunde:</span>
                            <p class="text-sm">Hallo, ich möchte gerne einen Termin für eine Beratung vereinbaren.</p>
                        </div>
                        <div class="flex gap-3">
                            <span class="text-sm font-medium text-blue-600">AI:</span>
                            <p class="text-sm">Sehr gerne! Wann würde es Ihnen denn passen?</p>
                        </div>
                        <div class="flex gap-3">
                            <span class="text-sm font-medium text-green-600">Kunde:</span>
                            <p class="text-sm">Am liebsten nächste Woche Dienstag oder Mittwoch nachmittags.</p>
                        </div>
                        <div class="flex gap-3">
                            <span class="text-sm font-medium text-blue-600">AI:</span>
                            <p class="text-sm">Ich habe am Dienstag, den 29. Juli um 15:00 Uhr einen freien Termin. Passt Ihnen das?</p>
                        </div>
                        <div class="flex gap-3">
                            <span class="text-sm font-medium text-green-600">Kunde:</span>
                            <p class="text-sm">Ja, das passt perfekt!</p>
                        </div>
                    </div>
                </div>

                <!-- Call Summary -->
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <h4 class="font-medium text-blue-900 mb-2">Zusammenfassung</h4>
                    <p class="text-sm text-blue-800">Termin erfolgreich gebucht für Dienstag, 29. Juli 2025, 15:00 Uhr. Beratungsgespräch in der Hauptfiliale.</p>
                    <div class="flex items-center gap-3 mt-3">
                        <button class="btn btn-primary btn-sm">
                            <i data-lucide="calendar" class="w-4 h-4 mr-2"></i>
                            Termin anzeigen
                        </button>
                        <button class="btn btn-secondary btn-sm">
                            <i data-lucide="user" class="w-4 h-4 mr-2"></i>
                            Kunde anzeigen
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notifications -->
    <div class="notification" id="notification">
        <div class="notification-icon success">
            <i data-lucide="check" class="w-5 h-5"></i>
        </div>
        <div class="flex-1">
            <p class="font-medium" id="notificationTitle">Erfolg!</p>
            <p class="text-sm text-gray-600" id="notificationMessage">Die Aktion wurde erfolgreich ausgeführt.</p>
        </div>
        <button onclick="hideNotification()" class="text-gray-400 hover:text-gray-600">
            <i data-lucide="x" class="w-4 h-4"></i>
        </button>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Global state
        let currentPage = 'dashboard';
        let selectedBranch = 'all';
        let activeModals = [];
        let selectedCalls = [];

        // Page navigation
        function showPage(page) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
            
            // Show selected page
            const pageElement = document.getElementById(page + 'Page');
            if (pageElement) {
                pageElement.classList.remove('hidden');
            }
            
            // Update sidebar
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.page === page) {
                    item.classList.add('active');
                }
            });
            
            currentPage = page;
            
            // Initialize page-specific features
            if (page === 'dashboard') {
                initDashboard();
            } else if (page === 'calls') {
                initCalls();
            }
            
            // Reinitialize icons
            lucide.createIcons();
        }

        // Sidebar navigation
        document.querySelectorAll('.sidebar-item').forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault();
                const page = item.dataset.page;
                if (page) {
                    showPage(page);
                }
            });
        });

        // Mobile sidebar toggle
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
        }

        // Dropdown functionality
        function toggleDropdown(button) {
            const dropdown = button.closest('.dropdown');
            const wasActive = dropdown.classList.contains('active');
            
            // Close all dropdowns
            document.querySelectorAll('.dropdown').forEach(d => d.classList.remove('active'));
            
            // Toggle this dropdown
            if (!wasActive) {
                dropdown.classList.add('active');
            }
        }

        // Close dropdowns on outside click
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.dropdown')) {
                document.querySelectorAll('.dropdown').forEach(d => d.classList.remove('active'));
            }
        });

        // Command palette
        function openCommandPalette() {
            const palette = document.getElementById('commandPalette');
            palette.classList.add('active');
            document.getElementById('commandInput').focus();
        }

        // Close command palette on escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.getElementById('commandPalette').classList.remove('active');
            } else if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
                e.preventDefault();
                openCommandPalette();
            }
        });

        // Command palette search
        document.getElementById('commandInput').addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            document.querySelectorAll('.command-item').forEach(item => {
                const text = item.textContent.toLowerCase();
                item.style.display = text.includes(query) ? 'flex' : 'none';
            });
        });

        // Execute command
        document.querySelectorAll('.command-item').forEach(item => {
            item.addEventListener('click', () => {
                const action = item.dataset.action;
                executeCommand(action);
                document.getElementById('commandPalette').classList.remove('active');
            });
        });

        function executeCommand(action) {
            switch (action) {
                case 'new-appointment':
                    showNotification('Info', 'Termin-Dialog wird geöffnet...', 'info');
                    break;
                case 'search-customer':
                    showPage('customers');
                    break;
                case 'export-data':
                    showNotification('Info', 'Export-Dialog wird geöffnet...', 'info');
                    break;
                case 'quick-topup':
                    showPage('billing');
                    break;
            }
        }

        // Modal functions
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
                activeModals.push(modalId);
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
                activeModals = activeModals.filter(id => id !== modalId);
            }
        }

        // Notifications
        function showNotification(title, message, type = 'success') {
            const notification = document.getElementById('notification');
            const icon = notification.querySelector('.notification-icon');
            
            // Update content
            document.getElementById('notificationTitle').textContent = title;
            document.getElementById('notificationMessage').textContent = message;
            
            // Update icon
            icon.className = `notification-icon ${type}`;
            const iconElement = icon.querySelector('i');
            iconElement.setAttribute('data-lucide', type === 'success' ? 'check' : type === 'error' ? 'x' : 'info');
            
            // Show notification
            notification.classList.add('show');
            
            // Auto hide after 5 seconds
            setTimeout(() => {
                hideNotification();
            }, 5000);
            
            // Reinitialize icons
            lucide.createIcons();
        }

        function hideNotification() {
            document.getElementById('notification').classList.remove('show');
        }

        // Dashboard functions
        function initDashboard() {
            // Initialize charts
            initCharts();
            
            // Simulate real-time updates
            setInterval(() => {
                updateLiveStatus();
            }, 30000);
        }

        function initCharts() {
            // Call Volume Chart
            const callVolumeCtx = document.getElementById('callVolumeChart');
            if (callVolumeCtx) {
                new Chart(callVolumeCtx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: ['Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa', 'So'],
                        datasets: [{
                            label: 'Anrufe',
                            data: [45, 52, 38, 65, 59, 42, 24],
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            }

            // Appointment Chart
            const appointmentCtx = document.getElementById('appointmentChart');
            if (appointmentCtx) {
                new Chart(appointmentCtx.getContext('2d'), {
                    type: 'bar',
                    data: {
                        labels: ['Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa', 'So'],
                        datasets: [{
                            label: 'Termine',
                            data: [12, 19, 15, 25, 22, 18, 8],
                            backgroundColor: '#22c55e'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            }

            // Conversion by Hour Chart
            const conversionCtx = document.getElementById('conversionByHourChart');
            if (conversionCtx) {
                new Chart(conversionCtx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: ['8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18'],
                        datasets: [{
                            label: 'Konversionsrate',
                            data: [45, 58, 72, 78, 65, 70, 82, 88, 75, 68, 55],
                            borderColor: '#f59e0b',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            tension: 0.3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Team Performance Chart
            const teamCtx = document.getElementById('teamPerformanceChart');
            if (teamCtx) {
                new Chart(teamCtx.getContext('2d'), {
                    type: 'radar',
                    data: {
                        labels: ['Anrufe', 'Termine', 'Konversion', 'Ø Dauer', 'Zufriedenheit'],
                        datasets: [{
                            label: 'AI Agent',
                            data: [85, 90, 72, 95, 88],
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.2)'
                        }, {
                            label: 'Team Ø',
                            data: [70, 75, 68, 80, 82],
                            borderColor: '#6b7280',
                            backgroundColor: 'rgba(107, 114, 128, 0.2)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }
        }

        function updateLiveStatus() {
            // Simulate live updates
            const activeCalls = Math.floor(Math.random() * 5);
            const onlineAgents = Math.floor(Math.random() * 3) + 1;
            
            const liveStatus = document.querySelector('.live-indicator').nextElementSibling;
            if (liveStatus) {
                liveStatus.textContent = `${activeCalls} aktive Anrufe • ${onlineAgents} Agenten online`;
            }
        }

        function refreshDashboard() {
            showNotification('Aktualisiert', 'Dashboard wurde aktualisiert', 'success');
            initDashboard();
        }

        // Calls page functions
        function initCalls() {
            updateBulkActions();
        }

        function selectAllCalls(checked) {
            document.querySelectorAll('.call-checkbox').forEach(checkbox => {
                checkbox.checked = checked;
            });
            updateBulkActions();
        }

        function updateBulkActions() {
            const selected = document.querySelectorAll('.call-checkbox:checked').length;
            const bulkActions = document.getElementById('bulkActions');
            
            if (selected > 0) {
                bulkActions.classList.remove('hidden');
                document.getElementById('selectedCount').textContent = selected;
            } else {
                bulkActions.classList.add('hidden');
            }
        }

        // Call checkbox listeners
        document.addEventListener('change', (e) => {
            if (e.target.classList.contains('call-checkbox')) {
                updateBulkActions();
            }
        });

        function showCallDetails(callId) {
            openModal('callDetailsModal');
        }

        function showTranscript(callId) {
            showNotification('Transkript', 'Transkript wird geladen...', 'info');
        }

        function playAudio(callId) {
            showNotification('Audio', 'Audio-Player wird geöffnet...', 'info');
        }

        function exportCalls() {
            showNotification('Export', 'Export wird vorbereitet...', 'info');
        }

        function refreshCalls() {
            showNotification('Aktualisiert', 'Anrufliste wurde aktualisiert', 'success');
        }

        function callBack(number) {
            showNotification('Rückruf', `Rückruf an ${number} wird vorbereitet...`, 'info');
        }

        // Audio player functions
        let isPlaying = false;

        function togglePlay() {
            isPlaying = !isPlaying;
            const icon = document.querySelector('.audio-controls button i');
            icon.setAttribute('data-lucide', isPlaying ? 'pause' : 'play');
            lucide.createIcons();
        }

        // Branch selector
        function changeBranch(branch) {
            selectedBranch = branch;
            showNotification('Filiale geändert', `Ansicht wurde auf "${branch}" geändert`, 'info');
            // Refresh current page with new branch filter
            if (currentPage === 'dashboard') {
                refreshDashboard();
            } else if (currentPage === 'calls') {
                refreshCalls();
            }
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            showPage('dashboard');
        });
    </script>
</body>
</html>