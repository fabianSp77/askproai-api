<!DOCTYPE html>
<html>
<head>
    <title>Portal Debug</title>
    <meta charset="utf-8">
    <script>
        // Override console methods to capture logs
        const logs = [];
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        
        console.log = function(...args) {
            logs.push({type: 'log', message: args.join(' ')});
            originalLog.apply(console, args);
        };
        
        console.error = function(...args) {
            logs.push({type: 'error', message: args.join(' ')});
            originalError.apply(console, args);
        };
        
        console.warn = function(...args) {
            logs.push({type: 'warn', message: args.join(' ')});
            originalWarn.apply(console, args);
        };
        
        window.addEventListener('error', function(e) {
            logs.push({type: 'error', message: `${e.message} at ${e.filename}:${e.lineno}:${e.colno}`});
        });
        
        window.addEventListener('unhandledrejection', function(e) {
            logs.push({type: 'error', message: `Unhandled Promise Rejection: ${e.reason}`});
        });
    </script>
</head>
<body>
    <h1>Portal Debug</h1>
    <iframe id="portal" src="/business" width="100%" height="500"></iframe>
    <h2>Console Logs:</h2>
    <div id="logs"></div>
    
    <script>
        setInterval(() => {
            const logsDiv = document.getElementById('logs');
            logsDiv.innerHTML = logs.map(log => 
                `<div style="color: ${log.type === 'error' ? 'red' : log.type === 'warn' ? 'orange' : 'black'}">
                    [${log.type.toUpperCase()}] ${log.message}
                </div>`
            ).join('');
        }, 1000);
    </script>
</body>
</html>