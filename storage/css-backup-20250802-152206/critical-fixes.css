/* ================================================================
   CRITICAL FIXES FOR BLACK SCREEN & ICON ISSUES
   GitHub Issues: #427, #428
   Created: 2025-07-29
   ================================================================ */

/* ================================================================
   1. BLACK SCREEN FIX - Remove overlay on desktop
   ================================================================ */

/* Remove sidebar overlay completely on desktop */
@media (min-width: 1024px) {
    .fi-sidebar-open::before,
    body.fi-sidebar-open::before,
    html.fi-sidebar-open::before {
        display: none !important;
        content: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        pointer-events: none !important;
        position: static !important;
        width: 0 !important;
        height: 0 !important;
    }
    
    /* Ensure body is scrollable */
    body.fi-sidebar-open,
    html.fi-sidebar-open {
        overflow: visible !important;
        position: static !important;
        height: auto !important;
    }
    
    /* Remove any transforms that might hide content */
    .fi-sidebar-open .fi-main-ctn {
        transform: none !important;
        filter: none !important;
        opacity: 1 !important;
    }
}

/* Mobile: Keep overlay but ensure it's clickable to close */
@media (max-width: 1023px) {
    .fi-sidebar-open::before {
        cursor: pointer;
        pointer-events: auto;
    }
}

/* ================================================================
   2. LOGIN FORM ACCESSIBILITY
   ================================================================ */

/* Ensure login forms are always on top */
.fi-simple-page,
.fi-login-panel,
.fi-simple-layout,
form[wire\:submit],
.login-container {
    position: relative !important;
    z-index: 100 !important;
    background: white !important;
}

/* Remove any filters or transforms on auth pages */
.fi-simple-layout * {
    filter: none !important;
    transform: none !important;
}

/* ================================================================
   3. ICON SIZE FIXES
   ================================================================ */

/* Only constrain SVG icons within specific containers */
.fi-icon svg,
.fi-ta-icon svg,
.fi-sidebar-item-icon svg,
.fi-icon-btn svg {
    max-width: 100% !important;
    max-height: 100% !important;
}

/* Fix viewBox auto-sizing issue for Filament icons only */
.fi-icon svg[viewBox],
.fi-ta-icon svg[viewBox],
.fi-sidebar-item-icon svg[viewBox],
.fi-icon-btn svg[viewBox] {
    width: 100% !important;
    height: 100% !important;
    max-width: inherit !important;
    max-height: inherit !important;
}

/* Standard icon sizes */
.fi-icon svg,
.heroicon,
[class*="heroicon-"] {
    width: 1.25rem !important;
    height: 1.25rem !important;
    max-width: 1.25rem !important;
    max-height: 1.25rem !important;
}

/* Sidebar navigation icons */
.fi-sidebar-item-icon svg {
    width: 1.25rem !important;
    height: 1.25rem !important;
    max-width: 1.25rem !important;
    max-height: 1.25rem !important;
}

/* Table action icons */
.fi-ta-icon svg {
    width: 1rem !important;
    height: 1rem !important;
    max-width: 1rem !important;
    max-height: 1rem !important;
}

/* Icon buttons */
.fi-icon-btn svg {
    width: 1.25rem !important;
    height: 1.25rem !important;
    max-width: 1.25rem !important;
    max-height: 1.25rem !important;
}

/* Large icons in headers/empty states */
.fi-empty-state-icon svg,
.fi-modal-icon svg {
    width: 3rem !important;
    height: 3rem !important;
    max-width: 3rem !important;
    max-height: 3rem !important;
}

/* ================================================================
   4. BODY & OVERFLOW FIXES
   ================================================================ */

/* Ensure body is always scrollable */
body {
    overflow-x: auto !important;
    overflow-y: auto !important;
    position: relative !important;
    min-height: 100vh !important;
}

/* Prevent overlays from blocking entire viewport */
.fi-sidebar-open::before {
    max-width: 100vw !important;
    max-height: 100vh !important;
}

/* ================================================================
   5. Z-INDEX HIERARCHY FIX
   ================================================================ */

/* Ensure proper stacking order */
.fi-topbar {
    z-index: 40 !important;
}

.fi-sidebar {
    z-index: 45 !important;
}

.fi-modal {
    z-index: 50 !important;
}

.fi-notifications {
    z-index: 60 !important;
}

/* ================================================================
   6. VISIBILITY INSURANCE
   ================================================================ */

/* Force main content to be visible */
.fi-main,
.fi-main-ctn,
.fi-page {
    visibility: visible !important;
    opacity: 1 !important;
    display: block !important;
}

/* ================================================================
   7. TARGETED OVERLAY FIXES (Removed Nuclear Option)
   ================================================================ */

/* Only target the specific problematic overlay */
@media (min-width: 1024px) {
    /* Only disable the sidebar overlay pseudo-element */
    body.fi-sidebar-open::before,
    .fi-sidebar-open::before {
        display: none !important;
        content: none !important;
        position: static !important;
        inset: auto !important;
    }
    
    /* Ensure all other pseudo-elements work normally */
    /* This preserves badges, indicators, form elements, etc. */
}