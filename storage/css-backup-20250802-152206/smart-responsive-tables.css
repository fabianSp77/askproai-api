/* ================================================
   SMART RESPONSIVE TABLES - INTELLIGENT COLUMN HANDLING
   Progressively hides less important columns as screen shrinks
   ================================================ */

/* Define column priorities */
:root {
    --priority-essential: 1;    /* Always visible */
    --priority-important: 2;    /* Hide on small mobile */
    --priority-nice-to-have: 3; /* Hide on mobile */
    --priority-optional: 4;     /* Hide on tablet */
}

/* Desktop: Show everything with horizontal scroll */
@media (min-width: 1280px) {
    .fi-ta-content {
        overflow-x: auto !important;
        overflow-y: visible !important;
    }
    
    .fi-ta-table {
        width: auto !important;
        min-width: max-content !important;
    }
}

/* Large Tablet (1024-1279px): Hide optional columns */
@media (max-width: 1279px) {
    /* Hide less important columns */
    .fi-ta-col-updated_at,
    .fi-ta-col-deleted_at,
    .fi-ta-col-company\.name {
        display: none !important;
    }
    
    /* Reduce padding */
    .fi-ta-table th,
    .fi-ta-table td {
        padding: 0.625rem 0.75rem !important;
    }
}

/* Tablet (768-1023px): Hide nice-to-have columns */
@media (max-width: 1023px) {
    /* Hide additional columns */
    .fi-ta-col-branch\.name,
    .fi-ta-col-assigned_staff_id,
    .fi-ta-col-notes,
    .fi-ta-col-metadata {
        display: none !important;
    }
    
    /* Further reduce padding */
    .fi-ta-table th,
    .fi-ta-table td {
        padding: 0.5rem !important;
        font-size: 0.875rem !important;
    }
    
    /* Compact badges */
    .fi-badge {
        padding: 0.125rem 0.375rem !important;
        font-size: 0.75rem !important;
    }
}

/* Mobile (480-767px): Show only essential columns */
@media (max-width: 767px) {
    /* Keep horizontal scroll for now */
    .fi-ta-content {
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
    }
    
    /* But hide many columns */
    .fi-ta-col-email,
    .fi-ta-col-duration_sec,
    .fi-ta-col-cost,
    .fi-ta-col-refund_amount {
        display: none !important;
    }
    
    /* Very compact layout */
    .fi-ta-table th,
    .fi-ta-table td {
        padding: 0.375rem !important;
        font-size: 0.8125rem !important;
    }
    
    /* Shrink action buttons */
    .fi-ta-actions .fi-btn {
        padding: 0.25rem 0.5rem !important;
        font-size: 0.75rem !important;
    }
    
    /* Use icons only for actions where possible */
    .fi-ta-actions .fi-btn-label {
        display: none !important;
    }
    
    .fi-ta-actions .fi-btn .fi-icon {
        width: 1rem !important;
        height: 1rem !important;
    }
}

/* Small Mobile (< 480px): Card layout */
@media (max-width: 479px) {
    /* Switch to card layout */
    .fi-ta-content {
        overflow-x: visible !important;
        width: 100% !important;
    }
    
    .fi-ta-table {
        width: 100% !important;
        min-width: 100% !important;
    }
    
    /* Hide headers */
    .fi-ta-table thead {
        position: absolute !important;
        width: 1px !important;
        height: 1px !important;
        padding: 0 !important;
        margin: -1px !important;
        overflow: hidden !important;
        clip: rect(0, 0, 0, 0) !important;
        white-space: nowrap !important;
        border: 0 !important;
    }
    
    /* Card-style rows */
    .fi-ta-table tbody tr {
        display: block !important;
        margin-bottom: 0.75rem !important;
        background: white !important;
        border: 1px solid #e5e7eb !important;
        border-radius: 0.5rem !important;
        padding: 0.75rem !important;
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05) !important;
    }
    
    /* Stack cells */
    .fi-ta-table tbody td {
        display: flex !important;
        align-items: center !important;
        padding: 0.375rem 0 !important;
        border: none !important;
        min-height: 1.5rem !important;
    }
    
    /* Add labels */
    .fi-ta-table tbody td::before {
        content: attr(data-label) ":" !important;
        font-weight: 600 !important;
        color: #6b7280 !important;
        margin-right: 0.5rem !important;
        min-width: 100px !important;
        font-size: 0.75rem !important;
    }
    
    /* Hide empty cells */
    .fi-ta-table tbody td:empty {
        display: none !important;
    }
    
    /* Actions at bottom */
    .fi-ta-actions {
        width: 100% !important;
        justify-content: flex-end !important;
        padding-top: 0.5rem !important;
        border-top: 1px solid #e5e7eb !important;
        margin-top: 0.5rem !important;
    }
}

/* Resource-specific column priorities */
/* Calls Resource */
.fi-resource-calls {
    .fi-ta-col-caller_phone_number { --priority: var(--priority-essential); }
    .fi-ta-col-created_at { --priority: var(--priority-essential); }
    .fi-ta-col-status { --priority: var(--priority-essential); }
    .fi-ta-col-duration_sec { --priority: var(--priority-important); }
    .fi-ta-col-cost { --priority: var(--priority-important); }
    .fi-ta-col-branch\.name { --priority: var(--priority-nice-to-have); }
    .fi-ta-col-company\.name { --priority: var(--priority-optional); }
}

/* Customers Resource */
.fi-resource-customers {
    .fi-ta-col-name { --priority: var(--priority-essential); }
    .fi-ta-col-phone_number { --priority: var(--priority-essential); }
    .fi-ta-col-appointments_count { --priority: var(--priority-essential); }
    .fi-ta-col-email { --priority: var(--priority-important); }
    .fi-ta-col-created_at { --priority: var(--priority-nice-to-have); }
}

/* Appointments Resource */
.fi-resource-appointments {
    .fi-ta-col-customer\.name { --priority: var(--priority-essential); }
    .fi-ta-col-start_time { --priority: var(--priority-essential); }
    .fi-ta-col-status { --priority: var(--priority-essential); }
    .fi-ta-col-service\.name { --priority: var(--priority-important); }
    .fi-ta-col-staff\.name { --priority: var(--priority-nice-to-have); }
}

/* Horizontal scroll indicator for mobile */
@media (max-width: 767px) {
    .fi-ta-content {
        position: relative !important;
    }
    
    /* Fade edges to indicate scrollable content */
    .fi-ta-content::before,
    .fi-ta-content::after {
        content: '' !important;
        position: absolute !important;
        top: 0 !important;
        bottom: 0 !important;
        width: 20px !important;
        pointer-events: none !important;
        z-index: 10 !important;
    }
    
    .fi-ta-content::before {
        left: 0 !important;
        background: linear-gradient(to right, white, transparent) !important;
    }
    
    .fi-ta-content::after {
        right: 0 !important;
        background: linear-gradient(to left, white, transparent) !important;
    }
}

/* Touch-friendly scrollbar */
@media (max-width: 1023px) {
    .fi-ta-content {
        scrollbar-width: thin !important;
        -webkit-overflow-scrolling: touch !important;
    }
    
    .fi-ta-content::-webkit-scrollbar {
        height: 8px !important;
    }
    
    .fi-ta-content::-webkit-scrollbar-track {
        background: #f3f4f6 !important;
    }
    
    .fi-ta-content::-webkit-scrollbar-thumb {
        background: #9ca3af !important;
        border-radius: 4px !important;
    }
}